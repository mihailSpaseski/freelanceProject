"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[179],{58:(Ji,xn,$e)=>{$e.d(xn,{BH:()=>Rt,G6:()=>Ri,L:()=>et,LL:()=>B,Pz:()=>_t,Sg:()=>vr,UG:()=>Z,ZB:()=>Te,ZR:()=>Q,aH:()=>Ot,b$:()=>mn,eu:()=>F,hl:()=>V,jU:()=>Gt,m9:()=>ta,ne:()=>es,pd:()=>du,r3:()=>or,ru:()=>Vt,tV:()=>K,uI:()=>An,vZ:()=>Xi,w1:()=>Si,xO:()=>lu,xb:()=>Or,z$:()=>We,zd:()=>pi});const Ve=function(C){const T=[];let D=0;for(let z=0;z<C.length;z++){let M=C.charCodeAt(z);M<128?T[D++]=M:M<2048?(T[D++]=M>>6|192,T[D++]=63&M|128):55296==(64512&M)&&z+1<C.length&&56320==(64512&C.charCodeAt(z+1))?(M=65536+((1023&M)<<10)+(1023&C.charCodeAt(++z)),T[D++]=M>>18|240,T[D++]=M>>12&63|128,T[D++]=M>>6&63|128,T[D++]=63&M|128):(T[D++]=M>>12|224,T[D++]=M>>6&63|128,T[D++]=63&M|128)}return T},Ht={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(C,T){if(!Array.isArray(C))throw Error("encodeByteArray takes an array as a parameter");this.init_();const D=T?this.byteToCharMapWebSafe_:this.byteToCharMap_,z=[];for(let M=0;M<C.length;M+=3){const W=C[M],Le=M+1<C.length,Ze=Le?C[M+1]:0,yt=M+2<C.length,zt=yt?C[M+2]:0;let Fn=(15&Ze)<<2|zt>>6,At=63&zt;yt||(At=64,Le||(Fn=64)),z.push(D[W>>2],D[(3&W)<<4|Ze>>4],D[Fn],D[At])}return z.join("")},encodeString(C,T){return this.HAS_NATIVE_SUPPORT&&!T?btoa(C):this.encodeByteArray(Ve(C),T)},decodeString(C,T){return this.HAS_NATIVE_SUPPORT&&!T?atob(C):function(C){const T=[];let D=0,z=0;for(;D<C.length;){const M=C[D++];if(M<128)T[z++]=String.fromCharCode(M);else if(M>191&&M<224){const W=C[D++];T[z++]=String.fromCharCode((31&M)<<6|63&W)}else if(M>239&&M<365){const yt=((7&M)<<18|(63&C[D++])<<12|(63&C[D++])<<6|63&C[D++])-65536;T[z++]=String.fromCharCode(55296+(yt>>10)),T[z++]=String.fromCharCode(56320+(1023&yt))}else{const W=C[D++],Le=C[D++];T[z++]=String.fromCharCode((15&M)<<12|(63&W)<<6|63&Le)}}return T.join("")}(this.decodeStringToByteArray(C,T))},decodeStringToByteArray(C,T){this.init_();const D=T?this.charToByteMapWebSafe_:this.charToByteMap_,z=[];for(let M=0;M<C.length;){const W=D[C.charAt(M++)],Ze=M<C.length?D[C.charAt(M)]:0;++M;const zt=M<C.length?D[C.charAt(M)]:64;++M;const ve=M<C.length?D[C.charAt(M)]:64;if(++M,null==W||null==Ze||null==zt||null==ve)throw new Jt;z.push(W<<2|Ze>>4),64!==zt&&(z.push(Ze<<4&240|zt>>2),64!==ve&&z.push(zt<<6&192|ve))}return z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let C=0;C<this.ENCODED_VALS.length;C++)this.byteToCharMap_[C]=this.ENCODED_VALS.charAt(C),this.charToByteMap_[this.byteToCharMap_[C]]=C,this.byteToCharMapWebSafe_[C]=this.ENCODED_VALS_WEBSAFE.charAt(C),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[C]]=C,C>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(C)]=C,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(C)]=C)}}};class Jt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const et=function(C){return function(C){const T=Ve(C);return Ht.encodeByteArray(T,!0)}(C).replace(/\./g,"")},K=function(C){try{return Ht.decodeString(C,!0)}catch(T){console.error("base64Decode failed: ",T)}return null};function Te(C,T){if(!(T instanceof Object))return T;switch(T.constructor){case Date:return new Date(T.getTime());case Object:void 0===C&&(C={});break;case Array:C=[];break;default:return T}for(const D in T)!T.hasOwnProperty(D)||!Je(D)||(C[D]=Te(C[D],T[D]));return C}function Je(C){return"__proto__"!==C}const ze=()=>{try{return function ht(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const C=process.env.__FIREBASE_DEFAULTS__;return C?JSON.parse(C):void 0})()||(()=>{if(typeof document>"u")return;let C;try{C=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const T=C&&K(C[1]);return T&&JSON.parse(T)})()}catch(C){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${C}`)}},Ot=()=>{var C;return null===(C=ze())||void 0===C?void 0:C.config},_t=C=>{var T;return null===(T=ze())||void 0===T?void 0:T[`_${C}`]};class Rt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((T,D)=>{this.resolve=T,this.reject=D})}wrapCallback(T){return(D,z)=>{D?this.reject(D):this.resolve(z),"function"==typeof T&&(this.promise.catch(()=>{}),1===T.length?T(D):T(D,z))}}}function vr(C,T){if(C.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const z=T||"demo-project",M=C.iat||0,W=C.sub||C.user_id;if(!W)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Le=Object.assign({iss:`https://securetoken.google.com/${z}`,aud:z,iat:M,exp:M+3600,auth_time:M,sub:W,user_id:W,firebase:{sign_in_provider:"custom",identities:{}}},C);return[et(JSON.stringify({alg:"none",type:"JWT"})),et(JSON.stringify(Le)),""].join(".")}function We(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function An(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function Z(){var C;const T=null===(C=ze())||void 0===C?void 0:C.forceEnvironment;if("node"===T)return!0;if("browser"===T)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Gt(){return"object"==typeof self&&self.self===self}function Vt(){const C="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof C&&void 0!==C.id}function mn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Si(){const C=We();return C.indexOf("MSIE ")>=0||C.indexOf("Trident/")>=0}function Ri(){return!Z()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V(){try{return"object"==typeof indexedDB}catch{return!1}}function F(){return new Promise((C,T)=>{try{let D=!0;const z="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(z);M.onsuccess=()=>{M.result.close(),D||self.indexedDB.deleteDatabase(z),C(!0)},M.onupgradeneeded=()=>{D=!1},M.onerror=()=>{var W;T((null===(W=M.error)||void 0===W?void 0:W.message)||"")}}catch(D){T(D)}})}class Q extends Error{constructor(T,D,z){super(D),this.code=T,this.customData=z,this.name="FirebaseError",Object.setPrototypeOf(this,Q.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,B.prototype.create)}}class B{constructor(T,D,z){this.service=T,this.serviceName=D,this.errors=z}create(T,...D){const z=D[0]||{},M=`${this.service}/${T}`,W=this.errors[T],Le=W?function pe(C,T){return C.replace(st,(D,z)=>{const M=T[z];return null!=M?String(M):`<${z}?>`})}(W,z):"Error";return new Q(M,`${this.serviceName}: ${Le} (${M}).`,z)}}const st=/\{\$([^}]+)}/g;function or(C,T){return Object.prototype.hasOwnProperty.call(C,T)}function Or(C){for(const T in C)if(Object.prototype.hasOwnProperty.call(C,T))return!1;return!0}function Xi(C,T){if(C===T)return!0;const D=Object.keys(C),z=Object.keys(T);for(const M of D){if(!z.includes(M))return!1;const W=C[M],Le=T[M];if(_n(W)&&_n(Le)){if(!Xi(W,Le))return!1}else if(W!==Le)return!1}for(const M of z)if(!D.includes(M))return!1;return!0}function _n(C){return null!==C&&"object"==typeof C}function lu(C){const T=[];for(const[D,z]of Object.entries(C))Array.isArray(z)?z.forEach(M=>{T.push(encodeURIComponent(D)+"="+encodeURIComponent(M))}):T.push(encodeURIComponent(D)+"="+encodeURIComponent(z));return T.length?"&"+T.join("&"):""}function pi(C){const T={};return C.replace(/^\?/,"").split("&").forEach(z=>{if(z){const[M,W]=z.split("=");T[decodeURIComponent(M)]=decodeURIComponent(W)}}),T}function du(C){const T=C.indexOf("?");if(!T)return"";const D=C.indexOf("#",T);return C.substring(T,D>0?D:void 0)}function es(C,T){const D=new ys(C,T);return D.subscribe.bind(D)}class ys{constructor(T,D){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=D,this.task.then(()=>{T(this)}).catch(z=>{this.error(z)})}next(T){this.forEachObserver(D=>{D.next(T)})}error(T){this.forEachObserver(D=>{D.error(T)}),this.close(T)}complete(){this.forEachObserver(T=>{T.complete()}),this.close()}subscribe(T,D,z){let M;if(void 0===T&&void 0===D&&void 0===z)throw new Error("Missing Observer.");M=function io(C,T){if("object"!=typeof C||null===C)return!1;for(const D of T)if(D in C&&"function"==typeof C[D])return!0;return!1}(T,["next","error","complete"])?T:{next:T,error:D,complete:z},void 0===M.next&&(M.next=Lt),void 0===M.error&&(M.error=Lt),void 0===M.complete&&(M.complete=Lt);const W=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),W}unsubscribeOne(T){void 0===this.observers||void 0===this.observers[T]||(delete this.observers[T],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(T){if(!this.finalized)for(let D=0;D<this.observers.length;D++)this.sendOne(D,T)}sendOne(T,D){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[T])try{D(this.observers[T])}catch(z){typeof console<"u"&&console.error&&console.error(z)}})}close(T){this.finalized||(this.finalized=!0,void 0!==T&&(this.finalError=T),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lt(){}function ta(C){return C&&C._delegate?C._delegate:C}},919:(Ji,xn,$e)=>{function I(t){return"function"==typeof t}function ke(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const j=ke(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ve(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class dt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(I(r))try{r()}catch(s){e=s instanceof j?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{kn(s)}catch(o){e=e??[],o instanceof j?e=[...e,...o.errors]:e.push(o)}}if(e)throw new j(e)}}add(e){var n;if(e&&e!==this)if(this.closed)kn(e);else{if(e instanceof dt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ve(n,e)}remove(e){const{_finalizers:n}=this;n&&Ve(n,e),e instanceof dt&&e._removeParent(this)}}dt.EMPTY=(()=>{const t=new dt;return t.closed=!0,t})();const Ht=dt.EMPTY;function Jt(t){return t instanceof dt||t&&"closed"in t&&I(t.remove)&&I(t.add)&&I(t.unsubscribe)}function kn(t){I(t)?t():t.unsubscribe()}const et={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},K={setTimeout(t,e,...n){const{delegate:r}=K;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=K;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function re(t){K.setTimeout(()=>{const{onUnhandledError:e}=et;if(!e)throw t;e(t)})}function Te(){}const Je=mt("C",void 0,void 0);function mt(t,e,n){return{kind:t,value:e,error:n}}let Ue=null;function ze(t){if(et.useDeprecatedSynchronousErrorHandling){const e=!Ue;if(e&&(Ue={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Ue;if(Ue=null,n)throw r}}else t()}class Ln extends dt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Jt(e)&&e.add(this)):this.destination=Gt}static create(e,n,r){return new vr(e,n,r)}next(e){this.isStopped?Z(function On(t){return mt("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Z(function ht(t){return mt("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Z(Je,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ot=Function.prototype.bind;function _t(t,e){return Ot.call(t,e)}class Rt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){We(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){We(r)}else We(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){We(n)}}}class vr extends Ln{constructor(e,n,r){let i;if(super(),I(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&et.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&_t(e.next,s),error:e.error&&_t(e.error,s),complete:e.complete&&_t(e.complete,s)}):i=e}this.destination=new Rt(i)}}function We(t){et.useDeprecatedSynchronousErrorHandling?function Vn(t){et.useDeprecatedSynchronousErrorHandling&&Ue&&(Ue.errorThrown=!0,Ue.error=t)}(t):re(t)}function Z(t,e){const{onStoppedNotification:n}=et;n&&K.setTimeout(()=>n(t,e))}const Gt={closed:!0,next:Te,error:function An(t){throw t},complete:Te},Vt="function"==typeof Symbol&&Symbol.observable||"@@observable";function mn(t){return t}function Si(t){return 0===t.length?mn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let at=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function V(t){return t&&t instanceof Ln||function Ri(t){return t&&I(t.next)&&I(t.error)&&I(t.complete)}(t)&&Jt(t)}(n)?n:new vr(n,r,i);return ze(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=ro(r))((i,s)=>{const o=new vr({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Vt](){return this}pipe(...n){return Si(n)(this)}toPromise(n){return new(n=ro(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function ro(t){var e;return null!==(e=t??et.Promise)&&void 0!==e?e:Promise}const F=ke(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let H=(()=>{class t extends at{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new G(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new F}next(n){ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ze(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Ht:(this.currentObservers=null,s.push(n),new dt(()=>{this.currentObservers=null,Ve(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new at;return n.source=this,n}}return t.create=(e,n)=>new G(e,n),t})();class G extends H{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Ht}}function Q(t){return I(t?.lift)}function B(t){return e=>{if(Q(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(t,e,n,r,i){return new st(t,e,n,r,i)}class st extends Ln{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function De(t,e){return B((n,r)=>{let i=0;n.subscribe(pe(r,s=>{r.next(t.call(e,s,i++))}))})}var Ae=$e(582);const ct=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function qt(t){return I(t?.then)}function Mt(t){return I(t[Vt])}function Qn(t){return Symbol.asyncIterator&&I(t?.[Symbol.asyncIterator])}function Cn(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ir=function or(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Or(t){return I(t?.[Ir])}function cu(t){return(0,Ae.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,Ae.qq)(n.read());if(i)return yield(0,Ae.qq)(void 0);yield yield(0,Ae.qq)(r)}}finally{n.releaseLock()}})}function Xi(t){return I(t?.getReader)}function _n(t){if(t instanceof at)return t;if(null!=t){if(Mt(t))return function Qo(t){return new at(e=>{const n=t[Vt]();if(I(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(ct(t))return function lu(t){return new at(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(qt(t))return function pi(t){return new at(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,re)})}(t);if(Qn(t))return Er(t);if(Or(t))return function du(t){return new at(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Xi(t))return function es(t){return Er(cu(t))}(t)}throw Cn(t)}function Er(t){return new at(e=>{(function ys(t,e){var n,r,i,s;return(0,Ae.mG)(this,void 0,void 0,function*(){try{for(n=(0,Ae.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Yn(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Lt(t,e,n=1/0){return I(e)?Lt((r,i)=>De((s,o)=>e(r,s,i,o))(_n(t(r,i))),n):("number"==typeof e&&(n=e),B((r,i)=>function io(t,e,n,r,i,s,o,a){const u=[];let d=0,f=0,g=!1;const _=()=>{g&&!u.length&&!d&&e.complete()},y=A=>d<r?E(A):u.push(A),E=A=>{s&&e.next(A),d++;let S=!1;_n(n(A,f++)).subscribe(pe(e,O=>{i?.(O),s?y(O):e.next(O)},()=>{S=!0},void 0,()=>{if(S)try{for(d--;u.length&&d<r;){const O=u.shift();o?Yn(e,o,()=>E(O)):E(O)}_()}catch(O){e.error(O)}}))};return t.subscribe(pe(e,y,()=>{g=!0,_()})),()=>{a?.()}}(r,i,t,n)))}function gi(t=1/0){return Lt(mn,t)}const Dn=new at(t=>t.complete());function vs(t){return t[t.length-1]}function Jo(t){return I(vs(t))?t.pop():void 0}function Is(t){return function ni(t){return t&&I(t.schedule)}(vs(t))?t.pop():void 0}function ar(t,e=0){return B((n,r)=>{n.subscribe(pe(r,i=>Yn(r,t,()=>r.next(i),e),()=>Yn(r,t,()=>r.complete(),e),i=>Yn(r,t,()=>r.error(i),e)))})}function wr(t,e=0){return B((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function ta(t,e){if(!t)throw new Error("Iterable cannot be null");return new at(n=>{Yn(n,e,()=>{const r=t[Symbol.asyncIterator]();Yn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function D(t,e){return e?function T(t,e){if(null!=t){if(Mt(t))return function Es(t,e){return _n(t).pipe(wr(e),ar(e))}(t,e);if(ct(t))return function Gc(t,e){return new at(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(qt(t))return function ea(t,e){return _n(t).pipe(wr(e),ar(e))}(t,e);if(Qn(t))return ta(t,e);if(Or(t))return function hu(t,e){return new at(n=>{let r;return Yn(n,e,()=>{r=t[Ir](),Yn(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>I(r?.return)&&r.return()})}(t,e);if(Xi(t))return function C(t,e){return ta(cu(t),e)}(t,e)}throw Cn(t)}(t,e):_n(t)}function z(...t){const e=Is(t),n=function Xo(t,e){return"number"==typeof vs(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?_n(r[0]):gi(n)(D(r,e)):Dn}class M extends H{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function W(...t){return D(t,Is(t))}function Le(t={}){const{connector:e=(()=>new H),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,d=0,f=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},y=()=>{_(),o=u=void 0,f=g=!1},E=()=>{const A=o;y(),A?.unsubscribe()};return B((A,S)=>{d++,!g&&!f&&_();const O=u=u??e();S.add(()=>{d--,0===d&&!g&&!f&&(a=Ze(E,i))}),O.subscribe(S),!o&&d>0&&(o=new vr({next:R=>O.next(R),error:R=>{g=!0,_(),a=Ze(y,n,R),O.error(R)},complete:()=>{f=!0,_(),a=Ze(y,r),O.complete()}}),_n(A).subscribe(o))})(s)}}function Ze(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new vr({next:()=>{r.unsubscribe(),t()}});return _n(e(...n)).subscribe(r)}function yt(t,e){return B((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(pe(r,u=>{i?.unsubscribe();let d=0;const f=s++;_n(t(u,f)).subscribe(i=pe(r,g=>r.next(e?e(u,g,f,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function zt(t,e=mn){return t=t??bn,B((n,r)=>{let i,s=!0;n.subscribe(pe(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function bn(t,e){return t===e}function ve(t){for(let e in t)if(t[e]===ve)return e;throw Error("Could not find renamed property on target object.")}function Fn(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function At(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(At).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Pi(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const qc=ve({__forward_ref__:ve});function k(t){return t.__forward_ref__=k,t.toString=function(){return At(this())},t}function b(t){return ee(t)?t():t}function ee(t){return"function"==typeof t&&t.hasOwnProperty(qc)&&t.__forward_ref__===k}function Ie(t){return t&&!!t.\u0275providers}const tt="https://g.co/ng/security#xss";class $ extends Error{constructor(e,n){super(function Xt(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Ee(t){return"string"==typeof t?t:null==t?"":String(t)}function fu(t,e){throw new $(-201,!1)}function Tr(t,e){null==t&&function Ne(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Pe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ur(t){return{providers:t.providers||[],imports:t.imports||[]}}function pu(t){return wh(t,gu)||wh(t,dm)}function wh(t,e){return t.hasOwnProperty(e)?t[e]:null}function ts(t){return t&&(t.hasOwnProperty(mu)||t.hasOwnProperty(Th))?t[mu]:null}const gu=ve({\u0275prov:ve}),mu=ve({\u0275inj:ve}),dm=ve({ngInjectableDef:ve}),Th=ve({ngInjectorDef:ve});var nt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(nt||{});let _u;function Jn(t){const e=_u;return _u=t,e}function fm(t,e,n){const r=pu(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&nt.Optional?null:void 0!==e?e:void fu(At(t))}const vt=globalThis;class le{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Pe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Lr={},Eu="__NG_DI_FLAG__",Wc="ngTempTokenPath",pE=/\n/gm,vm="__source";let Ts;function Mi(t){const e=Ts;return Ts=t,e}function mE(t,e=nt.Default){if(void 0===Ts)throw new $(-203,!1);return null===Ts?fm(t,void 0,e):Ts.get(t,e&nt.Optional?null:void 0,e)}function ie(t,e=nt.Default){return(function hm(){return _u}()||mE)(b(t),e)}function ge(t,e=nt.Default){return ie(t,Kc(e))}function Kc(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Dh(t){const e=[];for(let n=0;n<t.length;n++){const r=b(t[n]);if(Array.isArray(r)){if(0===r.length)throw new $(900,!1);let i,s=nt.Default;for(let o=0;o<r.length;o++){const a=r[o],u=yP(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(ie(i,s))}else e.push(ie(r))}return e}function ns(t,e){return t[Eu]=e,t.prototype[Eu]=e,t}function yP(t){return t[Eu]}function Ar(t){return{toString:t}.toString()}var is=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(is||{}),ri=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ri||{});const mi={},lt=[],Qc=ve({\u0275cmp:ve}),As=ve({\u0275dir:ve}),Sh=ve({\u0275pipe:ve}),wu=ve({\u0275mod:ve}),xi=ve({\u0275fac:ve}),ra=ve({__NG_ELEMENT_ID__:ve}),Yc=ve({__NG_ENV_ID__:ve});function Fr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Jc(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];Xc(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Im(t){return 3===t||4===t||6===t}function Xc(t){return 64===t.charCodeAt(0)}function Cs(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Rh(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Rh(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const Ph="ng-template";function _E(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==Fr(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function el(t){return 4===t.type&&t.value!==Ph}function Nh(t,e,n){return e===(4!==t.type||n?t.value:Ph)}function Mh(t,e,n){let r=4;const i=t.attrs||[],s=function Em(t){for(let e=0;e<t.length;e++)if(Im(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Nh(t,u,n)||""===u&&1===e.length){if(Cr(r))return!1;o=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!_E(t.attrs,d,n)){if(Cr(r))return!1;o=!0}continue}const g=xh(8&r?"class":u,i,el(t),n);if(-1===g){if(Cr(r))return!1;o=!0;continue}if(""!==d){let _;_=g>s?"":i[g+1].toLowerCase();const y=8&r?_:null;if(y&&-1!==Fr(y,d,0)||2&r&&d!==_){if(Cr(r))return!1;o=!0}}}}else{if(!o&&!Cr(r)&&!Cr(u))return!1;if(o&&Cr(u))continue;o=!1,r=u|1&r}}return Cr(r)||o}function Cr(t){return 0==(1&t)}function xh(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Vh(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function kh(t,e,n=!1){for(let r=0;r<e.length;r++)if(Mh(t,e[r],n))return!0;return!1}function nl(t,e){return t?":not("+e.trim()+")":e}function wm(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Cr(o)&&(e+=nl(s,i),i=""),r=o,s=s||!Cr(r);n++}return""!==i&&(e+=nl(s,i)),e}function Un(t){return Ar(()=>{const e=il(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===is.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ri.Emulated,styles:t.styles||lt,_:null,schemas:t.schemas||null,tView:null,id:""};Am(n);const r=t.dependencies;return n.directiveDefs=ia(r,!1),n.pipeDefs=ia(r,!0),n.id=function Uh(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function Fh(t){return rt(t)||yn(t)}function vE(t){return null!==t}function cr(t){return Ar(()=>({type:t.type,bootstrap:t.bootstrap||lt,declarations:t.declarations||lt,imports:t.imports||lt,exports:t.exports||lt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function rl(t,e){if(null==t)return mi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function xe(t){return Ar(()=>{const e=il(t);return Am(e),e})}function Bn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function rt(t){return t[Qc]||null}function yn(t){return t[As]||null}function lr(t){return t[Sh]||null}function Ur(t,e){const n=t[wu]||null;if(!n&&!0===e)throw new Error(`Type ${At(t)} does not have '\u0275mod' property.`);return n}function il(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||mi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||lt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:rl(t.inputs,e),outputs:rl(t.outputs)}}function Am(t){t.features?.forEach(e=>e(t))}function ia(t,e){if(!t)return null;const n=e?lr:Fh;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(vE)}const en=0,de=1,He=2,Pt=3,_i=4,Au=5,Sn=6,sa=7,on=8,ki=9,oa=10,Fe=11,Cu=12,sl=13,aa=14,Wt=15,Du=16,bs=17,Oi=18,so=19,Dm=20,Vi=21,ss=22,bu=23,ua=24,Ye=25,Ss=1,Bh=2,Li=7,ca=9,jn=11;function Br(t){return Array.isArray(t)&&"object"==typeof t[Ss]}function Dr(t){return Array.isArray(t)&&!0===t[Ss]}function Ru(t){return 0!=(4&t.flags)}function oo(t){return t.componentOffset>-1}function al(t){return 1==(1&t.flags)}function Fi(t){return!!t.template}function bm(t){return 0!=(512&t[He])}function Ui(t,e){return t.hasOwnProperty(xi)?t[xi]:null}let $n=null,Rs=!1;function ii(t){const e=$n;return $n=t,e}const an={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ul(t){if(!Ns(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Om(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function km(t){t.dirty=!0,function xm(t){if(void 0===t.liveConsumerNode)return;const e=Rs;Rs=!0;try{for(const n of t.liveConsumerNode)n.dirty||km(n)}finally{Rs=e}}(t),t.consumerMarkedDirty?.(t)}function Gh(t){return t&&(t.nextProducerIndex=0),ii(t)}function cl(t,e){if(ii(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Ns(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ps(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Om(t){da(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(ul(n),r!==n.version))return!0}return!1}function Nu(t){if(da(t),Ns(t))for(let e=0;e<t.producerNode.length;e++)Ps(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Ps(t,e){if(function ll(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),da(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)Ps(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];da(i),i.producerIndexOfThis[r]=e}}function Ns(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function da(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Fm=null;function dl(t){const e=ii(null);try{return t()}finally{ii(e)}}const jm=()=>{},DE=(()=>({...an,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:jm}))();class bE{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function jr(){return $m}function $m(t){return t.type.prototype.ngOnChanges&&(t.setInput=RE),SE}function SE(){const t=Hm(this),e=t?.current;if(e){const n=t.previous;if(n===mi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function RE(t,e,n,r){const i=this.declaredInputs[n],s=Hm(t)||function Zh(t,e){return t[hl]=e}(t,{previous:mi,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new bE(u&&u.currentValue,e,a===mi),t[r]=e}jr.ngInherit=!0;const hl="__ngSimpleChanges__";function Hm(t){return t[hl]||null}const Bi=function(t,e,n){};function wt(t){for(;Array.isArray(t);)t=t[en];return t}function fa(t,e){return wt(e[t])}function Rn(t,e){return wt(e[t.index])}function pl(t,e){return t.data[e]}function $r(t,e){const n=e[t];return Br(n)?n:n[en]}function Ms(t,e){return null==e?null:t[e]}function qm(t){t[bs]=0}function Xh(t){1024&t[He]||(t[He]|=1024,gl(t,1))}function zm(t){1024&t[He]&&(t[He]&=-1025,gl(t,-1))}function gl(t,e){let n=t[Pt];if(null===n)return;n[Au]+=e;let r=n;for(n=n[Pt];null!==n&&(1===e&&1===r[Au]||-1===e&&0===r[Au]);)n[Au]+=e,r=n,n=n[Pt]}const Me={lFrame:Xm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function _l(){return Me.bindingsEnabled}function Y(){return Me.lFrame.lView}function it(){return Me.lFrame.tView}function vn(){let t=Ym();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ym(){return Me.lFrame.currentTNode}function si(t,e){const n=Me.lFrame;n.currentTNode=t,n.isParent=e}function rf(){return Me.lFrame.isParent}function lo(){return Me.lFrame.bindingIndex++}function cf(t,e){const n=Me.lFrame;n.bindingIndex=n.bindingRootIndex=t,lf(e)}function lf(t){Me.lFrame.currentDirectiveIndex=t}function vl(){return Me.lFrame.currentQueryIndex}function hf(t){Me.lFrame.currentQueryIndex=t}function UE(t){const e=t[de];return 2===e.type?e.declTNode:1===e.type?t[Sn]:null}function ff(t,e,n){if(n&nt.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&nt.Host||(i=UE(s),null===i||(s=s[aa],10&i.type))););if(null===i)return!1;e=i,t=s}const r=Me.lFrame=Vu();return r.currentTNode=e,r.lView=t,!0}function pf(t){const e=Vu(),n=t[de];Me.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Vu(){const t=Me.lFrame,e=null===t?null:t.child;return null===e?Xm(t):e}function Xm(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function e_(){const t=Me.lFrame;return Me.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const t_=e_;function gf(){const t=e_();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function dr(){return Me.lFrame.selectedIndex}function ho(t){Me.lFrame.selectedIndex=t}function xt(){const t=Me.lFrame;return pl(t.tView,t.selectedIndex)}let mf=!0;function Il(){return mf}function ks(t){mf=t}function El(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),null!=f&&(t.destroyHooks??=[]).push(n,f)}}function wl(t,e,n){r_(t,e,3,n)}function ga(t,e,n,r){(3&t[He])===n&&r_(t,e,n,r)}function Lu(t,e){let n=t[He];(3&n)===e&&(n&=8191,n+=1,t[He]=n)}function r_(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[bs]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[bs]+=65536),(a<s||-1==s)&&(WE(t,n,e,u),t[bs]=(4294901760&t[bs])+u+2),u++}function Tl(t,e){Bi(4,t,e);const n=ii(null);try{e.call(t)}finally{ii(n),Bi(5,t,e)}}function WE(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[He]>>13<t[bs]>>16&&(3&t[He])===e&&(t[He]+=8192,Tl(a,s)):Tl(a,s)}const fo=-1;class Fu{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function yf(t){return t!==fo}function Uu(t){return 32767&t}function Bu(t,e){let n=function QE(t){return t>>16}(t),r=e;for(;n>0;)r=r[aa],n--;return r}let vf=!0;function ju(t){const e=vf;return vf=t,e}const YE=255,Os=5;let JE=0;const $i={};function Cl(t,e){const n=a_(t,e);if(-1!==n)return n;const r=e[de];r.firstCreatePass&&(t.injectorIndex=e.length,$u(r.data,t),$u(e,null),$u(r.blueprint,null));const i=Dl(t,e),s=t.injectorIndex;if(yf(i)){const o=Uu(i),a=Bu(i,e),u=a[de].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|u[o+d]}return e[s+8]=i,s}function $u(t,e){t.push(0,0,0,0,0,0,0,0,e)}function a_(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Dl(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=f_(i),null===r)return fo;if(n++,i=i[aa],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return fo}function Hu(t,e,n){!function If(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ra)&&(r=n[ra]),null==r&&(r=n[ra]=JE++);const i=r&YE;e.data[t+(i>>Os)]|=1<<i}(t,e,n)}function u_(t,e,n){if(n&nt.Optional||void 0!==t)return t;fu()}function bl(t,e,n,r){if(n&nt.Optional&&void 0===r&&(r=null),!(n&(nt.Self|nt.Host))){const i=t[ki],s=Jn(void 0);try{return i?i.get(e,r,n&nt.Optional):fm(e,r,n&nt.Optional)}finally{Jn(s)}}return u_(r,0,n)}function c_(t,e,n,r=nt.Default,i){if(null!==t){if(2048&e[He]&&!(r&nt.Self)){const o=function nw(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[He]&&!(512&o[He]);){const a=l_(s,o,n,r|nt.Self,$i);if(a!==$i)return a;let u=s.parent;if(!u){const d=o[Dm];if(d){const f=d.get(n,$i,r);if(f!==$i)return f}u=f_(o),o=o[aa]}s=u}return i}(t,e,n,r,$i);if(o!==$i)return o}const s=l_(t,e,n,r,$i);if(s!==$i)return s}return bl(e,n,r,i)}function l_(t,e,n,r,i){const s=function d_(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(ra)?t[ra]:void 0;return"number"==typeof e?e>=0?e&YE:tw:e}(n);if("function"==typeof s){if(!ff(e,t,r))return r&nt.Host?u_(i,0,r):bl(e,n,r,i);try{let o;if(o=s(r),null!=o||r&nt.Optional)return o;fu()}finally{t_()}}else if("number"==typeof s){let o=null,a=a_(t,e),u=fo,d=r&nt.Host?e[Wt][Sn]:null;for((-1===a||r&nt.SkipSelf)&&(u=-1===a?Dl(t,e):e[a+8],u!==fo&&h_(r,!1)?(o=e[de],a=Uu(u),e=Bu(u,e)):a=-1);-1!==a;){const f=e[de];if(Rl(s,a,f.data)){const g=ew(a,e,n,o,r,d);if(g!==$i)return g}u=e[a+8],u!==fo&&h_(r,e[de].data[a+8]===d)&&Rl(s,a,e)?(o=f,a=Uu(u),e=Bu(u,e)):a=-1}}return i}function ew(t,e,n,r,i,s){const o=e[de],a=o.data[t+8],f=Sl(a,o,n,null==r?oo(a)&&vf:r!=o&&0!=(3&a.type),i&nt.Host&&s===a);return null!==f?po(e,o,f,a):$i}function Sl(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,f=s>>20,_=i?a+f:t.directiveEnd;for(let y=r?a:a+f;y<_;y++){const E=o[y];if(y<u&&n===E||y>=u&&E.type===n)return y}if(i){const y=o[u];if(y&&Fi(y)&&y.type===n)return u}return null}function po(t,e,n,r){let i=t[n];const s=e.data;if(function _f(t){return t instanceof Fu}(i)){const o=i;o.resolving&&function na(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new $(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Xe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ee(t)}(s[n]));const a=ju(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?Jn(o.injectImpl):null;ff(t,r,nt.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function zE(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=$m(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==d&&Jn(d),ju(a),o.resolving=!1,t_()}}return i}function Rl(t,e,n){return!!(n[e+(t>>Os)]&1<<t)}function h_(t,e){return!(t&nt.Self||t&nt.Host&&e)}class Gn{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return c_(this._tNode,this._lView,e,Kc(r),n)}}function tw(){return new Gn(vn(),Y())}function qn(t){return Ar(()=>{const e=t.prototype.constructor,n=e[xi]||ma(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[xi]||ma(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function ma(t){return ee(t)?()=>{const e=ma(b(t));return e&&e()}:Ui(t)}function f_(t){const e=t[de],n=e.type;return 2===n?e.declTNode:1===n?t[Sn]:null}const _a="__parameters__";function Hi(t,e,n){return Ar(()=>{const r=function wf(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,f){const g=u.hasOwnProperty(_a)?u[_a]:Object.defineProperty(u,_a,{value:[]})[_a];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function va(t,e){t.forEach(n=>Array.isArray(n)?va(n,e):e(n))}function Nl(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ia(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Gr(t,e,n){let r=Ea(t,e);return r>=0?t[1|r]=n:(r=~r,function Ls(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Tf(t,e){const n=Ea(t,e);if(n>=0)return t[1|n]}function Ea(t,e){return function hr(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const Zu=ns(Hi("Optional"),8),kl=ns(Hi("SkipSelf"),4);function D_(t){return 128==(128&t.flags)}var Ta=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ta||{});const pw=new Map;let YH=0;const mw="__ngContext__";function br(t,e){Br(e)?(t[mw]=e[so],function XH(t){pw.set(t[so],t)}(e)):t[mw]=e}let _w;function yw(t,e){return _w(t,e)}function Pf(t){const e=t[Pt];return Dr(e)?e[Pt]:e}function sN(t){return aN(t[Cu])}function oN(t){return aN(t[_i])}function aN(t){for(;null!==t&&!Dr(t);)t=t[_i];return t}function Fl(t,e,n,r,i){if(null!=r){let s,o=!1;Dr(r)?s=r:Br(r)&&(o=!0,r=r[en]);const a=wt(r);0===t&&null!==n?null==i?dN(e,n,a):Qu(e,n,a,i||null,!0):1===t&&null!==n?Qu(e,n,a,i||null,!0):2===t?function x_(t,e,n){const r=N_(t,e);r&&function yG(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function EG(t,e,n,r,i){const s=n[Li];s!==wt(n)&&Fl(e,t,r,s,i);for(let a=jn;a<n.length;a++){const u=n[a];Mf(u[de],u,t,e,r,s)}}(e,t,s,n,i)}}function R_(t,e,n){return t.createElement(e,n)}function cN(t,e){const n=t[ca],r=n.indexOf(e);zm(e),n.splice(r,1)}function P_(t,e){if(t.length<=jn)return;const n=jn+e,r=t[n];if(r){const i=r[Du];null!==i&&i!==t&&cN(i,r),e>0&&(t[n-1][_i]=r[_i]);const s=Ia(t,jn+e);!function lG(t,e){Mf(t,e,e[Fe],2,null,null),e[en]=null,e[Sn]=null}(r[de],r);const o=s[Oi];null!==o&&o.detachView(s[de]),r[Pt]=null,r[_i]=null,r[He]&=-129}return r}function Iw(t,e){if(!(256&e[He])){const n=e[Fe];e[bu]&&Nu(e[bu]),e[ua]&&Nu(e[ua]),n.destroyNode&&Mf(t,e,n,3,null,null),function fG(t){let e=t[Cu];if(!e)return Ew(t[de],t);for(;e;){let n=null;if(Br(e))n=e[Cu];else{const r=e[jn];r&&(n=r)}if(!n){for(;e&&!e[_i]&&e!==t;)Br(e)&&Ew(e[de],e),e=e[Pt];null===e&&(e=t),Br(e)&&Ew(e[de],e),n=e&&e[_i]}e=n}}(e)}}function Ew(t,e){if(!(256&e[He])){e[He]&=-129,e[He]|=256,function _G(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Fu)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];Bi(4,a,u);try{u.call(a)}finally{Bi(5,a,u)}}else{Bi(4,i,s);try{s.call(i)}finally{Bi(5,i,s)}}}}}(t,e),function mG(t,e){const n=t.cleanup,r=e[sa];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[sa]=null);const i=e[Vi];if(null!==i){e[Vi]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[de].type&&e[Fe].destroy();const n=e[Du];if(null!==n&&Dr(e[Pt])){n!==e[Pt]&&cN(n,e);const r=e[Oi];null!==r&&r.detachView(t)}!function eG(t){pw.delete(t[so])}(e)}}function ww(t,e,n){return function lN(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[en];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===ri.None||s===ri.Emulated)return null}return Rn(r,n)}}(t,e.parent,n)}function Qu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function dN(t,e,n){t.appendChild(e,n)}function hN(t,e,n,r,i){null!==r?Qu(t,e,n,r,i):dN(t,e,n)}function N_(t,e){return t.parentNode(e)}let Tw,bw,O_,gN=function pN(t,e,n){return 40&t.type?Rn(t,n):null};function M_(t,e,n,r){const i=ww(t,r,e),s=e[Fe],a=function fN(t,e,n){return gN(t,e,n)}(r.parent||e[Sn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)hN(s,i,n[u],a,!1);else hN(s,i,n,a,!1);void 0!==Tw&&Tw(s,r,e,n,i)}function Nf(t,e){if(null!==e){const n=e.type;if(3&n)return Rn(e,t);if(4&n)return Aw(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Nf(t,r);{const i=t[e.index];return Dr(i)?Aw(-1,i):wt(i)}}if(32&n)return yw(e,t)()||wt(t[e.index]);{const r=_N(t,e);return null!==r?Array.isArray(r)?r[0]:Nf(Pf(t[Wt]),r):Nf(t,e.next)}}return null}function _N(t,e){return null!==e?t[Wt][Sn].projection[e.projection]:null}function Aw(t,e){const n=jn+t+1;if(n<e.length){const r=e[n],i=r[de].firstChild;if(null!==i)return Nf(r,i)}return e[Li]}function Cw(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&br(wt(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)Cw(t,e,n.child,r,i,s,!1),Fl(e,t,i,a,s);else if(32&u){const d=yw(n,r);let f;for(;f=d();)Fl(e,t,i,f,s);Fl(e,t,i,a,s)}else 16&u?vN(t,e,r,n,i,s):Fl(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Mf(t,e,n,r,i,s){Cw(n,r,t.firstChild,e,i,s,!1)}function vN(t,e,n,r,i,s){const o=n[Wt],u=o[Sn].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)Fl(e,t,i,u[d],s);else{let d=u;const f=o[Pt];D_(r)&&(d.flags|=128),Cw(t,e,d,f,i,s,!0)}}function IN(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function EN(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Jc(t,e,r),null!==i&&IN(t,e,i),null!==s&&function TG(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}function AN(t){return function Sw(){if(void 0===O_&&(O_=null,vt.trustedTypes))try{O_=vt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return O_}()?.createScriptURL(t)||t}class CN{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tt})`}}function Aa(t){return t instanceof CN?t.changingThisBreaksApplicationSecurity:t}function xf(t,e){const n=function xG(t){return t instanceof CN&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${tt})`)}return n===e}const LG=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var jl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(jl||{});function MN(t){const e=Of();return e?e.sanitize(jl.URL,t)||"":xf(t,"URL")?Aa(t):function Rw(t){return(t=String(t)).match(LG)?t:"unsafe:"+t}(Ee(t))}function xN(t){const e=Of();if(e)return AN(e.sanitize(jl.RESOURCE_URL,t)||"");if(xf(t,"ResourceURL"))return AN(Aa(t));throw new $(904,!1)}function Of(){const t=Y();return t&&t[oa].sanitizer}const Vf=new le("ENVIRONMENT_INITIALIZER"),ON=new le("INJECTOR",-1),VN=new le("INJECTOR_DEF_TYPES");class xw{get(e,n=Lr){if(n===Lr){const r=new Error(`NullInjectorError: No provider for ${At(e)}!`);throw r.name="NullInjectorError",r}return n}}function QG(...t){return{\u0275providers:FN(0,t),\u0275fromNgModule:!0}}function FN(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return va(e,o=>{const a=o;L_(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&UN(i,s),n}function UN(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];kw(i,s=>{e(s,r)})}}function L_(t,e,n,r){if(!(t=b(t)))return!1;let i=null,s=ts(t);const o=!s&&rt(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=ts(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)L_(d,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{va(s.imports,f=>{L_(f,e,n,r)&&(d||=[],d.push(f))})}finally{}void 0!==d&&UN(d,e)}if(!a){const d=Ui(i)||(()=>new i);e({provide:i,useFactory:d,deps:lt},i),e({provide:VN,useValue:i,multi:!0},i),e({provide:Vf,useValue:()=>ie(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const d=t;kw(u,f=>{e(f,d)})}}}return i!==t&&void 0!==t.providers}function kw(t,e){for(let n of t)Ie(n)&&(n=n.\u0275providers),Array.isArray(n)?kw(n,e):e(n)}const YG=ve({provide:String,useValue:ve});function Ow(t){return null!==t&&"object"==typeof t&&YG in t}function Yu(t){return"function"==typeof t}const Vw=new le("Set Injector scope."),F_={},XG={};let Lw;function U_(){return void 0===Lw&&(Lw=new xw),Lw}class Gi{}class $l extends Gi{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Uw(e,o=>this.processProvider(o)),this.records.set(ON,Hl(void 0,this)),i.has("environment")&&this.records.set(Gi,Hl(void 0,this));const s=this.records.get(Vw);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(VN.multi,lt,nt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Mi(this),r=Jn(void 0);try{return e()}finally{Mi(n),Jn(r)}}get(e,n=Lr,r=nt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Yc))return e[Yc](this);r=Kc(r);const s=Mi(this),o=Jn(void 0);try{if(!(r&nt.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function i4(t){return"function"==typeof t||"object"==typeof t&&t instanceof le}(e)&&pu(e);u=d&&this.injectableDefInScope(d)?Hl(Fw(e),F_):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&nt.Self?U_():this.parent).get(e,n=r&nt.Optional&&n===Lr?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Wc]=a[Wc]||[]).unshift(At(e)),s)throw a;return function bh(t,e,n,r){const i=t[Wc];throw e[vm]&&i.unshift(e[vm]),t.message=function rs(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=At(e);if(Array.isArray(e))i=e.map(At).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):At(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(pE,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Wc]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Jn(o),Mi(s)}}resolveInjectorInitializers(){const e=Mi(this),n=Jn(void 0);try{const i=this.get(Vf.multi,lt,nt.Self);for(const s of i)s()}finally{Mi(e),Jn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(At(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(e){let n=Yu(e=b(e))?e:b(e&&e.provide);const r=function t4(t){return Ow(t)?Hl(void 0,t.useValue):Hl($N(t),F_)}(e);if(Yu(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Hl(void 0,F_,!0),i.factory=()=>Dh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===F_&&(n.value=XG,n.value=n.factory()),"object"==typeof n.value&&n.value&&function r4(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=b(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Fw(t){const e=pu(t),n=null!==e?e.factory:Ui(t);if(null!==n)return n;if(t instanceof le)throw new $(204,!1);if(t instanceof Function)return function e4(t){const e=t.length;if(e>0)throw function zu(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new $(204,!1);const n=function hE(t){return t&&(t[gu]||t[dm])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new $(204,!1)}function $N(t,e,n){let r;if(Yu(t)){const i=b(t);return Ui(i)||Fw(i)}if(Ow(t))r=()=>b(t.useValue);else if(function jN(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Dh(t.deps||[]));else if(function BN(t){return!(!t||!t.useExisting)}(t))r=()=>ie(b(t.useExisting));else{const i=b(t&&(t.useClass||t.provide));if(!function n4(t){return!!t.deps}(t))return Ui(i)||Fw(i);r=()=>new i(...Dh(t.deps))}return r}function Hl(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Uw(t,e){for(const n of t)Array.isArray(n)?Uw(n,e):n&&Ie(n)?Uw(n.\u0275providers,e):e(n)}const B_=new le("AppId",{providedIn:"root",factory:()=>s4}),s4="ng",HN=new le("Platform Initializer"),_o=new le("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),GN=new le("CSP nonce",{providedIn:"root",factory:()=>function Bl(){if(void 0!==bw)return bw;if(typeof document<"u")return document;throw new $(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let qN=(t,e,n)=>null;function Ww(t,e,n=!1){return qN(t,e,n)}class g4{}class ZN{}class _4{resolveComponentFactory(e){throw function m4(t){const e=Error(`No component factory found for ${At(t)}.`);return e.ngComponent=t,e}(e)}}let z_=(()=>{class t{static#e=this.NULL=new _4}return t})();function y4(){return zl(vn(),Y())}function zl(t,e){return new vi(Rn(t,e))}let vi=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=y4}return t})();function v4(t){return t instanceof vi?t.nativeElement:t}class QN{}let yo=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function I4(){const t=Y(),n=$r(vn().index,t);return(Br(n)?n:t)[Fe]}()}return t})(),E4=(()=>{class t{static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>null})}return t})();class Wl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const YN=new Wl("16.2.12"),Qw={};function tM(t,e=null,n=null,r){const i=nM(t,e,n,r);return i.resolveInjectorInitializers(),i}function nM(t,e=null,n=null,r,i=new Set){const s=[n||lt,QG(t)];return r=r||("object"==typeof t?void 0:At(t)),new $l(s,e||U_(),r||null,i)}let Ii=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Lr;static#t=this.NULL=new xw;static create(n,r){if(Array.isArray(n))return tM({name:""},r,n,"");{const i=n.name??"";return tM({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Pe({token:t,providedIn:"any",factory:()=>ie(ON)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function Jw(t){return t.ngOriginalError}class vo{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Jw(e);for(;n&&Jw(n);)n=Jw(n);return n||null}}function eT(t){return e=>{setTimeout(t,void 0,e)}}const ln=class S4 extends H{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=eT(s),i&&(i=eT(i)),o&&(o=eT(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof dt&&e.add(a),a}};function iM(...t){}class Tt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ln(!1),this.onMicrotaskEmpty=new ln(!1),this.onStable=new ln(!1),this.onError=new ln(!1),typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function R4(){const t="function"==typeof vt.requestAnimationFrame;let e=vt[t?"requestAnimationFrame":"setTimeout"],n=vt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function M4(t){const e=()=>{!function N4(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(vt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,nT(t),t.isCheckStableRunning=!0,tT(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),nT(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function k4(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return sM(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),oM(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return sM(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),oM(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,nT(t),tT(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Tt.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(Tt.isInAngularZone())throw new $(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,P4,iM,iM);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const P4={};function tT(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function nT(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function sM(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function oM(t){t._nesting--,tT(t)}class x4{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ln,this.onMicrotaskEmpty=new ln,this.onStable=new ln,this.onError=new ln}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const aM=new le("",{providedIn:"root",factory:uM});function uM(){const t=ge(Tt);let e=!0;return z(new at(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new at(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{Tt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{Tt.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Le()))}function Io(t){return t instanceof Function?t():t}let rT=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>new t})}return t})();function Uf(t){for(;t;){t[He]|=64;const e=Pf(t);if(bm(t)&&!e)return t;t=e}return null}const fM=new le("",{providedIn:"root",factory:()=>!1});let Z_=null;function _M(t,e){return t[e]??IM()}function yM(t,e){const n=IM();n.producerNode?.length&&(t[e]=Z_,n.lView=t,Z_=vM())}const G4={...an,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Uf(t.lView)},lView:null};function vM(){return Object.create(G4)}function IM(){return Z_??=vM(),Z_}const qe={};function Eo(t){EM(it(),Y(),dr()+t,!1)}function EM(t,e,n,r){if(!r)if(3==(3&e[He])){const s=t.preOrderCheckHooks;null!==s&&wl(e,s,n)}else{const s=t.preOrderHooks;null!==s&&ga(e,s,0,n)}ho(n)}function X(t,e=nt.Default){const n=Y();return null===n?ie(t,e):c_(vn(),n,b(t),e)}function K_(t,e,n,r,i,s,o,a,u,d,f){const g=e.blueprint.slice();return g[en]=i,g[He]=140|r,(null!==d||t&&2048&t[He])&&(g[He]|=2048),qm(g),g[Pt]=g[aa]=t,g[on]=n,g[oa]=o||t&&t[oa],g[Fe]=a||t&&t[Fe],g[ki]=u||t&&t[ki]||null,g[Sn]=s,g[so]=function JH(){return YH++}(),g[ss]=f,g[Dm]=d,g[Wt]=2==e.type?t[Wt]:g,g}function Ql(t,e,n,r,i){let s=t.data[e];if(null===s)s=function iT(t,e,n,r,i){const s=Ym(),o=rf(),u=t.data[e]=function J4(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function xs(){return null!==Me.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function LE(){return Me.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function ku(){const t=Me.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return si(s,!0),s}function Bf(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function TM(t,e,n,r,i){const s=_M(e,bu),o=dr(),a=2&r;try{ho(-1),a&&e.length>Ye&&EM(t,e,Ye,!1),Bi(a?2:0,i);const d=a?s:null,f=Gh(d);try{null!==d&&(d.dirty=!1),n(r,i)}finally{cl(d,f)}}finally{a&&null===e[bu]&&yM(e,bu),ho(o),Bi(a?3:1,i)}}function sT(t,e,n){if(Ru(e)){const r=ii(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{ii(r)}}}function oT(t,e,n){_l()&&(function sq(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;oo(n)&&function hq(t,e,n){const r=Rn(e,t),i=AM(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Q_(t,K_(t,i,null,o,r,e,null,t[oa].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Cl(n,e),br(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],d=po(e,t,a,n);br(d,e),null!==o&&fq(0,a-i,d,u,0,o),Fi(u)&&($r(n.index,e)[on]=po(e,t,a,n))}}(t,e,n,Rn(n,e)),64==(64&n.flags)&&RM(t,e,n))}function aT(t,e,n=Rn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function AM(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=uT(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function uT(t,e,n,r,i,s,o,a,u,d,f){const g=Ye+r,_=g+i,y=function z4(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:qe);return n}(g,_),E="function"==typeof d?d():d;return y[de]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:E,incompleteFirstPass:!1,ssrId:f}}let CM=t=>null;function DM(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?bM(n,e,i,s):r.hasOwnProperty(i)&&bM(n,e,r[i],s)}return n}function bM(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function cT(t,e,n,r){if(_l()){const i=null===r?null:{"":-1},s=function aq(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(kh(e,o.selectors,!1))if(r||(r=[]),Fi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),lT(t,e,a.length)}else r.unshift(o),lT(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&SM(t,e,n,o,i,a),i&&function uq(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new $(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Cs(n.mergedAttrs,n.attrs)}function SM(t,e,n,r,i,s){for(let d=0;d<r.length;d++)Hu(Cl(n,e),t,r[d].type);!function lq(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let d=0;d<r.length;d++){const f=r[d];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,u=Bf(t,e,r.length,null);for(let d=0;d<r.length;d++){const f=r[d];n.mergedAttrs=Cs(n.mergedAttrs,f.hostAttrs),dq(t,n,e,u,f),cq(u,f,i),null!==f.contentQueries&&(n.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(n.flags|=64);const g=f.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function X4(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,d=null;for(let f=e.directiveStart;f<i;f++){const g=s[f],_=n?n.get(g):null,E=_?_.outputs:null;u=DM(g.inputs,f,u,_?_.inputs:null),d=DM(g.outputs,f,d,E);const A=null===u||null===o||el(e)?null:pq(u,f,o);a.push(A)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(t,n,s)}function RM(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function FE(){return Me.lFrame.currentDirectiveIndex}();try{ho(s);for(let a=r;a<i;a++){const u=t.data[a],d=e[a];lf(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&oq(u,d)}}finally{ho(-1),lf(o)}}function oq(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function lT(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function cq(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Fi(e)&&(n[""]=t)}}function dq(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Ui(i.type)),o=new Fu(s,Fi(i),X);t.blueprint[r]=o,n[r]=o,function rq(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function iq(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,Bf(t,n,i.hostVars,qe),i)}function Fs(t,e,n,r,i,s){const o=Rn(t,e);!function dT(t,e,n,r,i,s,o){if(null==s)t.removeAttribute(e,i,n);else{const a=null==o?Ee(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}(e[Fe],o,s,t.value,n,r,i)}function fq(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)PM(r,n,o[a++],o[a++],o[a++])}function PM(t,e,n,r,i){const s=ii(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{ii(s)}}function pq(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function NM(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function MM(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];hf(n[r]),o.contentQueries(2,e[s],s)}}}function Q_(t,e){return t[Cu]?t[sl][_i]=e:t[Cu]=e,t[sl]=e,e}function hT(t,e,n){hf(0);const r=ii(null);try{e(t,n)}finally{ii(r)}}function xM(t){return t[sa]||(t[sa]=[])}function kM(t){return t.cleanup||(t.cleanup=[])}function VM(t,e){const n=t[ki],r=n?n.get(vo,null):null;r&&r.handleError(e)}function fT(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];PM(t.data[o],e[o],r,a,i)}}function gq(t,e){const n=$r(e,t),r=n[de];!function mq(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[en];null!==i&&null===n[ss]&&(n[ss]=Ww(i,n[ki])),pT(r,n,n[on])}function pT(t,e,n){pf(e);try{const r=t.viewQuery;null!==r&&hT(1,r,n);const i=t.template;null!==i&&TM(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&MM(t,e),t.staticViewQueries&&hT(2,t.viewQuery,n);const s=t.components;null!==s&&function _q(t,e){for(let n=0;n<e.length;n++)gq(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[He]&=-5,gf()}}let LM=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function CE(t,e,n){const r=Object.create(DE);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>km(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Om(r))return;r.hasRun=!0;const o=Gh(r);try{r.cleanupFn(),r.cleanupFn=jm,r.fn(i)}finally{cl(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>new t})}return t})();function Y_(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Pi(i,a):2==s&&(r=Pi(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function jf(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(wt(s)),Dr(s)&&FM(s,r);const o=n.type;if(8&o)jf(t,e,n.child,r);else if(32&o){const a=yw(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=_N(e,n);if(Array.isArray(a))r.push(...a);else{const u=Pf(e[Wt]);jf(u[de],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function FM(t,e){for(let n=jn;n<t.length;n++){const r=t[n],i=r[de].firstChild;null!==i&&jf(r[de],r,i,e)}t[Li]!==t[en]&&e.push(t[Li])}function J_(t,e,n,r=!0){const i=e[oa],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{UM(t,e,t.template,n)}catch(u){throw r&&VM(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function UM(t,e,n,r){const i=e[He];if(256!=(256&i)){e[oa].effectManager?.flush(),pf(e);try{qm(e),function af(t){return Me.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&TM(t,e,n,2,r);const o=3==(3&i);if(o){const d=t.preOrderCheckHooks;null!==d&&wl(e,d,null)}else{const d=t.preOrderHooks;null!==d&&ga(e,d,0,null),Lu(e,0)}if(function Iq(t){for(let e=sN(t);null!==e;e=oN(e)){if(!e[Bh])continue;const n=e[ca];for(let r=0;r<n.length;r++){Xh(n[r])}}}(e),BM(e,2),null!==t.contentQueries&&MM(t,e),o){const d=t.contentCheckHooks;null!==d&&wl(e,d)}else{const d=t.contentHooks;null!==d&&ga(e,d,1),Lu(e,1)}!function q4(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=_M(e,ua);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)ho(~s);else{const o=s,a=n[++i],u=n[++i];cf(a,o),r.dirty=!1;const d=Gh(r);try{u(2,e[o])}finally{cl(r,d)}}}}finally{null===e[ua]&&yM(e,ua),ho(-1)}}(t,e);const a=t.components;null!==a&&$M(e,a,0);const u=t.viewQuery;if(null!==u&&hT(2,u,r),o){const d=t.viewCheckHooks;null!==d&&wl(e,d)}else{const d=t.viewHooks;null!==d&&ga(e,d,2),Lu(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[He]&=-73,zm(e)}finally{gf()}}}function BM(t,e){for(let n=sN(t);null!==n;n=oN(n))for(let r=jn;r<n.length;r++)jM(n[r],e)}function Eq(t,e,n){jM($r(e,t),n)}function jM(t,e){if(!function Jh(t){return 128==(128&t[He])}(t))return;const n=t[de],r=t[He];if(80&r&&0===e||1024&r||2===e)UM(n,t,n.template,t[on]);else if(t[Au]>0){BM(t,1);const i=n.components;null!==i&&$M(t,i,1)}}function $M(t,e,n){for(let r=0;r<e.length;r++)Eq(t,e[r],n)}class $f{get rootNodes(){const e=this._lView,n=e[de];return jf(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[on]}set context(e){this._lView[on]=e}get destroyed(){return 256==(256&this._lView[He])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Pt];if(Dr(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(P_(e,r),Ia(n,r))}this._attachedToViewContainer=!1}Iw(this._lView[de],this._lView)}onDestroy(e){!function Wm(t,e){if(256==(256&t[He]))throw new $(911,!1);null===t[Vi]&&(t[Vi]=[]),t[Vi].push(e)}(this._lView,e)}markForCheck(){Uf(this._cdRefInjectingView||this._lView)}detach(){this._lView[He]&=-129}reattach(){this._lView[He]|=128}detectChanges(){J_(this._lView[de],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function hG(t,e){Mf(t,e,e[Fe],2,null,null)}(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e}}class wq extends $f{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;J_(e[de],e,e[on],!1)}checkNoChanges(){}get context(){return null}}class HM extends z_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=rt(e);return new Hf(n,this.ngModule)}}function GM(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class Aq{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Kc(r);const i=this.injector.get(e,Qw,r);return i!==Qw||n===Qw?i:this.parentInjector.get(e,n,r)}}class Hf extends ZN{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=GM(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return GM(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function Lh(t){return t.map(wm).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Gi?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Aq(e,s):e,a=o.get(QN,null);if(null===a)throw new $(407,!1);const g={rendererFactory:a,sanitizer:o.get(E4,null),effectManager:o.get(LM,null),afterRenderEventManager:o.get(rT,null)},_=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",E=r?function W4(t,e,n,r){const s=r.get(fM,!1)||n===ri.ShadowDom,o=t.selectRootElement(e,s);return function Z4(t){CM(t)}(o),o}(_,r,this.componentDef.encapsulation,o):R_(_,y,function Tq(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),O=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let R=null;null!==E&&(R=Ww(E,o,!0));const U=uT(0,null,null,1,0,null,null,null,null,null,null),ne=K_(null,U,null,O,null,null,g,_,o,null,R);let oe,Oe;pf(ne);try{const gt=this.componentDef;let Tn,Ko=null;gt.findHostDirectiveDefs?(Tn=[],Ko=new Map,gt.findHostDirectiveDefs(gt,Tn,Ko),Tn.push(gt)):Tn=[gt];const Eh=function Dq(t,e){const n=t[de],r=Ye;return t[r]=e,Ql(n,r,2,"#host",null)}(ne,E),voe=function bq(t,e,n,r,i,s,o){const a=i[de];!function Sq(t,e,n,r){for(const i of t)e.mergedAttrs=Cs(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Y_(e,e.mergedAttrs,!0),null!==n&&EN(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=Ww(e,i[ki]));const d=s.rendererFactory.createRenderer(e,n);let f=16;n.signals?f=4096:n.onPush&&(f=64);const g=K_(i,AM(n),null,f,i[t.index],t,s,d,null,null,u);return a.firstCreatePass&&lT(a,t,r.length-1),Q_(i,g),i[t.index]=g}(Eh,E,gt,Tn,ne,g,_);Oe=pl(U,Ye),E&&function Pq(t,e,n,r){if(r)Jc(t,n,["ng-version",YN.full]);else{const{attrs:i,classes:s}=function Tm(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Cr(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Jc(t,n,i),s&&s.length>0&&IN(t,n,s.join(" "))}}(_,gt,E,r),void 0!==n&&function Nq(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(Oe,this.ngContentSelectors,n),oe=function Rq(t,e,n,r,i,s){const o=vn(),a=i[de],u=Rn(o,i);SM(a,i,o,n,null,r);for(let f=0;f<n.length;f++)br(po(i,a,o.directiveStart+f,o),i);RM(a,i,o),u&&br(u,i);const d=po(i,a,o.directiveStart+o.componentOffset,o);if(t[on]=i[on]=d,null!==s)for(const f of s)f(d,e);return sT(a,o,t),d}(voe,gt,Tn,Ko,ne,[Mq]),pT(U,ne,null)}finally{gf()}return new Cq(this.componentType,oe,zl(Oe,ne),ne,Oe)}}class Cq extends g4{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new wq(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;fT(s[de],s,i,e,n),this.previousInputValues.set(e,n),Uf($r(this._tNode.index,s))}}get injector(){return new Gn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Mq(){const t=vn();El(Y()[de],t)}function Ct(t){let e=function qM(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Fi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=X_(t.inputs),o.inputTransforms=X_(t.inputTransforms),o.declaredInputs=X_(t.declaredInputs),o.outputs=X_(t.outputs);const a=i.hostBindings;a&&Vq(t,a);const u=i.viewQuery,d=i.contentQueries;if(u&&kq(t,u),d&&Oq(t,d),Fn(t.inputs,i.inputs),Fn(t.declaredInputs,i.declaredInputs),Fn(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Fn(o.inputTransforms,i.inputTransforms)),Fi(i)&&i.data.animation){const f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===Ct&&(n=!1)}}e=Object.getPrototypeOf(e)}!function xq(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Cs(i.hostAttrs,n=Cs(n,i.hostAttrs))}}(r)}function X_(t){return t===mi?{}:t===lt?[]:t}function kq(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function Oq(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function Vq(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function KM(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function Sr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Bs(t,e,n,r){const i=Y();return Sr(i,lo(),e)&&(it(),Fs(xt(),i,t,e,n,r)),Bs}function ET(t,e,n,r,i,s,o,a){const u=Y(),d=it(),f=t+Ye,g=d.firstCreatePass?function az(t,e,n,r,i,s,o,a,u){const d=e.consts,f=Ql(e,t,4,o||null,Ms(d,a));cT(e,n,f,Ms(d,u)),El(e,f);const g=f.tView=uT(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}(f,d,u,e,n,r,i,s,o):d.data[f];si(g,!1);const _=ux(d,u,g,t);Il()&&M_(d,u,_,g),br(_,u),Q_(u,u[f]=NM(_,u,_,g)),al(g)&&oT(d,u,g),null!=o&&aT(u,g,a)}let ux=function cx(t,e,n,r){return ks(!0),e[Fe].createComment("")};function To(t,e,n){const r=Y();return Sr(r,lo(),e)&&function Ei(t,e,n,r,i,s,o,a){const u=Rn(e,n);let f,d=e.inputs;!a&&null!=d&&(f=d[r])?(fT(t,n,f,r,i),oo(e)&&function tq(t,e){const n=$r(e,t);16&n[He]||(n[He]|=64)}(n,e.index)):3&e.type&&(r=function eq(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(it(),xt(),r,t,e,r[Fe],n,!1),To}function wT(t,e,n,r,i){const o=i?"class":"style";fT(t,n,e.inputs[o],o,r)}function me(t,e,n,r){const i=Y(),s=it(),o=Ye+t,a=i[Fe],u=s.firstCreatePass?function hz(t,e,n,r,i,s){const o=e.consts,u=Ql(e,t,2,r,Ms(o,i));return cT(e,n,u,Ms(o,s)),null!==u.attrs&&Y_(u,u.attrs,!1),null!==u.mergedAttrs&&Y_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],d=lx(s,i,u,a,e,t);i[o]=d;const f=al(u);return si(u,!0),EN(a,d,u),32!=(32&u.flags)&&Il()&&M_(s,i,d,u),0===function NE(){return Me.lFrame.elementDepthCount}()&&br(d,i),function ME(){Me.lFrame.elementDepthCount++}(),f&&(oT(s,i,u),sT(s,u,i)),null!==r&&aT(i,u),me}function he(){let t=vn();rf()?function Ou(){Me.lFrame.isParent=!1}():(t=t.parent,si(t,!1));const e=t;(function xE(t){return Me.skipHydrationRootTNode===t})(e)&&function kE(){Me.skipHydrationRootTNode=null}(),function tf(){Me.lFrame.elementDepthCount--}();const n=it();return n.firstCreatePass&&(El(n,t),Ru(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function o_(t){return 0!=(8&t.flags)}(e)&&wT(n,e,Y(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Al(t){return 0!=(16&t.flags)}(e)&&wT(n,e,Y(),e.stylesWithoutHost,!1),he}function Xn(t,e,n,r){return me(t,e,n,r),he(),Xn}let lx=(t,e,n,r,i,s)=>(ks(!0),R_(r,i,function n_(){return Me.lFrame.currentNamespace}()));function Zf(t){return!!t&&"function"==typeof t.then}function fx(t){return!!t&&"function"==typeof t.subscribe}function qr(t,e,n,r){const i=Y(),s=it(),o=vn();return function gx(t,e,n,r,i,s,o){const a=al(r),d=t.firstCreatePass&&kM(t),f=e[on],g=xM(e);let _=!0;if(3&r.type||o){const A=Rn(r,e),S=o?o(A):A,O=g.length,R=o?ne=>o(wt(ne[r.index])):r.index;let U=null;if(!o&&a&&(U=function vz(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[sa],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==U)(U.__ngLastListenerFn__||U).__ngNextListenerFn__=s,U.__ngLastListenerFn__=s,_=!1;else{s=_x(r,e,f,s,!1);const ne=n.listen(S,i,s);g.push(s,ne),d&&d.push(i,R,O,O+1)}}else s=_x(r,e,f,s,!1);const y=r.outputs;let E;if(_&&null!==y&&(E=y[i])){const A=E.length;if(A)for(let S=0;S<A;S+=2){const oe=e[E[S]][E[S+1]].subscribe(s),Oe=g.length;g.push(s,oe),d&&d.push(i,r.index,Oe,-(Oe+1))}}}(s,i,i[Fe],o,t,e,r),qr}function mx(t,e,n,r){try{return Bi(6,e,n),!1!==n(r)}catch(i){return VM(t,i),!1}finally{Bi(7,e,n)}}function _x(t,e,n,r,i){return function s(o){if(o===Function)return r;Uf(t.componentOffset>-1?$r(t.index,e):e);let u=mx(e,n,r,o),d=s.__ngNextListenerFn__;for(;d;)u=mx(e,n,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function sy(t,e){return t<<17|e<<2}function Ca(t){return t>>17&32767}function DT(t){return 2|t}function Xu(t){return(131068&t)>>2}function bT(t,e){return-131069&t|e<<2}function ST(t){return 1|t}function bx(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?Ca(s):Xu(s),u=!1;for(;0!==a&&(!1===u||o);){const f=t[a+1];Rz(t[a],e)&&(u=!0,t[a+1]=r?ST(f):DT(f)),a=r?Ca(f):Xu(f)}u&&(t[n+1]=r?DT(s):ST(s))}function Rz(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Ea(t,e)>=0}function oy(t,e){return function us(t,e,n,r){const i=Y(),s=it(),o=function ji(t){const e=Me.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function Vx(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[dr()],o=function Ox(t,e){return e>=t.expandoStartIndex}(t,n);(function Bx(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function Fz(t,e,n,r){const i=function df(t){const e=Me.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Kf(n=RT(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=RT(i,t,e,n,r),null===s){let u=function Uz(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Xu(r))return t[Ca(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=RT(null,t,e,u[1],r),u=Kf(u,e.attrs,r),function Bz(t,e,n,r){t[Ca(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function jz(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Kf(r,t[s].hostAttrs,n);return Kf(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function bz(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ca(o),u=Xu(o);t[r]=n;let f,d=!1;if(Array.isArray(n)?(f=n[1],(null===f||Ea(n,f)>0)&&(d=!0)):f=n,i)if(0!==u){const _=Ca(t[a+1]);t[r+1]=sy(_,a),0!==_&&(t[_+1]=bT(t[_+1],r)),t[a+1]=function Cz(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=sy(a,0),0!==a&&(t[a+1]=bT(t[a+1],r)),a=r;else t[r+1]=sy(u,0),0===a?a=r:t[u+1]=bT(t[u+1],r),u=r;d&&(t[r+1]=DT(t[r+1])),bx(t,f,r,!0),bx(t,f,r,!1),function Sz(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Ea(s,e)>=0&&(n[r+1]=ST(n[r+1]))}(e,f,t,r,s),o=sy(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==qe&&Sr(i,o,e)&&function Fx(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,d=u[a+1],f=function Dz(t){return 1==(1&t)}(d)?Ux(u,e,n,i,Xu(d),o):void 0;ay(f)||(ay(s)||function Az(t){return 2==(2&t)}(d)&&(s=Ux(u,null,n,i,a,o)),function wG(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Ta.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ta.Important),t.setStyle(n,r,i,s))}}(r,o,fa(dr(),n),i,s))}(s,s.data[dr()],i,i[Fe],t,i[o+1]=function qz(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=At(Aa(t)))),t}(e,n),r,o)}(t,e,null,!0),oy}function RT(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Kf(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Kf(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Gr(t,o,!!n||e[++s]))}return void 0===t?null:t}function Ux(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],d=Array.isArray(u),f=d?u[1]:u,g=null===f;let _=n[i+1];_===qe&&(_=g?lt:void 0);let y=g?Tf(_,r):f===r?_:void 0;if(d&&!ay(y)&&(y=Tf(u,r)),ay(y)&&(a=y,o))return a;const E=t[i+1];i=o?Ca(E):Xu(E)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=Tf(u,r))}return a}function ay(t){return void 0!==t}function Ce(t,e=""){const n=Y(),r=it(),i=t+Ye,s=r.firstCreatePass?Ql(r,i,1,e,null):r.data[i],o=jx(r,n,s,e,t);n[i]=o,Il()&&M_(r,n,o,s),si(s,!1)}let jx=(t,e,n,r,i)=>(ks(!0),function S_(t,e){return t.createText(e)}(e[Fe],r));function PT(t){return NT("",t,""),PT}function NT(t,e,n){const r=Y(),i=function Jl(t,e,n,r){return Sr(t,lo(),n)?e+Ee(n)+r:qe}(r,t,e,n);return i!==qe&&function wo(t,e,n){const r=fa(e,t);!function uN(t,e,n){t.setValue(e,n)}(t[Fe],r,n)}(r,dr(),i),NT}const ud="en-US";let ck=ud;function kT(t,e,n,r,i){if(t=b(t),Array.isArray(t))for(let s=0;s<t.length;s++)kT(t[s],e,n,r,i);else{const s=it(),o=Y(),a=vn();let u=Yu(t)?t:b(t.provide);const d=$N(t),f=1048575&a.providerIndexes,g=a.directiveStart,_=a.providerIndexes>>20;if(Yu(t)||!t.multi){const y=new Fu(d,i,X),E=VT(u,e,i?f:f+_,g);-1===E?(Hu(Cl(a,o),s,u),OT(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[E]=y,o[E]=y)}else{const y=VT(u,e,f+_,g),E=VT(u,e,f,f+_),S=E>=0&&n[E];if(i&&!S||!i&&!(y>=0&&n[y])){Hu(Cl(a,o),s,u);const O=function hW(t,e,n,r,i){const s=new Fu(t,n,X);return s.multi=[],s.index=e,s.componentProviders=0,kk(s,i,r&&!n),s}(i?dW:lW,n.length,i,r,d);!i&&S&&(n[E].providerFactory=O),OT(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),o.push(O)}else OT(s,t,y>-1?y:E,kk(n[i?E:y],d,!i&&r));!i&&r&&S&&n[E].componentProviders++}}}function OT(t,e,n,r){const i=Yu(e),s=function JG(t){return!!t.useClass}(e);if(i||s){const u=(s?b(e.useClass):e).prototype.ngOnDestroy;if(u){const d=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const f=d.indexOf(n);-1===f?d.push(n,[r,u]):d[f+1].push(r,u)}else d.push(n,u)}}}function kk(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function VT(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function lW(t,e,n,r){return LT(this.multi,[])}function dW(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=po(n,n[de],this.providerFactory.index,r);s=a.slice(0,o),LT(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],LT(i,s);return s}function LT(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function nn(t,e=[]){return n=>{n.providersResolver=(r,i)=>function cW(t,e,n){const r=it();if(r.firstCreatePass){const i=Fi(t);kT(n,r.data,r.blueprint,i,!0),kT(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class tc{}class Ok{}class FT extends tc{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new HM(this);const i=Ur(e);this._bootstrapComponents=Io(i.bootstrap),this._r3Injector=nM(e,n,[{provide:tc,useValue:this},{provide:z_,useValue:this.componentFactoryResolver},...r],At(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class UT extends Ok{constructor(e){super(),this.moduleType=e}create(e){return new FT(this.moduleType,e,[])}}class Vk extends tc{constructor(e){super(),this.componentFactoryResolver=new HM(this),this.instance=null;const n=new $l([...e.providers,{provide:tc,useValue:this},{provide:z_,useValue:this.componentFactoryResolver}],e.parent||U_(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function BT(t,e,n=null){return new Vk({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let gW=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=FN(0,n.type),i=r.length>0?BT([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Pe({token:t,providedIn:"environment",factory:()=>new t(ie(Gi))})}return t})();function Lk(t){t.getStandaloneInjector=e=>e.get(gW).getOrCreateStandaloneInjector(t)}function Gk(t,e,n,r,i,s){const o=e+n;return Sr(t,o,i)?function Us(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function tp(t,e){const n=t[e];return n===qe?void 0:n}(t,o+1)}function $T(t,e){const n=it();let r;const i=t+Ye;n.firstCreatePass?(r=function kW(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=Ui(r.type)),a=Jn(X);try{const u=ju(!1),d=s();return ju(u),function lz(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Y(),i,d),d}finally{Jn(a)}}function HT(t,e,n){const r=t+Ye,i=Y(),s=function pa(t,e){return t[e]}(i,r);return function np(t,e){return t[de].data[e].pure}(i,r)?Gk(i,function Hn(){const t=Me.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,s.transform,n,s):s.transform(n)}function UW(){return this._results[Symbol.iterator]()}class GT{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new ln)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=GT.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=UW)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const r=this;r.dirty=!1;const i=function Hr(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function qu(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(r._results,i,n))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function jW(t,e,n,r=!0){const i=e[de];if(function pG(t,e,n,r){const i=jn+r,s=n.length;r>0&&(n[i-1][_i]=e),r<s-jn?(e[_i]=n[i],Nl(n,jn+r,e)):(n.push(e),e[_i]=null),e[Pt]=n;const o=e[Du];null!==o&&n!==o&&function gG(t,e){const n=t[ca];e[Wt]!==e[Pt][Pt][Wt]&&(t[Bh]=!0),null===n?t[ca]=[e]:n.push(e)}(o,e);const a=e[Oi];null!==a&&a.insertView(t),e[He]|=128}(i,e,t,n),r){const s=Aw(n,t),o=e[Fe],a=N_(o,t[Li]);null!==a&&function dG(t,e,n,r,i,s){r[en]=i,r[Sn]=e,Mf(t,r,n,1,i,s)}(i,t[Sn],o,e,a,s)}}let Ao=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=GW}return t})();const $W=Ao,HW=class extends $W{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function BW(t,e,n,r){const i=e.tView,a=K_(t,i,n,4096&t[He]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Du]=t[e.index];const d=t[Oi];return null!==d&&(a[Oi]=d.createEmbeddedView(i)),pT(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new $f(i)}};function GW(){return hy(vn(),Y())}function hy(t,e){return 4&t.type?new HW(e,t,zl(t,e)):null}let ls=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=QW}return t})();function QW(){return tO(vn(),Y())}const YW=ls,Xk=class extends YW{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return zl(this._hostTNode,this._hostLView)}get injector(){return new Gn(this._hostTNode,this._hostLView)}get parentInjector(){const e=Dl(this._hostTNode,this._hostLView);if(yf(e)){const n=Bu(e,this._hostLView),r=Uu(e);return new Gn(n[de].data[r+8],n)}return new Gn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=eO(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-jn}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function zn(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const A=n||{};a=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}const u=o?e:new Hf(rt(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const S=(o?d:this.parentInjector).get(Gi,null);S&&(s=S)}rt(u.componentType??{});const y=u.create(d,i,null,s);return this.insertImpl(y.hostView,a,false),y}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function Gm(t){return Dr(t[Pt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[Pt],f=new Xk(d,d[Sn],d[Pt]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return jW(a,i,o,!r),e.attachToViewContainerRef(),Nl(qT(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=eO(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=P_(this._lContainer,n);r&&(Ia(qT(this._lContainer),n),Iw(r[de],r))}detach(e){const n=this._adjustIndex(e,-1),r=P_(this._lContainer,n);return r&&null!=Ia(qT(this._lContainer),n)?new $f(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function eO(t){return t[8]}function qT(t){return t[8]||(t[8]=[])}function tO(t,e){let n;const r=e[t.index];return Dr(r)?n=r:(n=NM(r,e,null,t),e[t.index]=n,Q_(e,n)),nO(n,e,t,r),new Xk(n,t,e)}let nO=function rO(t,e,n,r){if(t[Li])return;let i;i=8&n.type?wt(r):function JW(t,e){const n=t[Fe],r=n.createComment(""),i=Rn(e,t);return Qu(n,N_(n,i),r,function vG(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Li]=i};class zT{constructor(e){this.queryList=e,this.matches=null}clone(){return new zT(this.queryList)}setDirty(){this.queryList.setDirty()}}class WT{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){const o=n.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new WT(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==dO(e,n).matches&&this.queries[n].setDirty()}}class iO{constructor(e,n,r=null){this.predicate=e,this.flags=n,this.read=r}}class ZT{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==n?n.push(s):n=[s])}return null!==n?new ZT(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class KT{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new KT(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,n,t9(n,s)),this.matchTNodeWithReadOption(e,n,Sl(n,e,s,!1,!1))}else r===Ao?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Sl(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===vi||i===ls||i===Ao&&4&n.type)this.addMatch(n.index,-2);else{const s=Sl(n,e,i,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function t9(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function r9(t,e,n,r){return-1===n?function n9(t,e){return 11&t.type?zl(t,e):4&t.type?hy(t,e):null}(e,t):-2===n?function i9(t,e,n){return n===vi?zl(e,t):n===Ao?hy(e,t):n===ls?tO(e,t):void 0}(t,e,r):po(t,t[de],n,e)}function sO(t,e,n,r){const i=e[Oi].queries[r];if(null===i.matches){const s=t.data,o=n.matches,a=[];for(let u=0;u<o.length;u+=2){const d=o[u];a.push(d<0?null:r9(e,s[d],o[u+1],n.metadata.read))}i.matches=a}return i.matches}function QT(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=sO(t,e,i,n);for(let a=0;a<s.length;a+=2){const u=s[a];if(u>0)r.push(o[a/2]);else{const d=s[a+1],f=e[-u];for(let g=jn;g<f.length;g++){const _=f[g];_[Du]===_[Pt]&&QT(_[de],_,d,r)}if(null!==f[ca]){const g=f[ca];for(let _=0;_<g.length;_++){const y=g[_];QT(y[de],y,d,r)}}}}}return r}function oO(t){const e=Y(),n=it(),r=vl();hf(r+1);const i=dO(n,r);if(t.dirty&&function PE(t){return 4==(4&t[He])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?QT(n,e,r,[]):sO(n,e,i,r);t.reset(s,v4),t.notifyOnChanges()}return!0}return!1}function aO(t,e,n,r){const i=it();if(i.firstCreatePass){const s=vn();(function lO(t,e,n){null===t.queries&&(t.queries=new ZT),t.queries.track(new KT(e,n))})(i,new iO(e,n,r),s.index),function a9(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function cO(t,e,n){const r=new GT(4==(4&n));(function Y4(t,e,n,r){const i=xM(e);i.push(n),t.firstCreatePass&&kM(t).push(r,i.length-1)})(t,e,r,r.destroy),null===e[Oi]&&(e[Oi]=new WT),e[Oi].queries.push(new zT(r))}(i,Y(),n)}function dO(t,e){return t.queries.getByIndex(e)}const nA=new le("Application Initializer");let rA=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=ge(nA,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(Zf(s))n.push(s);else if(fx(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),SO=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Co=new le("LocaleId",{providedIn:"root",factory:()=>ge(Co,nt.Optional|nt.SkipSelf)||function R9(){return typeof $localize<"u"&&$localize.locale||ud}()});let RO=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new M(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class M9{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let PO=(()=>{class t{compileModuleSync(n){return new UT(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=Io(Ur(n).declarations).reduce((o,a)=>{const u=rt(a);return u&&o.push(new Hf(u)),o},[]);return new M9(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const kO=new le(""),my=new le("");let uA,oA=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,uA||(function e6(t){uA=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Tt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Tt),ie(aA),ie(my))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),aA=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return uA?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Da=null;const OO=new le("AllowMultipleToken"),cA=new le("PlatformDestroyListeners"),lA=new le("appBootstrapListener");class LO{constructor(e,n){this.name=e,this.token=n}}function UO(t,e,n=[]){const r=`Platform: ${e}`,i=new le(r);return(s=[])=>{let o=dA();if(!o||o.injector.get(OO,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function r6(t){if(Da&&!Da.get(OO,!1))throw new $(400,!1);(function VO(){!function ha(t){Fm=t}(()=>{throw new $(600,!1)})})(),Da=t;const e=t.get(jO);(function FO(t){t.get(HN,null)?.forEach(n=>n())})(t)}(function BO(t=[],e){return Ii.create({name:e,providers:[{provide:Vw,useValue:"platform"},{provide:cA,useValue:new Set([()=>Da=null])},...t]})}(a,r))}return function s6(t){const e=dA();if(!e)throw new $(401,!1);return e}()}}function dA(){return Da?.get(jO)??null}let jO=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function o6(t="zone.js",e){return"noop"===t?new x4:"zone.js"===t?new Tt(e):t}(r?.ngZone,function $O(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function pW(t,e,n){return new FT(t,e,n)}(n.moduleType,this.injector,function WO(t){return[{provide:Tt,useFactory:t},{provide:Vf,multi:!0,useFactory:()=>{const e=ge(u6,{optional:!0});return()=>e.initialize()}},{provide:zO,useFactory:a6},{provide:aM,useFactory:uM}]}(()=>i)),o=s.injector.get(vo,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{_y(this._modules,s),a.unsubscribe()})}),function HO(t,e,n){try{const r=n();return Zf(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(rA);return a.runInitializers(),a.donePromise.then(()=>(function lk(t){Tr(t,"Expected localeId to be defined"),"string"==typeof t&&(ck=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Co,ud)||ud),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=GO({},r);return function t6(t,e,n){const r=new UT(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(dd);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new $(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(cA,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Ii))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function GO(t,e){return Array.isArray(e)?e.reduce(GO,t):{...t,...e}}let dd=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ge(zO),this.zoneIsStable=ge(aM),this.componentTypes=[],this.components=[],this.isStable=ge(RO).hasPendingTasks.pipe(yt(n=>n?W(!1):this.zoneIsStable),zt(),Le()),this._injector=ge(Gi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof ZN;if(!this._injector.get(rA).done)throw!i&&function Ds(t){const e=rt(t)||yn(t)||lr(t);return null!==e&&e.standalone}(n),new $(405,!1);let o;o=i?n:this._injector.get(z_).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function n6(t){return t.isBoundToModule}(o)?void 0:this._injector.get(tc),d=o.create(Ii.NULL,[],r||o.selector,a),f=d.location.nativeElement,g=d.injector.get(kO,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),_y(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new $(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;_y(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(lA,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>_y(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new $(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _y(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const zO=new le("",{providedIn:"root",factory:()=>ge(vo).handleError.bind(void 0)});function a6(){const t=ge(Tt),e=ge(vo);return n=>t.runOutsideAngular(()=>e.handleError(n))}let u6=(()=>{class t{constructor(){this.zone=ge(Tt),this.applicationRef=ge(dd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let yy=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=l6}return t})();function l6(t){return function d6(t,e,n){if(oo(t)&&!n){const r=$r(t.index,e);return new $f(r,r)}return 47&t.type?new $f(e[Wt],e):null}(vn(),Y(),16==(16&t))}const A6=UO(null,"core",[]);let C6=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(ie(dd))};static#t=this.\u0275mod=cr({type:t});static#n=this.\u0275inj=ur({})}return t})();function hd(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let _A=null;function ba(){return _A}class U6{}const zi=new le("DocumentToken");let yA=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return ge(j6)},providedIn:"platform"})}return t})();const B6=new le("Location Initialized");let j6=(()=>{class t extends yA{constructor(){super(),this._doc=ge(zi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ba().getBaseHref(this._doc)}onPopState(n){const r=ba().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ba().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function vA(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function h1(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Do(t){return t&&"?"!==t[0]?"?"+t:t}let rc=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return ge(p1)},providedIn:"root"})}return t})();const f1=new le("appBaseHref");let p1=(()=>{class t extends rc{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ge(zi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return vA(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Do(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+Do(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+Do(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(yA),ie(f1,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$6=(()=>{class t extends rc{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=vA(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Do(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Do(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(yA),ie(f1,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),IA=(()=>{class t{constructor(n){this._subject=new ln,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function q6(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(h1(g1(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Do(r))}normalize(n){return t.stripTrailingSlash(function G6(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,g1(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Do(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Do(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=Do;static#t=this.joinWithSlash=vA;static#n=this.stripTrailingSlash=h1;static#r=this.\u0275fac=function(r){return new(r||t)(ie(rc))};static#i=this.\u0275prov=Pe({token:t,factory:function(){return function H6(){return new IA(ie(rc))}()},providedIn:"root"})}return t})();function g1(t){return t.replace(/\/index.html$/,"")}let b1=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new k5,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){S1("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){S1("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(X(ls),X(Ao))};static#t=this.\u0275dir=xe({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class k5{constructor(){this.$implicit=null,this.ngIf=null}}function S1(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${At(e)}'.`)}class L5{createSubscription(e,n){return dl(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){dl(()=>e.unsubscribe())}}class F5{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const U5=new F5,B5=new L5;let P1=(()=>{class t{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(Zf(n))return U5;if(fx(n))return B5;throw function hs(t,e){return new $(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||t)(X(yy,16))};static#t=this.\u0275pipe=Bn({name:"async",type:t,pure:!1,standalone:!0})}return t})(),i8=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=cr({type:t});static#n=this.\u0275inj=ur({})}return t})();function xy(t){return"server"===t}let u8=(()=>{class t{static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>new c8(ie(zi),window)})}return t})();class c8{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function l8(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class k8 extends U6{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class LA extends k8{static makeCurrent(){!function F6(t){_A||(_A=t)}(new LA)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function O8(){return cp=cp||document.querySelector("base"),cp?cp.getAttribute("href"):null}();return null==n?null:function V8(t){Vy=Vy||document.createElement("a"),Vy.setAttribute("href",t);const e=Vy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){cp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function R5(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Vy,cp=null,F8=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const FA=new le("EventManagerPlugins");let L1=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(ie(FA),ie(Tt))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();class F1{constructor(e){this._doc=e}}const UA="ng-app-id";let U1=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xy(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${UA}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(UA),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(UA,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(zi),ie(B_),ie(GN,8),ie(_o))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const BA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},jA=/%COMP%/g,$8=new le("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function j1(t,e){return e.map(n=>n.replace(jA,t))}let $1=(()=>{class t{constructor(n,r,i,s,o,a,u,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=xy(a),this.defaultRenderer=new $A(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ri.ShadowDom&&(r={...r,encapsulation:ri.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof G1?i.applyToHost(n):i instanceof HA&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case ri.Emulated:s=new G1(u,d,r,this.appId,f,o,a,g);break;case ri.ShadowDom:return new z8(u,d,n,r,o,a,this.nonce,g);default:s=new HA(u,d,r,f,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(ie(L1),ie(U1),ie(B_),ie($8),ie(zi),ie(_o),ie(Tt),ie(GN))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();class $A{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(BA[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(H1(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(H1(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=BA[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=BA[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ta.DashCase|Ta.Important)?e.style.setProperty(n,r,i&Ta.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ta.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=ba().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function H1(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class z8 extends $A{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=j1(i.id,i.styles);for(const f of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class HA extends $A{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?j1(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class G1 extends HA{constructor(e,n,r,i,s,o,a,u){const d=i+"-"+r.id;super(e,n,r,s,o,a,u,d),this.contentAttr=function H8(t){return"_ngcontent-%COMP%".replace(jA,t)}(d),this.hostAttr=function G8(t){return"_nghost-%COMP%".replace(jA,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let W8=(()=>{class t extends F1{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(zi))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const q1=["alt","control","meta","shift"],Z8={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},K8={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Q8=(()=>{class t extends F1{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ba().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),q1.forEach(d=>{const f=r.indexOf(d);f>-1&&(r.splice(f,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=Z8[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),q1.forEach(o=>{o!==i&&(0,K8[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(ie(zi))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const W1=[{provide:_o,useValue:"browser"},{provide:HN,useValue:function Y8(){LA.makeCurrent()},multi:!0},{provide:zi,useFactory:function X8(){return function bG(t){bw=t}(document),document},deps:[]}],e7=UO(A6,"browser",W1),t7=new le(""),Z1=[{provide:my,useClass:class L8{addToWindow(e){vt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new $(5103,!1);return s},vt.getAllAngularTestabilities=()=>e.getAllTestabilities(),vt.getAllAngularRootElements=()=>e.getAllRootElements(),vt.frameworkStabilizers||(vt.frameworkStabilizers=[]),vt.frameworkStabilizers.push(r=>{const i=vt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?ba().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:kO,useClass:oA,deps:[Tt,aA,my]},{provide:oA,useClass:oA,deps:[Tt,aA,my]}],K1=[{provide:Vw,useValue:"root"},{provide:vo,useFactory:function J8(){return new vo},deps:[]},{provide:FA,useClass:W8,multi:!0,deps:[zi,Tt,_o]},{provide:FA,useClass:Q8,multi:!0,deps:[zi]},$1,U1,L1,{provide:QN,useExisting:$1},{provide:class d8{},useClass:F8,deps:[]},[]];let n7=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:B_,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(ie(t7,12))};static#t=this.\u0275mod=cr({type:t});static#n=this.\u0275inj=ur({providers:[...K1,...Z1],imports:[i8,C6]})}return t})(),Q1=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(ie(zi))};static#t=this.\u0275prov=Pe({token:t,factory:function(r){let i=null;return i=r?new r:function i7(){return new Q1(ie(zi))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;const{isArray:c7}=Array,{getPrototypeOf:l7,prototype:d7,keys:h7}=Object;function eV(t){if(1===t.length){const e=t[0];if(c7(e))return{args:e,keys:null};if(function f7(t){return t&&"object"==typeof t&&l7(t)===d7}(e)){const n=h7(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:p7}=Array;function tV(t){return De(e=>function g7(t,e){return p7(e)?t(...e):t(e)}(t,e))}function nV(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let rV=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(X(yo),X(vi))};static#t=this.\u0275dir=xe({type:t})}return t})(),ic=(()=>{class t extends rV{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=qn(t)))(i||t)}}();static#t=this.\u0275dir=xe({type:t,features:[Ct]})}return t})();const Hs=new le("NgValueAccessor"),y7={provide:Hs,useExisting:k(()=>lp),multi:!0},I7=new le("CompositionEventMode");let lp=(()=>{class t extends rV{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function v7(){const t=ba()?ba().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(X(yo),X(vi),X(I7,8))};static#t=this.\u0275dir=xe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&qr("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[nn([y7]),Ct]})}return t})();function Ra(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function sV(t){return null!=t&&"number"==typeof t.length}const Rr=new le("NgValidators"),Pa=new le("NgAsyncValidators"),E7=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ro{static min(e){return function oV(t){return e=>{if(Ra(e.value)||Ra(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(e)}static max(e){return function aV(t){return e=>{if(Ra(e.value)||Ra(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(e)}static required(e){return uV(e)}static requiredTrue(e){return function cV(t){return!0===t.value?null:{required:!0}}(e)}static email(e){return function lV(t){return Ra(t.value)||E7.test(t.value)?null:{email:!0}}(e)}static minLength(e){return function dV(t){return e=>Ra(e.value)||!sV(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function hV(t){return e=>sV(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static pattern(e){return function fV(t){if(!t)return Ly;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Ra(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return vV(e)}static composeAsync(e){return IV(e)}}function uV(t){return Ra(t.value)?{required:!0}:null}function Ly(t){return null}function pV(t){return null!=t}function gV(t){return Zf(t)?D(t):t}function mV(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function _V(t,e){return e.map(n=>n(t))}function yV(t){return t.map(e=>function w7(t){return!t.validate}(e)?e:n=>e.validate(n))}function vV(t){if(!t)return null;const e=t.filter(pV);return 0==e.length?null:function(n){return mV(_V(n,e))}}function qA(t){return null!=t?vV(yV(t)):null}function IV(t){if(!t)return null;const e=t.filter(pV);return 0==e.length?null:function(n){return function m7(...t){const e=Jo(t),{args:n,keys:r}=eV(t),i=new at(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,d=o;for(let f=0;f<o;f++){let g=!1;_n(n[f]).subscribe(pe(s,_=>{g||(g=!0,d--),a[f]=_},()=>u--,void 0,()=>{(!u||!g)&&(d||s.next(r?nV(r,a):a),s.complete())}))}});return e?i.pipe(tV(e)):i}(_V(n,e).map(gV)).pipe(De(mV))}}function zA(t){return null!=t?IV(yV(t)):null}function EV(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function wV(t){return t._rawValidators}function TV(t){return t._rawAsyncValidators}function WA(t){return t?Array.isArray(t)?t:[t]:[]}function Fy(t,e){return Array.isArray(t)?t.includes(e):t===e}function AV(t,e){const n=WA(e);return WA(t).forEach(i=>{Fy(n,i)||n.push(i)}),n}function CV(t,e){return WA(e).filter(n=>!Fy(t,n))}class DV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=zA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Kr extends DV{get formDirective(){return null}get path(){return null}}class Na extends DV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class bV{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ZA=(()=>{class t extends bV{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(X(Na,2))};static#t=this.\u0275dir=xe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&oy("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ct]})}return t})(),Uy=(()=>{class t extends bV{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(X(Kr,10))};static#t=this.\u0275dir=xe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&oy("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Ct]})}return t})();const dp="VALID",jy="INVALID",pd="PENDING",hp="DISABLED";function YA(t){return($y(t)?t.validators:t)||null}function JA(t,e){return($y(e)?e.asyncValidators:t)||null}function $y(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class NV{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===dp}get invalid(){return this.status===jy}get pending(){return this.status==pd}get disabled(){return this.status===hp}get enabled(){return this.status!==hp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(AV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(AV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(CV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(CV(e,this._rawAsyncValidators))}hasValidator(e){return Fy(this._rawValidators,e)}hasAsyncValidator(e){return Fy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=pd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=hp,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=dp,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dp||this.status===pd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hp:dp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=pd,this._hasOwnPendingAsyncValidator=!0;const n=gV(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ln,this.statusChanges=new ln}_calculateStatus(){return this._allControlsDisabled()?hp:this.errors?jy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pd)?pd:this._anyControlsHaveStatus(jy)?jy:dp}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){$y(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function D7(t){return Array.isArray(t)?qA(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function b7(t){return Array.isArray(t)?zA(t):t||null}(this._rawAsyncValidators)}}class fp extends NV{constructor(e,n,r){super(YA(n),JA(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function PV(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new $(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function RV(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[n])throw new $(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const sc=new le("CallSetDisabledState",{providedIn:"root",factory:()=>pp}),pp="always";function gp(t,e,n=pp){XA(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function P7(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&MV(t,e)})}(t,e),function M7(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function N7(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&MV(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function R7(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Gy(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),zy(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function qy(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function XA(t,e){const n=wV(t);null!==e.validator?t.setValidators(EV(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=TV(t);null!==e.asyncValidator?t.setAsyncValidators(EV(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();qy(e._rawValidators,i),qy(e._rawAsyncValidators,i)}function zy(t,e){let n=!1;if(null!==t){if(null!==e.validator){const i=wV(t);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(null!==e.asyncValidator){const i=TV(t);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}const r=()=>{};return qy(e._rawValidators,r),qy(e._rawAsyncValidators,r),n}function MV(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function xV(t,e){XA(t,e)}function kV(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const L7={provide:Kr,useExisting:k(()=>Wy)},mp=(()=>Promise.resolve())();let Wy=(()=>{class t extends Kr{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ln,this.form=new fp({},qA(n),zA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){mp.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),gp(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){mp.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){mp.then(()=>{const r=this._findContainer(n.path),i=new fp({});xV(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){mp.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){mp.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,kV(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(r){return new(r||t)(X(Rr,10),X(Pa,10),X(sc,8))};static#t=this.\u0275dir=xe({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&qr("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[nn([L7]),Ct]})}return t})();function OV(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function VV(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const Po=class extends NV{constructor(e=null,n,r){super(YA(n),JA(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$y(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=VV(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){OV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){OV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){VV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Zy=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=xe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})();const j7={provide:Hs,useExisting:k(()=>rC),multi:!0};let rC=(()=>{class t extends ic{writeValue(n){this.setProperty("value",n??"")}registerOnChange(n){this.onChange=r=>{n(""==r?null:parseFloat(r))}}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=qn(t)))(i||t)}}();static#t=this.\u0275dir=xe({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&qr("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[nn([j7]),Ct]})}return t})(),jV=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=cr({type:t});static#n=this.\u0275inj=ur({})}return t})();const iC=new le("NgModelWithFormControlWarning"),z7={provide:Kr,useExisting:k(()=>_p)};let _p=(()=>{class t extends Kr{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ln,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const r=this.form.get(n.path);return gp(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){Gy(n.control||null,n,!1),function V7(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this.submitted=!0,kV(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const r=n.control,i=this.form.get(n.path);r!==i&&(Gy(r||null,n),(t=>t instanceof Po)(i)&&(gp(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const r=this.form.get(n.path);xV(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const r=this.form.get(n.path);r&&function x7(t,e){return zy(t,e)}(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){XA(this.form,this),this._oldForm&&zy(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||t)(X(Rr,10),X(Pa,10),X(sc,8))};static#t=this.\u0275dir=xe({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&qr("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[nn([z7]),Ct,jr]})}return t})();const K7={provide:Na,useExisting:k(()=>Ky)};let Ky=(()=>{class t extends Na{set isDisabled(n){}static#e=this._ngModelWarningSentOnce=!1;constructor(n,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new ln,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function nC(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===lp?n=s:function O7(t){return Object.getPrototypeOf(t.constructor)===ic}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){this._added||this._setUpControl(),function tC(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return function Hy(t,e){return[...e.path,t]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||t)(X(Kr,13),X(Rr,10),X(Pa,10),X(Hs,10),X(iC,8))};static#n=this.\u0275dir=xe({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[nn([K7]),Ct,jr]})}return t})(),oc=(()=>{class t{constructor(){this._validator=Ly}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ly,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=xe({type:t,features:[jr]})}return t})();const iZ={provide:Rr,useExisting:k(()=>yp),multi:!0};let yp=(()=>{class t extends oc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=hd,this.createValidator=n=>uV}enabled(n){return n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=qn(t)))(i||t)}}();static#t=this.\u0275dir=xe({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Bs("required",i._enabled?"":null)},inputs:{required:"required"},features:[nn([iZ]),Ct]})}return t})(),rL=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=cr({type:t});static#n=this.\u0275inj=ur({imports:[jV]})}return t})(),dZ=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:sc,useValue:n.callSetDisabledState??pp}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=cr({type:t});static#n=this.\u0275inj=ur({imports:[rL]})}return t})(),hZ=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:iC,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:sc,useValue:n.callSetDisabledState??pp}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=cr({type:t});static#n=this.\u0275inj=ur({imports:[rL]})}return t})();function cC(...t){const e=Is(t),n=Jo(t),{args:r,keys:i}=eV(t);if(0===r.length)return D([],e);const s=new at(function pZ(t,e,n=mn){return r=>{iL(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)iL(e,()=>{const d=D(t[u],e);let f=!1;d.subscribe(pe(r,g=>{s[u]=g,f||(f=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>nV(i,o):mn));return n?s.pipe(tV(n)):s}function iL(t,e,n){t?Yn(n,t,e):e()}const Qy=ke(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function lC(...t){return function gZ(){return gi(1)}()(D(t,Is(t)))}function sL(t){return new at(e=>{_n(t()).subscribe(e)})}function vp(t,e){const n=I(t)?t:()=>t,r=i=>i.error(n());return new at(e?i=>e.schedule(r,0,i):r)}function dC(){return B((t,e)=>{let n=null;t._refCount++;const r=pe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class oL extends at{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Q(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dt;const n=this.getSubject();e.add(this.source.subscribe(pe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dt.EMPTY)}return e}refCount(){return dC()(this)}}function gd(t){return t<=0?()=>Dn:B((e,n)=>{let r=0;e.subscribe(pe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Yy(...t){const e=Is(t);return B((n,r)=>{(e?lC(t,n,e):lC(t,n)).subscribe(r)})}function fs(t,e){return B((n,r)=>{let i=0;n.subscribe(pe(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Jy(t){return B((e,n)=>{let r=!1;e.subscribe(pe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function aL(t=mZ){return B((e,n)=>{let r=!1;e.subscribe(pe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function mZ(){return new Qy}function Ma(t,e){const n=arguments.length>=2;return r=>r.pipe(t?fs((i,s)=>t(i,s,r)):mn,gd(1),n?Jy(e):aL(()=>new Qy))}function Ip(t,e){return I(e)?Lt(t,e,1):Lt(t,1)}function fr(t,e,n){const r=I(t)||e||n?{next:t,error:e,complete:n}:t;return r?B((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(pe(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):mn}function ac(t){return B((e,n)=>{let s,r=null,i=!1;r=e.subscribe(pe(n,void 0,void 0,o=>{s=_n(t(o,ac(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Xy(t,e){return B(function _Z(t,e,n,r,i){return(s,o)=>{let a=n,u=e,d=0;s.subscribe(pe(o,f=>{const g=d++;u=a?t(u,f,g):(a=!0,f),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}function hC(t){return t<=0?()=>Dn:B((e,n)=>{let r=[];e.subscribe(pe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function fC(t){return B((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Ke="primary",Ep=Symbol("RouteTitle");class EZ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function md(t){return new EZ(t)}function wZ(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Gs(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!uL(t[i],e[i]))return!1;return!0}function uL(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function cL(t){return t.length>0?t[t.length-1]:null}function xa(t){return function fZ(t){return!!t&&(t instanceof at||I(t.lift)&&I(t.subscribe))}(t)?t:Zf(t)?D(Promise.resolve(t)):W(t)}const AZ={exact:function hL(t,e,n){if(!uc(t.segments,e.segments)||!ev(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!hL(t.children[r],e.children[r],n))return!1;return!0},subset:fL},lL={exact:function CZ(t,e){return Gs(t,e)},subset:function DZ(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>uL(t[n],e[n]))},ignored:()=>!0};function dL(t,e,n){return AZ[n.paths](t.root,e.root,n.matrixParams)&&lL[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function fL(t,e,n){return pL(t,e,e.segments,n)}function pL(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!uc(i,n)||e.hasChildren()||!ev(i,n,r))}if(t.segments.length===n.length){if(!uc(t.segments,n)||!ev(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!fL(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(uc(t.segments,i)&&ev(t.segments,i,r)&&t.children[Ke])&&pL(t.children[Ke],e,s,r)}}function ev(t,e,n){return e.every((r,i)=>lL[n](t[i].parameters,r.parameters))}class _d{constructor(e=new Dt([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=md(this.queryParams)),this._queryParamMap}toString(){return RZ.serialize(this)}}class Dt{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tv(this)}}class wp{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=md(this.parameters)),this._parameterMap}toString(){return _L(this)}}function uc(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Tp=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return new pC},providedIn:"root"})}return t})();class pC{parse(e){const n=new BZ(e);return new _d(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Ap(e.root,!0)}`,r=function MZ(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${nv(n)}=${nv(i)}`).join("&"):`${nv(n)}=${nv(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function PZ(t){return encodeURI(t)}(e.fragment)}`:""}`}}const RZ=new pC;function tv(t){return t.segments.map(e=>_L(e)).join("/")}function Ap(t,e){if(!t.hasChildren())return tv(t);if(e){const n=t.children[Ke]?Ap(t.children[Ke],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==Ke&&r.push(`${i}:${Ap(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function SZ(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ke&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ke&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===Ke?[Ap(t.children[Ke],!1)]:[`${i}:${Ap(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Ke]?`${tv(t)}/${n[0]}`:`${tv(t)}/(${n.join("//")})`}}function gL(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nv(t){return gL(t).replace(/%3B/gi,";")}function gC(t){return gL(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rv(t){return decodeURIComponent(t)}function mL(t){return rv(t.replace(/\+/g,"%20"))}function _L(t){return`${gC(t.path)}${function NZ(t){return Object.keys(t).map(e=>`;${gC(e)}=${gC(t[e])}`).join("")}(t.parameters)}`}const xZ=/^[^\/()?;#]+/;function mC(t){const e=t.match(xZ);return e?e[0]:""}const kZ=/^[^\/()?;=#]+/,VZ=/^[^=?&#]+/,FZ=/^[^&#]+/;class BZ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Dt([],{}):new Dt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ke]=new Dt(e,n)),r}parseSegment(){const e=mC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new wp(rv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function OZ(t){const e=t.match(kZ);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=mC(this.remaining);i&&(r=i,this.capture(r))}e[rv(n)]=rv(r)}parseQueryParam(e){const n=function LZ(t){const e=t.match(VZ);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function UZ(t){const e=t.match(FZ);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=mL(n),s=mL(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=mC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new $(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ke);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[Ke]:new Dt([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}}function yL(t){return t.segments.length>0?new Dt([],{[Ke]:t}):t}function vL(t){const e={};for(const r of Object.keys(t.children)){const s=vL(t.children[r]);if(r===Ke&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function jZ(t){if(1===t.numberOfChildren&&t.children[Ke]){const e=t.children[Ke];return new Dt(t.segments.concat(e.segments),e.children)}return t}(new Dt(t.segments,e))}function cc(t){return t instanceof _d}function IL(t){let e;const i=yL(function n(s){const o={};for(const u of s.children){const d=n(u);o[u.outlet]=d}const a=new Dt(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function EL(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return _C(i,i,i,n,r);const s=function HZ(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new TL(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new TL(n,e,r)}(e);if(s.toRoot())return _C(i,i,new Dt([],{}),n,r);const o=function GZ(t,e,n){if(t.isAbsolute)return new sv(e,!0,0);if(!n)return new sv(e,!1,NaN);if(null===n.parent)return new sv(n,!0,0);const r=iv(t.commands[0])?0:1;return function qZ(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new sv(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?Dp(o.segmentGroup,o.index,s.commands):AL(o.segmentGroup,o.index,s.commands);return _C(i,o.segmentGroup,a,n,r)}function iv(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Cp(t){return"object"==typeof t&&null!=t&&t.outlets}function _C(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`}),o=t===e?n:wL(t,e,n);const a=yL(vL(o));return new _d(a,s,i)}function wL(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:wL(s,e,n)}),new Dt(t.segments,r)}class TL{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&iv(r[0]))throw new $(4003,!1);const i=r.find(Cp);if(i&&i!==cL(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sv{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function AL(t,e,n){if(t||(t=new Dt([],{})),0===t.segments.length&&t.hasChildren())return Dp(t,e,n);const r=function WZ(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(Cp(a))break;const u=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!DL(u,d,o))return s;r+=2}else{if(!DL(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Dt(t.segments.slice(0,r.pathIndex),{});return s.children[Ke]=new Dt(t.segments.slice(r.pathIndex),t.children),Dp(s,0,i)}return r.match&&0===i.length?new Dt(t.segments,{}):r.match&&!t.hasChildren()?yC(t,e,n):r.match?Dp(t,0,i):yC(t,e,n)}function Dp(t,e,n){if(0===n.length)return new Dt(t.segments,{});{const r=function zZ(t){return Cp(t[0])?t[0].outlets:{[Ke]:t}}(n),i={};if(Object.keys(r).some(s=>s!==Ke)&&t.children[Ke]&&1===t.numberOfChildren&&0===t.children[Ke].segments.length){const s=Dp(t.children[Ke],e,n);return new Dt(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=AL(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Dt(t.segments,i)}}function yC(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Cp(s)){const u=ZZ(s.outlets);return new Dt(r,u)}if(0===i&&iv(n[0])){r.push(new wp(t.segments[e].path,CL(n[0]))),i++;continue}const o=Cp(s)?s.outlets[Ke]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&iv(a)?(r.push(new wp(o,CL(a))),i+=2):(r.push(new wp(o,{})),i++)}return new Dt(r,{})}function ZZ(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=yC(new Dt([],{}),0,r))}),e}function CL(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function DL(t,e,n){return t==n.path&&Gs(e,n.parameters)}const bp="imperative";class qs{constructor(e,n){this.id=e,this.url=n}}class ov extends qs{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ka extends qs{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Sp extends qs{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yd extends qs{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class av extends qs{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class bL extends qs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KZ extends qs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QZ extends qs{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class YZ extends qs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JZ extends qs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XZ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class eK{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class tK{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nK{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rK{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iK{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SL{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class vC{}class IC{constructor(e){this.url=e}}class sK{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Rp,this.attachRef=null}}let Rp=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new sK,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class RL{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=EC(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=EC(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=wC(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wC(e,this._root).map(n=>n.value)}}function EC(t,e){if(t===e.value)return e;for(const n of e.children){const r=EC(t,n);if(r)return r}return null}function wC(t,e){if(t===e.value)return[e];for(const n of e.children){const r=wC(t,n);if(r.length)return r.unshift(e),r}return[]}class No{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function vd(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class PL extends RL{constructor(e,n){super(e),this.snapshot=n,TC(this,e)}toString(){return this.snapshot.toString()}}function NL(t,e){const n=function oK(t,e){const o=new uv([],{},{},"",{},Ke,e,null,{});return new xL("",new No(o,[]))}(0,e),r=new M([new wp("",{})]),i=new M({}),s=new M({}),o=new M({}),a=new M(""),u=new Id(r,i,o,a,s,Ke,e,n.root);return u.snapshot=n.root,new PL(new No(u,[]),n)}class Id{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(De(d=>d[Ep]))??W(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(De(e=>md(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(De(e=>md(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ML(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function aK(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class uv{get title(){return this.data?.[Ep]}constructor(e,n,r,i,s,o,a,u,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=md(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=md(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xL extends RL{constructor(e,n){super(n),this.url=e,TC(this,n)}toString(){return kL(this._root)}}function TC(t,e){e.value._routerState=t,e.children.forEach(n=>TC(t,n))}function kL(t){const e=t.children.length>0?` { ${t.children.map(kL).join(", ")} } `:"";return`${t.value}${e}`}function AC(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Gs(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Gs(e.params,n.params)||t.paramsSubject.next(n.params),function TZ(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Gs(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Gs(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function CC(t,e){const n=Gs(t.params,e.params)&&function bZ(t,e){return uc(t,e)&&t.every((n,r)=>Gs(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||CC(t.parent,e.parent))}let DC=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ke,this.activateEvents=new ln,this.deactivateEvents=new ln,this.attachEvents=new ln,this.detachEvents=new ln,this.parentContexts=ge(Rp),this.location=ge(ls),this.changeDetector=ge(yy),this.environmentInjector=ge(Gi),this.inputBinder=ge(cv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new uK(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=xe({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[jr]})}return t})();class uK{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Id?this.route:e===Rp?this.childContexts:this.parent.get(e,n)}}const cv=new le("");let OL=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=cC([r.queryParams,r.params,r.data]).pipe(yt(([s,o,a],u)=>(a={...s,...o,...a},0===u?W(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function L6(t){const e=rt(t);if(!e)return null;const n=new Hf(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();function Pp(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function lK(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Pp(t,r,i);return Pp(t,r)})}(t,e,n);return new No(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Pp(t,a)),o}}const r=function dK(t){return new Id(new M(t.url),new M(t.params),new M(t.queryParams),new M(t.fragment),new M(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>Pp(t,s));return new No(r,i)}}const bC="ngNavigationCancelingError";function VL(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=cc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=LL(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function LL(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[bC]=!0,r.cancellationCode=e,n&&(r.url=n),r}function FL(t){return t&&t[bC]}let UL=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Un({type:t,selectors:[["ng-component"]],standalone:!0,features:[Lk],decls:1,vars:0,template:function(r,i){1&r&&Xn(0,"router-outlet")},dependencies:[DC],encapsulation:2})}return t})();function SC(t){const e=t.children&&t.children.map(SC),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ke&&(n.component=UL),n}function ps(t){return t.outlet||Ke}function Np(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class vK{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),AC(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=vd(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=vd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=vd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=vd(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new iK(s.value.snapshot))}),e.children.length&&this.forwardEvent(new nK(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(AC(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),AC(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Np(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class BL{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class lv{constructor(e,n){this.component=e,this.route=n}}function IK(t,e,n){const r=t._root;return Mp(r,e?e._root:null,n,[r.value])}function Ed(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function dE(t){return null!==pu(t)}(t)?e.get(t):t:r}function Mp(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=vd(e);return t.children.forEach(o=>{(function wK(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function TK(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!uc(t.url,e.url);case"pathParamsOrQueryParamsChange":return!uc(t.url,e.url)||!Gs(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!CC(t,e)||!Gs(t.queryParams,e.queryParams);default:return!CC(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new BL(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Mp(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new lv(a.outlet.component,o))}else o&&xp(e,a,i),i.canActivateChecks.push(new BL(r)),Mp(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>xp(a,n.getContext(o),i)),i}function xp(t,e,n){const r=vd(t),i=t.value;Object.entries(r).forEach(([s,o])=>{xp(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new lv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function kp(t){return"function"==typeof t}function jL(t){return t instanceof Qy||"EmptyError"===t?.name}const dv=Symbol("INITIAL_VALUE");function wd(){return yt(t=>cC(t.map(e=>e.pipe(gd(1),Yy(dv)))).pipe(De(e=>{for(const n of e)if(!0!==n){if(n===dv)return dv;if(!1===n||n instanceof _d)return n}return!0}),fs(e=>e!==dv),gd(1)))}function $L(t){return function bi(...t){return Si(t)}(fr(e=>{if(cc(e))throw VL(0,e)}),De(e=>!0===e))}class hv{constructor(e){this.segmentGroup=e||null}}class HL{constructor(e){this.urlTree=e}}function Td(t){return vp(new hv(t))}function GL(t){return vp(new HL(t))}class HK{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new $(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return W(r);if(i.numberOfChildren>1||!i.children[Ke])return vp(new $(4e3,!1));i=i.children[Ke]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new _d(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Dt(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const RC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function GK(t,e,n,r,i){const s=PC(t,e,n);return s.matched?(r=function fK(t,e){return t.providers&&!t._injector&&(t._injector=BT(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function BK(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?W(i.map(o=>{const a=Ed(o,t);return xa(function RK(t){return t&&kp(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(wd(),$L()):W(!0)}(r,e,n).pipe(De(o=>!0===o?s:{...RC}))):W(s)}function PC(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...RC}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||wZ)(n,t,e);if(!i)return{...RC};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function qL(t,e,n,r){return n.length>0&&function WK(t,e,n){return n.some(r=>fv(t,e,r)&&ps(r)!==Ke)}(t,n,r)?{segmentGroup:new Dt(e,zK(r,new Dt(n,t.children))),slicedSegments:[]}:0===n.length&&function ZK(t,e,n){return n.some(r=>fv(t,e,r))}(t,n,r)?{segmentGroup:new Dt(t.segments,qK(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Dt(t.segments,t.children),slicedSegments:n}}function qK(t,e,n,r,i){const s={};for(const o of r)if(fv(t,n,o)&&!i[ps(o)]){const a=new Dt([],{});s[ps(o)]=a}return{...i,...s}}function zK(t,e){const n={};n[Ke]=e;for(const r of t)if(""===r.path&&ps(r)!==Ke){const i=new Dt([],{});n[ps(r)]=i}return n}function fv(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class JK{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new HK(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,!1)}recognize(){const e=qL(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ke).pipe(ac(n=>{if(n instanceof HL)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof hv?this.noMatchError(n):n}),De(n=>{const r=new uv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ke,this.rootComponentType,null,{}),i=new No(r,n),s=new xL("",i),o=function $Z(t,e,n=null,r=null){return EL(IL(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ke).pipe(ac(r=>{throw r instanceof hv?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=ML(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return D(i).pipe(Ip(s=>{const o=r.children[s],a=function _K(t,e){const n=t.filter(r=>ps(r)===e);return n.push(...t.filter(r=>ps(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),Xy((s,o)=>(s.push(...o),s)),Jy(null),function yZ(t,e){const n=arguments.length>=2;return r=>r.pipe(t?fs((i,s)=>t(i,s,r)):mn,hC(1),n?Jy(e):aL(()=>new Qy))}(),Lt(s=>{if(null===s)return Td(r);const o=zL(s);return function XK(t){t.sort((e,n)=>e.value.outlet===Ke?-1:n.value.outlet===Ke?1:e.value.outlet.localeCompare(n.value.outlet))}(o),W(o)}))}processSegment(e,n,r,i,s,o){return D(n).pipe(Ip(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(ac(u=>{if(u instanceof hv)return W(null);throw u}))),Ma(a=>!!a),ac(a=>{if(jL(a))return function QK(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?W([]):Td(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function KK(t,e,n,r){return!!(ps(t)===r||r!==Ke&&fv(e,n,t))&&("**"===t.path||PC(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Td(i):Td(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?GL(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Lt(o=>{const a=new Dt(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:f}=PC(n,i,s);if(!a)return Td(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,f);return i.redirectTo.startsWith("/")?GL(g):this.applyRedirects.lineralizeSegments(i,g).pipe(Lt(_=>this.processSegment(e,r,n,_.concat(d),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?cL(i).parameters:{};a=W({snapshot:new uv(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,WL(r),ps(r),r.component??r._loadedComponent??null,r,ZL(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=GK(n,r,i,e).pipe(De(({matched:u,consumedSegments:d,remainingSegments:f,parameters:g})=>u?{snapshot:new uv(d,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,WL(r),ps(r),r.component??r._loadedComponent??null,r,ZL(r)),consumedSegments:d,remainingSegments:f}:null));return a.pipe(yt(u=>null===u?Td(n):this.getChildConfig(e=r._injector??e,r,i).pipe(yt(({routes:d})=>{const f=r._loadedInjector??e,{snapshot:g,consumedSegments:_,remainingSegments:y}=u,{segmentGroup:E,slicedSegments:A}=qL(n,_,y,d);if(0===A.length&&E.hasChildren())return this.processChildren(f,d,E).pipe(De(O=>null===O?null:[new No(g,O)]));if(0===d.length&&0===A.length)return W([new No(g,[])]);const S=ps(r)===s;return this.processSegment(f,d,E,A,S?Ke:s,!0).pipe(De(O=>[new No(g,O)]))}))))}getChildConfig(e,n,r){return n.children?W({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?W({routes:n._loadedRoutes,injector:n._loadedInjector}):function UK(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?W(!0):W(i.map(o=>{const a=Ed(o,t);return xa(function CK(t){return t&&kp(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(wd(),$L())}(e,n,r).pipe(Lt(i=>i?this.configLoader.loadChildren(e,n).pipe(fr(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function $K(t){return vp(LL(!1,3))}())):W({routes:[],injector:e})}}function eQ(t){const e=t.value.routeConfig;return e&&""===e.path}function zL(t){const e=[],n=new Set;for(const r of t){if(!eQ(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=zL(r.children);e.push(new No(r.value,i))}return e.filter(r=>!n.has(r))}function WL(t){return t.data||{}}function ZL(t){return t.resolve||{}}function KL(t){return"string"==typeof t.title||null===t.title}function NC(t){return yt(e=>{const n=t(e);return n?D(n).pipe(De(()=>e)):W(e)})}const Ad=new le("ROUTES");let MC=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ge(PO)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return W(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=xa(n.loadComponent()).pipe(De(QL),fr(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),fC(()=>{this.componentLoaders.delete(n)})),i=new oL(r,()=>new H).pipe(dC());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function aQ(t,e,n,r){return xa(t.loadChildren()).pipe(De(QL),Lt(i=>i instanceof Ok||Array.isArray(i)?W(i):D(e.compileModuleAsync(i))),De(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get(Ad,[],{optional:!0,self:!0}).flat()),{routes:o.map(SC),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(fC(()=>{this.childrenLoaders.delete(r)})),o=new oL(s,()=>new H).pipe(dC());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function QL(t){return function uQ(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let pv=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new H,this.transitionAbortSubject=new H,this.configLoader=ge(MC),this.environmentInjector=ge(Gi),this.urlSerializer=ge(Tp),this.rootContexts=ge(Rp),this.inputBindingEnabled=null!==ge(cv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>W(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new eK(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new XZ(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new M({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:bp,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(fs(s=>0!==s.id),De(s=>({...s,extractedUrl:n.urlHandlingStrategy.extract(s.rawUrl)})),yt(s=>{this.currentTransition=s;let o=!1,a=!1;return W(s).pipe(fr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),yt(u=>{const d=u.currentBrowserUrl.toString(),f=!n.navigated||u.extractedUrl.toString()!==d||d!==u.currentUrlTree.toString();if(!f&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const _="";return this.events.next(new yd(u.id,this.urlSerializer.serialize(u.rawUrl),_,0)),u.resolve(null),Dn}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return W(u).pipe(yt(_=>{const y=this.transitions?.getValue();return this.events.next(new ov(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),y!==this.transitions?.getValue()?Dn:Promise.resolve(_)}),function tQ(t,e,n,r,i,s){return Lt(o=>function YK(t,e,n,r,i,s,o="emptyOnly"){return new JK(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(De(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),fr(_=>{s.targetSnapshot=_.targetSnapshot,s.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects};const y=new bL(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(y)}));if(f&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:_,extractedUrl:y,source:E,restoredState:A,extras:S}=u,O=new ov(_,this.urlSerializer.serialize(y),E,A);this.events.next(O);const R=NL(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:R,urlAfterRedirects:y,extras:{...S,skipLocationChange:!1,replaceUrl:!1}},W(s)}{const _="";return this.events.next(new yd(u.id,this.urlSerializer.serialize(u.extractedUrl),_,1)),u.resolve(null),Dn}}),fr(u=>{const d=new KZ(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),De(u=>(this.currentTransition=s={...u,guards:IK(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function NK(t,e){return Lt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?W({...n,guardsResult:!0}):function MK(t,e,n,r){return D(t).pipe(Lt(i=>function FK(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?W(s.map(a=>{const u=Np(e)??i,d=Ed(a,u);return xa(function SK(t){return t&&kp(t.canDeactivate)}(d)?d.canDeactivate(t,e,n,r):u.runInContext(()=>d(t,e,n,r))).pipe(Ma())})).pipe(wd()):W(!0)}(i.component,i.route,n,e,r)),Ma(i=>!0!==i,!0))}(o,r,i,t).pipe(Lt(a=>a&&function AK(t){return"boolean"==typeof t}(a)?function xK(t,e,n,r){return D(e).pipe(Ip(i=>lC(function OK(t,e){return null!==t&&e&&e(new tK(t)),W(!0)}(i.route.parent,r),function kK(t,e){return null!==t&&e&&e(new rK(t)),W(!0)}(i.route,r),function LK(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function EK(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>sL(()=>W(o.guards.map(u=>{const d=Np(o.node)??n,f=Ed(u,d);return xa(function bK(t){return t&&kp(t.canActivateChild)}(f)?f.canActivateChild(r,t):d.runInContext(()=>f(r,t))).pipe(Ma())})).pipe(wd())));return W(s).pipe(wd())}(t,i.path,n),function VK(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return W(!0);const i=r.map(s=>sL(()=>{const o=Np(e)??n,a=Ed(s,o);return xa(function DK(t){return t&&kp(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(Ma())}));return W(i).pipe(wd())}(t,i.route,n))),Ma(i=>!0!==i,!0))}(r,s,t,e):W(a)),De(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),fr(u=>{if(s.guardsResult=u.guardsResult,cc(u.guardsResult))throw VL(0,u.guardsResult);const d=new QZ(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),fs(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),NC(u=>{if(u.guards.canActivateChecks.length)return W(u).pipe(fr(d=>{const f=new YZ(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),yt(d=>{let f=!1;return W(d).pipe(function nQ(t,e){return Lt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return W(n);let s=0;return D(i).pipe(Ip(o=>function rQ(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!KL(i)&&(s[Ep]=i.title),function iQ(t,e,n,r){const i=function sQ(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return W({});const s={};return D(i).pipe(Lt(o=>function oQ(t,e,n,r){const i=Np(e)??r,s=Ed(t,i);return xa(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(Ma(),fr(a=>{s[o]=a}))),hC(1),function vZ(t){return De(()=>t)}(s),ac(o=>jL(o)?Dn:vp(o)))}(s,t,e,r).pipe(De(o=>(t._resolvedData=o,t.data=ML(t,n).resolve,i&&KL(i)&&(t.data[Ep]=i.title),null)))}(o.route,r,t,e)),fr(()=>s++),hC(1),Lt(o=>s===i.length?W(n):Dn))})}(n.paramsInheritanceStrategy,this.environmentInjector),fr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",2)}}))}),fr(d=>{const f=new JZ(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),NC(u=>{const d=f=>{const g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(fr(_=>{f.component=_}),De(()=>{})));for(const _ of f.children)g.push(...d(_));return g};return cC(d(u.targetSnapshot.root)).pipe(Jy(),gd(1))}),NC(()=>this.afterPreactivation()),De(u=>{const d=function cK(t,e,n){const r=Pp(t,e._root,n?n._root:void 0);return new PL(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:d},s}),fr(()=>{this.events.next(new vC)}),((t,e,n,r)=>De(i=>(new vK(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),gd(1),fr({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ka(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function IZ(t){return B((e,n)=>{_n(t).subscribe(pe(n,()=>n.complete(),Te)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(fr(u=>{throw u}))),fC(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),ac(u=>{if(a=!0,FL(u))this.events.next(new Sp(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function hK(t){return FL(t)&&cc(t.url)}(u)?this.events.next(new IC(u.url)):s.resolve(!1);else{this.events.next(new av(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(d){s.reject(d)}}return Dn}))}))}cancelNavigationTransition(n,r,i){const s=new Sp(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function YL(t){return t!==bp}let JL=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ke);return r}getResolvedTitleForRoute(n){return n.data[Ep]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return ge(cQ)},providedIn:"root"})}return t})(),cQ=(()=>{class t extends JL{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Q1))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),lQ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return ge(hQ)},providedIn:"root"})}return t})();class dQ{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let hQ=(()=>{class t extends dQ{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=qn(t)))(i||t)}}();static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const gv=new le("",{providedIn:"root",factory:()=>({})});let fQ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return ge(pQ)},providedIn:"root"})}return t})(),pQ=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Op=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Op||{});function XL(t,e){t.events.pipe(fs(n=>n instanceof ka||n instanceof Sp||n instanceof av||n instanceof yd),De(n=>n instanceof ka||n instanceof yd?Op.COMPLETE:n instanceof Sp&&(0===n.code||1===n.code)?Op.REDIRECTING:Op.FAILED),fs(n=>n!==Op.REDIRECTING),gd(1)).subscribe(()=>{e()})}function gQ(t){throw t}function mQ(t,e,n){return e.parse("/")}const _Q={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yQ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Qr=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=ge(SO),this.isNgZoneEnabled=!1,this._events=new H,this.options=ge(gv,{optional:!0})||{},this.pendingTasks=ge(RO),this.errorHandler=this.options.errorHandler||gQ,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||mQ,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=ge(fQ),this.routeReuseStrategy=ge(lQ),this.titleStrategy=ge(JL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ge(Ad,{optional:!0})?.flat()??[],this.navigationTransitions=ge(pv),this.urlSerializer=ge(Tp),this.location=ge(IA),this.componentInputBindingEnabled=!!ge(cv,{optional:!0}),this.eventsSubscription=new dt,this.isNgZoneEnabled=ge(Tt)instanceof Tt&&Tt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new _d,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=NL(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(eF(r)&&this._events.next(r));if(r instanceof ov)YL(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof yd)this.rawUrlTree=i.rawUrl;else if(r instanceof bL){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof vC)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Sp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof IC){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||YL(i.source)};this.scheduleNavigation(s,bp,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof av&&this.restoreHistory(i,!0),r instanceof ka&&(this.navigated=!0),eF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),bp,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(SC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o;let g,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{g=IL(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return EL(g,n,f,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=cc(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,bp,null,r)}navigate(n,r={skipLocationChange:!1}){return function vQ(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new $(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{..._Q}:!1===r?{...yQ}:r,cc(n))return dL(this.currentUrlTree,n,i);const s=this.parseUrl(n);return dL(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d;o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((g,_)=>{a=g,u=_});const f=this.pendingTasks.add();return XL(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function eF(t){return!(t instanceof vC||t instanceof IC)}let Mo=(()=>{class t{constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new H,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(d=>{d instanceof ka&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function kN(t,e,n){return function KG(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?xN:MN}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(X(Qr),X(Id),function Pl(t){return function XE(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(Im(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(vn(),t)}("tabindex"),X(yo),X(vi),X(rc))};static#t=this.\u0275dir=xe({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&qr("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Bs("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",hd],skipLocationChange:["skipLocationChange","skipLocationChange",hd],replaceUrl:["replaceUrl","replaceUrl",hd],routerLink:"routerLink"},standalone:!0,features:[KM,jr]})}return t})(),lc=(()=>{class t{get isActive(){return this._isActive}constructor(n,r,i,s,o){this.router=n,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new ln,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof ka&&this.update()})}ngAfterContentInit(){W(this.links.changes,W(null)).pipe(gi()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=D(n).pipe(gi()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){const r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const n=this.hasActiveLinks();this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(n))})}isLinkActive(n){const r=function IQ(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&n.isActive(i.urlTree,r)}hasActiveLinks(){const n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static#e=this.\u0275fac=function(r){return new(r||t)(X(Qr),X(vi),X(yo),X(yy),X(Mo,8))};static#t=this.\u0275dir=xe({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(1&r&&aO(s,Mo,5),2&r){let o;oO(o=function uO(){return function o9(t,e){return t[Oi].queries[e].queryList}(Y(),vl())}())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[jr]})}return t})();class tF{}let EQ=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(fs(n=>n instanceof ka),Ip(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=BT(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return D(i).pipe(gi())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):W(null);const s=i.pipe(Lt(o=>null===o?W(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?D([s,this.loader.loadComponent(r)]).pipe(gi()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Qr),ie(PO),ie(Gi),ie(tF),ie(MC))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const xC=new le("");let nF=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ov?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ka?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof yd&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof SL&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new SL(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function wM(){throw new Error("invalid")}()};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();function xo(t,e){return{\u0275kind:t,\u0275providers:e}}function iF(){const t=ge(Ii);return e=>{const n=t.get(dd);if(e!==n.components[0])return;const r=t.get(Qr),i=t.get(sF);1===t.get(kC)&&r.initialNavigation(),t.get(oF,null,nt.Optional)?.setUpPreloading(),t.get(xC,null,nt.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const sF=new le("",{factory:()=>new H}),kC=new le("",{providedIn:"root",factory:()=>1}),oF=new le("");function CQ(t){return xo(0,[{provide:oF,useExisting:EQ},{provide:tF,useExisting:t}])}const aF=new le("ROUTER_FORROOT_GUARD"),bQ=[IA,{provide:Tp,useClass:pC},Qr,Rp,{provide:Id,useFactory:function rF(t){return t.routerState.root},deps:[Qr]},MC,[]];function SQ(){return new LO("Router",Qr)}let uF=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[bQ,[],{provide:Ad,multi:!0,useValue:n},{provide:aF,useFactory:MQ,deps:[[Qr,new Zu,new kl]]},{provide:gv,useValue:r||{}},r?.useHash?{provide:rc,useClass:$6}:{provide:rc,useClass:p1},{provide:xC,useFactory:()=>{const t=ge(u8),e=ge(Tt),n=ge(gv),r=ge(pv),i=ge(Tp);return n.scrollOffset&&t.setOffset(n.scrollOffset),new nF(i,r,t,e,n)}},r?.preloadingStrategy?CQ(r.preloadingStrategy).\u0275providers:[],{provide:LO,multi:!0,useFactory:SQ},r?.initialNavigation?xQ(r):[],r?.bindToComponentInputs?xo(8,[OL,{provide:cv,useExisting:OL}]).\u0275providers:[],[{provide:cF,useFactory:iF},{provide:lA,multi:!0,useExisting:cF}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Ad,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(ie(aF,8))};static#t=this.\u0275mod=cr({type:t});static#n=this.\u0275inj=ur({})}return t})();function MQ(t){return"guarded"}function xQ(t){return["disabled"===t.initialNavigation?xo(3,[{provide:nA,multi:!0,useFactory:()=>{const e=ge(Qr);return()=>{e.setUpLocationChangeListener()}}},{provide:kC,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?xo(2,[{provide:kC,useValue:0},{provide:nA,multi:!0,deps:[Ii],useFactory:e=>{const n=e.get(B6,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(Qr),s=e.get(sF);XL(i,()=>{r(!0)}),e.get(pv).afterPreactivation=()=>(r(!0),s.closed?W(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const cF=new le("");let lF=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Un({type:t,selectors:[["app-home"]],decls:21,vars:0,consts:[[1,"container","mt-2","mb-5"],[1,"row"],[1,"col-3"],[1,"dropdown","me-2"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],[1,"dropdown-menu"],["routerLink","/food","routerLinkActive","active","ariaCurrentWhenActive","page",1,"dropdown-item"],["routerLink","/tourism","routerLinkActive","active","ariaCurrentWhenActive","page",1,"dropdown-item"],["routerLink","/human-resources","routerLinkActive","active","ariaCurrentWhenActive","page",1,"dropdown-item"],[1,"col-8"],["role","search",1,"d-flex"],["type","search","placeholder","Search for anything","aria-label","Search",1,"form-control","me-2"],["type","submit",1,"btn","btn-outline-success"]],template:function(r,i){1&r&&(me(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),Ce(5," Categories "),he(),me(6,"ul",5)(7,"li")(8,"a",6),Ce(9,"Food"),he()(),me(10,"li")(11,"a",7),Ce(12,"Tourism"),he()(),me(13,"li")(14,"a",8),Ce(15,"HR"),he()()()()(),me(16,"div",9)(17,"form",10),Xn(18,"input",11),me(19,"button",12),Ce(20,"Search"),he()()()()())},dependencies:[Mo,lc,Zy,Uy,Wy]})}return t})();var P=$e(861),be=$e(58),dc=$e(537),ci=$e(879);const OQ=(t,e)=>e.some(n=>t instanceof n);let dF,hF;const fF=new WeakMap,OC=new WeakMap,pF=new WeakMap,VC=new WeakMap,LC=new WeakMap;let FC={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return OC.get(t);if("objectStoreNames"===e)return t.objectStoreNames||pF.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oa(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function $Q(t){return"function"==typeof t?function jQ(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function LQ(){return hF||(hF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(UC(this),e),Oa(fF.get(this))}:function(...e){return Oa(t.apply(UC(this),e))}:function(e,...n){const r=t.call(UC(this),e,...n);return pF.set(r,e.sort?e.sort():[e]),Oa(r)}}(t):(t instanceof IDBTransaction&&function UQ(t){if(OC.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});OC.set(t,e)}(t),OQ(t,function VQ(){return dF||(dF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,FC):t)}function Oa(t){if(t instanceof IDBRequest)return function FQ(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Oa(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&fF.set(n,t)}).catch(()=>{}),LC.set(e,t),e}(t);if(VC.has(t))return VC.get(t);const e=$Q(t);return e!==t&&(VC.set(t,e),LC.set(e,t)),e}const UC=t=>LC.get(t),GQ=["get","getKey","getAll","getAllKeys","count"],qQ=["put","add","delete","clear"],BC=new Map;function gF(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(BC.get(e))return BC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=qQ.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!GQ.includes(n))return;const s=function(){var o=(0,P.Z)(function*(a,...u){const d=this.transaction(a,i?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(u.shift())),(yield Promise.all([f[n](...u),i&&d.done]))[0]});return function(u){return o.apply(this,arguments)}}();return BC.set(e,s),s}!function BQ(t){FC=t(FC)}(t=>({...t,get:(e,n,r)=>gF(e,n)||t.get(e,n,r),has:(e,n)=>!!gF(e,n)||t.has(e,n)}));class zQ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function WQ(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const jC="@firebase/app",hc=new ci.Yd("@firebase/app"),vY={[jC]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fc=new Map,_v=new Map;function IY(t,e){try{t.container.addComponent(e)}catch(n){hc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vp(t){const e=t.name;if(_v.has(e))return hc.debug(`There were multiple attempts to register component ${e}.`),!1;_v.set(e,t);for(const n of fc.values())IY(n,t);return!0}const ko=new be.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."}),$C="9.23.0";function Lp(t,e,n){var r;let i=null!==(r=vY[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void hc.warn(a.join(" "))}Vp(new dc.wA(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const CY="firebase-heartbeat-database",DY=1,Fp="firebase-heartbeat-store";let GC=null;function _F(){return GC||(GC=function HQ(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Oa(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Oa(o.result),u.oldVersion,u.newVersion,Oa(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}(CY,DY,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Fp)}}).catch(t=>{throw ko.create("idb-open",{originalErrorMessage:t.message})})),GC}function qC(){return(qC=(0,P.Z)(function*(t){try{return yield(yield _F()).transaction(Fp).objectStore(Fp).get(vF(t))}catch(e){if(e instanceof be.ZR)hc.warn(e.message);else{const n=ko.create("idb-get",{originalErrorMessage:e?.message});hc.warn(n.message)}}})).apply(this,arguments)}function yF(t,e){return zC.apply(this,arguments)}function zC(){return(zC=(0,P.Z)(function*(t,e){try{const r=(yield _F()).transaction(Fp,"readwrite");yield r.objectStore(Fp).put(e,vF(t)),yield r.done}catch(n){if(n instanceof be.ZR)hc.warn(n.message);else{const r=ko.create("idb-set",{originalErrorMessage:n?.message});hc.warn(r.message)}}})).apply(this,arguments)}function vF(t){return`${t.name}!${t.options.appId}`}class PY{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new MY(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,P.Z)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=IF();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,P.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=IF(),{heartbeatsToSend:r,unsentEntries:i}=function NY(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),EF(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),EF(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=(0,be.L)(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function IF(){return(new Date).toISOString().substring(0,10)}class MY{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,P.Z)(function*(){return!!(0,be.hl)()&&(0,be.eu)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,P.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function bY(t){return qC.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return(0,P.Z)(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return yF(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return(0,P.Z)(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return yF(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function EF(t){return(0,be.L)(JSON.stringify({version:2,heartbeats:t})).length}!function xY(t){Vp(new dc.wA("platform-logger",e=>new zQ(e),"PRIVATE")),Vp(new dc.wA("heartbeat",e=>new PY(e),"PRIVATE")),Lp(jC,"0.9.13",t),Lp(jC,"0.9.13","esm2017"),Lp("fire-js","")}("");const kY=function wF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},TF=new be.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),yv=new ci.Yd("@firebase/auth");function vv(t,...e){yv.logLevel<=ci.in.ERROR&&yv.error(`Auth (${$C}): ${t}`,...e)}function li(t,...e){throw WC(t,...e)}function zs(t,...e){return WC(t,...e)}function WC(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return TF.create(t,...e)}function se(t,e,...n){if(!t)throw WC(e,...n)}function Ws(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vv(e),new Error(e)}function Va(t,e){t||Ws(e)}function CF(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class Bp{constructor(e,n){this.shortDelay=e,this.longDelay=n,Va(n>e,"Short delay should be less than long delay!"),this.isMobile=(0,be.uI)()||(0,be.b$)()}get(){return function VY(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function ZC(){return"http:"===CF()||"https:"===CF()}()||(0,be.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class DF{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const FY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},UY=new Bp(3e4,6e4);function cn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function hn(t,e,n,r){return QC.apply(this,arguments)}function QC(){return(QC=(0,P.Z)(function*(t,e,n,r,i={}){return bF(t,i,(0,P.Z)(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=(0,be.xO)(Object.assign({key:t.config.apiKey},o)).slice(1),u=yield t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),DF.fetch()(SF(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function bF(t,e,n){return YC.apply(this,arguments)}function YC(){return(YC=(0,P.Z)(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},FY),e);try{const i=new BY(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw jp(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,d]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw jp(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===u)throw jp(t,"email-already-in-use",o);if("USER_DISABLED"===u)throw jp(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw function AF(t,e,n){const r=Object.assign(Object.assign({},kY()),{[e]:n});return new be.LL("auth","Firebase",r).create(e,{appName:t.name})}(t,f,d);li(t,f)}}catch(i){if(i instanceof be.ZR)throw i;li(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function JC(){return(JC=(0,P.Z)(function*(t,e,n,r,i={}){const s=yield hn(t,e,n,r,i);return"mfaPendingCredential"in s&&li(t,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function SF(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?function KC(t,e){Va(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}(t.config,i):`${t.config.apiScheme}://${i}`}class BY{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zs(this.auth,"network-request-failed")),UY.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=zs(t,e,r);return i.customData._tokenResponse=n,i}function XC(){return(XC=(0,P.Z)(function*(t,e){return hn(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function tD(){return(tD=(0,P.Z)(function*(t,e){return hn(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function $p(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function nD(){return(nD=(0,P.Z)(function*(t,e=!1){const n=(0,be.m9)(t),r=yield n.getIdToken(e),i=Iv(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:$p(rD(i.auth_time)),issuedAtTime:$p(rD(i.iat)),expirationTime:$p(rD(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function rD(t){return 1e3*Number(t)}function Iv(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return vv("JWT malformed, contained fewer than 3 sections"),null;try{const i=(0,be.tV)(n);return i?JSON.parse(i):(vv("Failed to decode base64 JWT payload"),null)}catch(i){return vv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Vo(t,e){return iD.apply(this,arguments)}function iD(){return(iD=(0,P.Z)(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof be.ZR&&function zY({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class WY{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,P.Z)(function*(){yield n.iteration()}),r)}iteration(){var e=this;return(0,P.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class RF{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$p(this.lastLoginAt),this.creationTime=$p(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Hp(t){return sD.apply(this,arguments)}function sD(){return sD=(0,P.Z)(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Vo(t,function HY(t,e){return tD.apply(this,arguments)}(n,{idToken:r}));se(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function QY(t){return t.map(e=>{var{providerId:n}=e,r=(0,Ae._T)(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],a=function KY(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,o),f=!!t.isAnonymous&&!(t.email&&s.passwordHash||a?.length),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new RF(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,g)}),sD.apply(this,arguments)}function oD(){return(oD=(0,P.Z)(function*(t){const e=(0,be.m9)(t);yield Hp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function aD(){return(aD=(0,P.Z)(function*(t,e){const n=yield bF(t,{},(0,P.Z)(function*(){const r=(0,be.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=SF(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",DF.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class Gp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function qY(t){const e=Iv(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return(0,P.Z)(function*(){return se(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return(0,P.Z)(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function YY(t,e){return aD.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Gp;return r&&(se("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(se("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(se("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gp,this.toJSON())}_performRefresh(){return Ws("not implemented")}}function La(t,e){se("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class pc{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=(0,Ae._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new WY(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new RF(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return(0,P.Z)(function*(){const r=yield Vo(n,n.stsTokenManager.getToken(n.auth,e));return se(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function GY(t){return nD.apply(this,arguments)}(this,e)}reload(){return function ZY(t){return oD.apply(this,arguments)}(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new pc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return(0,P.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield Hp(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,P.Z)(function*(){const n=yield e.getIdToken();return yield Vo(e,function jY(t,e){return XC.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,d,f;const g=null!==(r=n.displayName)&&void 0!==r?r:void 0,_=null!==(i=n.email)&&void 0!==i?i:void 0,y=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,E=null!==(o=n.photoURL)&&void 0!==o?o:void 0,A=null!==(a=n.tenantId)&&void 0!==a?a:void 0,S=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,O=null!==(d=n.createdAt)&&void 0!==d?d:void 0,R=null!==(f=n.lastLoginAt)&&void 0!==f?f:void 0,{uid:U,emailVerified:ne,isAnonymous:oe,providerData:Oe,stsTokenManager:gt}=n;se(U&&gt,e,"internal-error");const Tn=Gp.fromJSON(this.name,gt);se("string"==typeof U,e,"internal-error"),La(g,e.name),La(_,e.name),se("boolean"==typeof ne,e,"internal-error"),se("boolean"==typeof oe,e,"internal-error"),La(y,e.name),La(E,e.name),La(A,e.name),La(S,e.name),La(O,e.name),La(R,e.name);const Ko=new pc({uid:U,auth:e,email:_,emailVerified:ne,displayName:g,isAnonymous:oe,photoURL:E,phoneNumber:y,tenantId:A,stsTokenManager:Tn,createdAt:O,lastLoginAt:R});return Oe&&Array.isArray(Oe)&&(Ko.providerData=Oe.map(Eh=>Object.assign({},Eh))),S&&(Ko._redirectEventId=S),Ko}static _fromIdTokenResponse(e,n,r=!1){return(0,P.Z)(function*(){const i=new Gp;i.updateFromServerResponse(n);const s=new pc({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Hp(s),s})()}}const PF=new Map;function Lo(t){Va(t instanceof Function,"Expected a class definition");let e=PF.get(t);return e?(Va(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,PF.set(t,e),e)}const NF=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,P.Z)(function*(){return!0})()}_set(n,r){var i=this;return(0,P.Z)(function*(){i.storage[n]=r})()}_get(n){var r=this;return(0,P.Z)(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return(0,P.Z)(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function Ev(t,e,n){return`firebase:${t}:${e}:${n}`}class Dd{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ev(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ev("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,P.Z)(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?pc._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return(0,P.Z)(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return(0,P.Z)(function*(){if(!n.length)return new Dd(Lo(NF),e,r);const i=(yield Promise.all(n.map(function(){var d=(0,P.Z)(function*(f){if(yield f._isAvailable())return f});return function(f){return d.apply(this,arguments)}}()))).filter(d=>d);let s=i[0]||Lo(NF);const o=Ev(r,e.config.apiKey,e.name);let a=null;for(const d of n)try{const f=yield d._get(o);if(f){const g=pc._fromJSON(e,f);d!==s&&(a=g),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(function(){var d=(0,P.Z)(function*(f){if(f!==s)try{yield f._remove(o)}catch{}});return function(f){return d.apply(this,arguments)}}())),new Dd(s,e,r)):new Dd(s,e,r)})()}}function MF(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function OF(t=(0,be.z$)()){return/iemobile/i.test(t)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function xF(t=(0,be.z$)()){return/firefox\//i.test(t)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function LF(t=(0,be.z$)()){return/blackberry/i.test(t)}(e))return"Blackberry";if(function FF(t=(0,be.z$)()){return/webos/i.test(t)}(e))return"Webos";if(function uD(t=(0,be.z$)()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function kF(t=(0,be.z$)()){return/crios\//i.test(t)}(e))&&!e.includes("edge/"))return"Chrome";if(function VF(t=(0,be.z$)()){return/android/i.test(t)}(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function UF(t,e=[]){let n;switch(t){case"Browser":n=MF((0,be.z$)());break;case"Worker":n=`${MF((0,be.z$)())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$C}/${r}`}function BF(t,e){return lD.apply(this,arguments)}function lD(){return(lD=(0,P.Z)(function*(t,e){return hn(t,"GET","/v2/recaptchaConfig",cn(t,e))})).apply(this,arguments)}function $F(t){return void 0!==t&&void 0!==t.enterprise}class HF{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>"EMAIL_PASSWORD_PROVIDER"===n.provider&&"OFF"!==n.enforcementState)}}class qF{constructor(e){this.type="recaptcha-enterprise",this.auth=er(e)}verify(e="verify",n=!1){var r=this;return(0,P.Z)(function*(){function s(){return s=(0,P.Z)(function*(a){if(!n){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var u=(0,P.Z)(function*(d,f){BF(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(void 0!==g.recaptchaKey){const _=new HF(g);return null==a.tenantId?a._agentRecaptchaConfig=_:a._tenantRecaptchaConfigs[a.tenantId]=_,d(_.siteKey)}f(new Error("recaptcha Enterprise site key undefined"))}).catch(g=>{f(g)})});return function(d,f){return u.apply(this,arguments)}}())}),s.apply(this,arguments)}function o(a,u,d){const f=window.grecaptcha;$F(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(g=>{u(g)}).catch(()=>{u("NO_RECAPTCHA")})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{(function i(a){return s.apply(this,arguments)})(r.auth).then(d=>{if(!n&&$F(window.grecaptcha))o(d,a,u);else{if(typeof window>"u")return void u(new Error("RecaptchaVerifier is only supported in browser"));(function dD(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=zs("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",function tJ(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)})})("https://www.google.com/recaptcha/enterprise.js?render="+d).then(()=>{o(d,a,u)}).catch(f=>{u(f)})}}).catch(d=>{u(d)})})})()}}class sJ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return(0,P.Z)(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class oJ{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zF(this),this.idTokenSubscription=new zF(this),this.beforeStateQueue=new sJ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=Lo(n)),this._initializationPromise=this.queue((0,P.Z)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield Dd.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,P.Z)(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return(0,P.Z)(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,u=s?._redirectEventId,d=yield n.tryRedirectSignIn(e);(!a||a===u)&&d?.user&&(s=d.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(a){s=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return se(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return(0,P.Z)(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return(0,P.Z)(function*(){try{yield Hp(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function LY(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return(0,P.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return(0,P.Z)(function*(){const r=e?(0,be.m9)(e):null;return r&&se(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return(0,P.Z)(function*(){if(!r._deleted)return e&&se(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,P.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,P.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue((0,P.Z)(function*(){yield n.assertedPersistence.setPersistence(Lo(e))}))}initializeRecaptchaConfig(){var e=this;return(0,P.Z)(function*(){const n=yield BF(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new HF(n);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new qF(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new be.LL("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return(0,P.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return(0,P.Z)(function*(){if(!n.redirectPersistenceManager){const r=e&&Lo(e)||n._popupRedirectResolver;se(r,n,"argument-error"),n.redirectPersistenceManager=yield Dd.create(n,[Lo(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return(0,P.Z)(function*(){var r,i;return n._isInitialized&&(yield n.queue((0,P.Z)(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return(0,P.Z)(function*(){if(e===n.currentUser)return n.queue((0,P.Z)(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return se(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return(0,P.Z)(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,P.Z)(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return(0,P.Z)(function*(){var n;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function OY(t,...e){yv.logLevel<=ci.in.WARN&&yv.warn(`Auth (${$C}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function er(t){return(0,be.m9)(t)}class zF{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,be.ne)(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class hJ{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ws("not implemented")}_getIdTokenResponse(e){return Ws("not implemented")}_linkToIdToken(e,n){return Ws("not implemented")}_getReauthenticationResolver(e){return Ws("not implemented")}}function Fo(t,e){return SD.apply(this,arguments)}function SD(){return(SD=(0,P.Z)(function*(t,e){return function Oo(t,e,n,r){return JC.apply(this,arguments)}(t,"POST","/v1/accounts:signInWithIdp",cn(t,e))})).apply(this,arguments)}class bd extends hJ{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):li("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=(0,Ae._T)(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new bd(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){return Fo(e,this.buildRequest())}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Fo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fo(e,n)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=(0,be.xO)(n)}return e}}class Ua{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class JF extends Ua{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let DJ=(()=>{class t extends JF{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return bd._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}return t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com",t})();(function GF(t){return`__${t}${Math.floor(1e6*Math.random())}`})("rcb"),new Bp(3e4,6e4),new Bp(2e3,1e4),new Bp(3e4,6e4),new Bp(5e3,15e3),encodeURIComponent("fac");var w2="@firebase/auth";class XX{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return(0,P.Z)(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,be.Pz)("authIdTokenMaxAge"),function tee(t){Vp(new dc.wA("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UF(t)},d=new oJ(r,i,s,u);return function uJ(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Lo);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vp(new dc.wA("auth-internal",e=>{const n=er(e.getProvider("auth").getImmediate());return new XX(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lp(w2,"0.23.2",function eee(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),Lp(w2,"0.23.2","esm2017")}("Browser"),$e(191);var Rd=$e(823);(0,Rd.registerVersion)("firebase","10.7.1","app");class aee extends dt{constructor(e,n){super()}schedule(e,n=0){return this}}const kv={setInterval(t,e,...n){const{delegate:r}=kv;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=kv;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class C2 extends aee{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return kv.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&kv.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ve(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const Yb={now:()=>(Yb.delegate||Date).now(),delegate:void 0};class Zp{constructor(e,n=Zp.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Zp.now=Yb.now;class D2 extends Zp{constructor(e,n=Zp.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const lee=new class cee extends D2{}(class uee extends C2{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),b2=new D2(C2),Jb=new Wl("ANGULARFIRE2_VERSION");class S2{constructor(){return((t,e)=>{const n=(0,Rd.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(hee)}}const hee="app-check";function Pd(){}class R2{zone;delegate;constructor(e,n=lee){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class fee{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Pd,{},Pd,Pd)),n.pipe(fr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let P2=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new R2(Zone.current)),this.insideAngular=n.run(()=>new R2(Zone.current,b2)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(ie(Tt))};static \u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ti(t){return function gee(t){return function(n){return(n=n.lift(new fee(t.ngZone))).pipe(wr(t.outsideAngular),ar(t.insideAngular))}}(function Nd(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}())(t)}var Ba=$e(399);Ba.Z.registerVersion("firebase","10.7.1","app-compat");const vee=["ngOnDestroy"];class N2{constructor(e){return e}}const Ov=new le("angularfire2.app.options"),Vv=new le("angularfire2.app.name");function Xb(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=Ba.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ba.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){const a=!!module.hot;wee("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new N2(o)}const wee=(t,...e)=>{},Tee={provide:N2,useFactory:Xb,deps:[Ov,Tt,[new Zu,Vv]]};let Aee=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Ov,useValue:n},{provide:Vv,useValue:r}]}}constructor(n){Ba.Z.registerVersion("angularfire",Jb.full,"core"),Ba.Z.registerVersion("angularfire",Jb.full,"app-compat"),Ba.Z.registerVersion("angular",YN.full,n.toString())}static \u0275fac=function(r){return new(r||t)(ie(_o))};static \u0275mod=cr({type:t});static \u0275inj=ur({providers:[Tee]})}return t})();function M2(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return function Cee(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,o)||(x2("error",`${e} was already initialized on the ${n} Firebase App with different settings.${Dee?" You may need to reload as Firebase is not HMR aware.":""}`),x2("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const Dee=typeof module<"u"&&!!module.hot,x2=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class bee extends H{constructor(e=1/0,n=1/0,r=Yb){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function k2(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,Le({connector:()=>new bee(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function O2(t,e){return I(e)?yt(()=>t,e):yt(()=>t)}const V2=new le("angularfire2.auth.use-emulator"),L2=new le("angularfire2.auth.settings"),F2=new le("angularfire2.auth.tenant-id"),U2=new le("angularfire2.auth.langugage-code"),B2=new le("angularfire2.auth.use-device-language"),j2=new le("angularfire.auth.persistence"),$2=(t,e,n,r,i,s,o,a)=>M2(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[d,f]of Object.entries(o))u.settings[d]=f;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let yc=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,d,f,g,_,y){const E=new H,A=W(void 0).pipe(ar(o.outsideAngular),yt(()=>s.runOutsideAngular(()=>Promise.resolve().then($e.bind($e,191)))),De(()=>Xb(n,s,r)),De(S=>$2(S,s,a,d,f,g,u,_)),k2({bufferSize:1,refCount:!1}));if(xy(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=W(null);else{A.pipe(Ma()).subscribe();const S=A.pipe(yt(U=>U.getRedirectResult().then(ne=>ne,()=>null)),Ti,k2({bufferSize:1,refCount:!1})),O=A.pipe(yt(U=>new at(ne=>({unsubscribe:s.runOutsideAngular(()=>U.onAuthStateChanged(oe=>ne.next(oe),oe=>ne.error(oe),()=>ne.complete()))})))),R=A.pipe(yt(U=>new at(ne=>({unsubscribe:s.runOutsideAngular(()=>U.onIdTokenChanged(oe=>ne.next(oe),oe=>ne.error(oe),()=>ne.complete()))}))));this.authState=S.pipe(O2(O),wr(o.outsideAngular),ar(o.insideAngular)),this.user=S.pipe(O2(R),wr(o.outsideAngular),ar(o.insideAngular)),this.idToken=this.user.pipe(yt(U=>U?D(U.getIdToken()):W(null))),this.idTokenResult=this.user.pipe(yt(U=>U?D(U.getIdTokenResult()):W(null))),this.credential=z(S,E,this.authState.pipe(fs(U=>!U))).pipe(De(U=>U?.user?U:null),wr(o.outsideAngular),ar(o.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(vee.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>n.run(()=>d)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,d)=>o.then(f=>{const g=f?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,g),g})})})}))(this,A,s,{spy:{apply:(S,O,R)=>{(S.startsWith("signIn")||S.startsWith("createUser"))&&R.then(U=>E.next(U))}}})}static \u0275fac=function(r){return new(r||t)(ie(Ov),ie(Vv,8),ie(_o),ie(Tt),ie(P2),ie(V2,8),ie(L2,8),ie(F2,8),ie(U2,8),ie(B2,8),ie(j2,8),ie(S2,8))};static \u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),Ree=(()=>{class t{constructor(){Ba.Z.registerVersion("angularfire",Jb.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=cr({type:t});static \u0275inj=ur({providers:[yc]})}return t})(),e0=(()=>{class t{signInWithEmailPassword(){throw new Error("Method not implemented.")}constructor(n){this.afs=n}signInWithGoogle(){return this.afs.signInWithPopup(new DJ)}registerWithEmailPassword(n){return this.afs.createUserWithEmailAndPassword(n.email,n.password)}loginWithEmailPassword(n){return this.afs.signInWithEmailAndPassword(n.email,n.password)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(yc))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Pee=(()=>{class t{constructor(n,r){this.router=n,this.authService=r,this.hide=!0,this.passwordControl=new Po("",[Ro.required]),this.loginForm=new fp({username:new Po("",[Ro.required,Ro.email]),password:new Po("",[Ro.required])})}ngOnInit(){}loginWithEmailPassword(){console.log(this.loginForm.value);const n=Object.assign(this.loginForm.value,{email:this.loginForm.value.username});this.authService.loginWithEmailPassword(n).then(r=>{this.router.navigateByUrl("home"),window.alert("Login Successful")}).catch(r=>{console.error(r),window.alert("An error has occured: "+r)})}static#e=this.\u0275fac=function(r){return new(r||t)(X(Qr),X(e0))};static#t=this.\u0275cmp=Un({type:t,selectors:[["app-login"]],decls:29,vars:2,consts:[["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"bg-light","d-flex","align-items-center","justify-content-center",2,"height","80vh"],[1,"card","p-5",2,"width","400px"],[1,"text-center","mb-4"],[3,"formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["formControlName","username","type","email","id","email","required","","placeholder","Enter Username or Email",1,"form-control"],["for","password",1,"form-label"],["formControlName","password","type","password","id","password","required","","placeholder","Enter your password",1,"form-control"],[1,"mb-3","text-center"],[1,"btn","btn-primary",3,"disabled","click"],["type","submit",1,"btn","btn-link"],[1,"text-center"],["routerLink","/register","routerLinkActive","active","ariaCurrentWhenActive","page",1,"btn","btn-link"]],template:function(r,i){1&r&&(me(0,"head"),Xn(1,"meta",0)(2,"meta",1),me(3,"title"),Ce(4,"Login Page"),he()(),me(5,"div",2)(6,"div",3)(7,"h2",4),Ce(8,"Login"),he(),me(9,"form",5)(10,"div",6)(11,"label",7),Ce(12,"Username or Email:"),he(),Xn(13,"input",8),he(),me(14,"div",6)(15,"label",9),Ce(16,"Password:"),he(),Xn(17,"input",10),he(),me(18,"div",11)(19,"button",12),qr("click",function(){return i.loginWithEmailPassword()}),Ce(20,"Login"),he()(),me(21,"div",11)(22,"button",13),Ce(23,"Forgot Password"),he()()(),me(24,"div",14)(25,"div"),Ce(26," Don't have an account yet? "),he(),me(27,"button",15),Ce(28,"Sign Up"),he()()()()),2&r&&(Eo(9),To("formGroup",i.loginForm),Eo(10),To("disabled",i.loginForm.invalid))},dependencies:[Mo,lc,Zy,lp,ZA,Uy,yp,_p,Ky]})}return t})(),H2=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Un({type:t,selectors:[["app-not-found"]],decls:4,vars:0,consts:[[1,"position-absolute","top-50","start-50","translate-middle"],["src","../../assets/404_image.png","alt","",2,"height","10em"]],template:function(r,i){1&r&&(me(0,"div",0)(1,"h1"),Ce(2,"Ooops, looks like the page you are looking for is not here..."),he(),Xn(3,"img",1),he())}})}return t})();function t0(){return B((t,e)=>{let n,r=!1;t.subscribe(pe(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}var fe,Nee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gs={},n0=n0||{},Ge=Nee||self;function Lv(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Kp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var r0="closure_uid_"+(1e9*Math.random()>>>0),xee=0;function kee(t,e,n){return t.call.apply(t.bind,arguments)}function Oee(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Pr(t,e,n){return(Pr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kee:Oee).apply(null,arguments)}function Fv(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function tr(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ja(){this.s=this.s,this.o=this.o}ja.prototype.s=!1,ja.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Mee(t){Object.prototype.hasOwnProperty.call(t,r0)&&t[r0]||(t[r0]=++xee)}(this)},ja.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const G2=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function s0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function q2(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Lv(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Nr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Nr.prototype.h=function(){this.defaultPrevented=!0};var Lee=function(){if(!Ge.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};Ge.addEventListener("test",n,e),Ge.removeEventListener("test",n,e)}catch{}return t}();function Qp(t){return/^[\s\xa0]*$/.test(t)}function Uv(){var t=Ge.navigator;return t&&(t=t.userAgent)?t:""}function Zs(t){return-1!=Uv().indexOf(t)}function o0(t){return o0[" "](t),t}o0[" "]=function(){};var u0,t,Uee=Zs("Opera"),Md=Zs("Trident")||Zs("MSIE"),z2=Zs("Edge"),a0=z2||Md,W2=Zs("Gecko")&&!(-1!=Uv().toLowerCase().indexOf("webkit")&&!Zs("Edge"))&&!(Zs("Trident")||Zs("MSIE"))&&!Zs("Edge"),Bee=-1!=Uv().toLowerCase().indexOf("webkit")&&!Zs("Edge");function Z2(){var t=Ge.document;return t?t.documentMode:void 0}e:{var c0="",l0=(t=Uv(),W2?/rv:([^\);]+)(\)|;)/.exec(t):z2?/Edge\/([\d\.]+)/.exec(t):Md?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Bee?/WebKit\/(\S+)/.exec(t):Uee?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(l0&&(c0=l0?l0[1]:""),Md){var d0=Z2();if(null!=d0&&d0>parseFloat(c0)){u0=String(d0);break e}}u0=c0}var jee=Ge.document&&Md&&(Z2()||parseInt(u0,10))||void 0;function Yp(t,e){if(Nr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(W2){e:{try{o0(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:$ee[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Yp.$.h.call(this)}}tr(Yp,Nr);var $ee={2:"touch",3:"pen",4:"mouse"};Yp.prototype.h=function(){Yp.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Jp="closure_listenable_"+(1e6*Math.random()|0),Hee=0;function Gee(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Hee,this.fa=this.ia=!1}function Bv(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function f0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Q2(t){const e={};for(const n in t)e[n]=t[n];return e}const Y2="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J2(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<Y2.length;s++)n=Y2[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function jv(t){this.src=t,this.g={},this.h=0}function p0(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=G2(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Bv(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function g0(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}jv.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=g0(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new Gee(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var m0="closure_lm_"+(1e6*Math.random()|0),_0={};function X2(t,e,n,r,i){if(r&&r.once)return tU(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)X2(t,e[s],n,r,i);return null}return n=E0(n),t&&t[Jp]?t.O(e,n,Kp(r)?!!r.capture:!!r,i):eU(t,e,n,!1,r,i)}function eU(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Kp(i)?!!i.capture:!!i,a=v0(t);if(a||(t[m0]=a=new jv(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function zee(){const e=Wee;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Lee||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(rU(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function tU(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)tU(t,e[s],n,r,i);return null}return n=E0(n),t&&t[Jp]?t.P(e,n,Kp(r)?!!r.capture:!!r,i):eU(t,e,n,!0,r,i)}function nU(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)nU(t,e[s],n,r,i);else r=Kp(r)?!!r.capture:!!r,n=E0(n),t&&t[Jp]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=g0(s=t.g[e],n,r,i))&&(Bv(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=v0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=g0(e,n,r,i)),(n=-1<t?e[t]:null)&&y0(n))}function y0(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Jp])p0(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(rU(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=v0(e))?(p0(n,t),0==n.h&&(n.src=null,e[m0]=null)):Bv(t)}}}function rU(t){return t in _0?_0[t]:_0[t]="on"+t}function Wee(t,e){if(t.fa)t=!0;else{e=new Yp(e,this);var n=t.listener,r=t.la||t.src;t.ia&&y0(t),t=n.call(r,e)}return t}function v0(t){return(t=t[m0])instanceof jv?t:null}var I0="__closure_events_fn_"+(1e9*Math.random()>>>0);function E0(t){return"function"==typeof t?t:(t[I0]||(t[I0]=function(e){return t.handleEvent(e)}),t[I0])}function nr(){ja.call(this),this.i=new jv(this),this.S=this,this.J=null}function pr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Nr(e,t);else if(e instanceof Nr)e.target=e.target||t;else{var i=e;J2(e=new Nr(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=$v(o,r,!0,e)&&i}if(i=$v(o=e.g=t,r,!0,e)&&i,i=$v(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=$v(o=e.g=n[s],r,!1,e)&&i}function $v(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&p0(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}tr(nr,ja),nr.prototype[Jp]=!0,nr.prototype.removeEventListener=function(t,e,n,r){nU(this,t,e,n,r)},nr.prototype.N=function(){if(nr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Bv(n[r]);delete t.g[e],t.h--}}this.J=null},nr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},nr.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var w0=Ge.JSON.stringify;function Kee(){var t=T0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var iU=new class Zee{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Yee,t=>t.reset());class Yee{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Jee(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Xee(t){Ge.setTimeout(()=>{throw t},0)}let Xp,eg=!1,T0=new class Qee{constructor(){this.h=this.g=null}add(e,n){const r=iU.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},sU=()=>{const t=Ge.Promise.resolve(void 0);Xp=()=>{t.then(ete)}};var ete=()=>{for(var t;t=Kee();){try{t.h.call(t.g)}catch(n){Xee(n)}var e=iU;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}eg=!1};function Hv(t,e){nr.call(this),this.h=t||1,this.g=e||Ge,this.j=Pr(this.qb,this),this.l=Date.now()}function A0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function C0(t,e,n){if("function"==typeof t)n&&(t=Pr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Pr(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ge.setTimeout(t,e||0)}function oU(t){t.g=C0(()=>{t.g=null,t.i&&(t.i=!1,oU(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}tr(Hv,nr),(fe=Hv.prototype).ga=!1,fe.T=null,fe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),pr(this,"tick"),this.ga&&(A0(this),this.start()))}},fe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fe.N=function(){Hv.$.N.call(this),A0(this),delete this.g};class tte extends ja{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:oU(this)}N(){super.N(),this.g&&(Ge.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tg(t){ja.call(this),this.h=t,this.g={}}tr(tg,ja);var aU=[];function uU(t,e,n,r){Array.isArray(n)||(n&&(aU[0]=n.toString()),n=aU);for(var i=0;i<n.length;i++){var s=X2(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function cU(t){f0(t.g,function(e,n){this.g.hasOwnProperty(n)&&y0(e)},t),t.g={}}function Gv(){this.g=!0}function xd(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ste(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return w0(n)}catch{return e}}(t,n)+(r?" "+r:"")})}tg.prototype.N=function(){tg.$.N.call(this),cU(this)},tg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gv.prototype.Ea=function(){this.g=!1},Gv.prototype.info=function(){};var vc={},lU=null;function qv(){return lU=lU||new nr}function dU(t){Nr.call(this,vc.Ta,t)}function ng(t){const e=qv();pr(e,new dU(e))}function hU(t,e){Nr.call(this,vc.STAT_EVENT,t),this.stat=e}function Yr(t){const e=qv();pr(e,new hU(e,t))}function fU(t,e){Nr.call(this,vc.Ua,t),this.size=e}function rg(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ge.setTimeout(function(){t()},e)}vc.Ta="serverreachability",tr(dU,Nr),vc.STAT_EVENT="statevent",tr(hU,Nr),vc.Ua="timingevent",tr(fU,Nr);var zv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},pU={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function D0(){}function mU(){}D0.prototype.h=null;var R0,ig={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function b0(){Nr.call(this,"d")}function S0(){Nr.call(this,"c")}function Wv(){}function sg(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new tg(this),this.P=ote,this.V=new Hv(t=a0?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new _U}function _U(){this.i=null,this.g="",this.h=!1}tr(b0,Nr),tr(S0,Nr),tr(Wv,D0),Wv.prototype.g=function(){return new XMLHttpRequest},Wv.prototype.i=function(){return{}},R0=new Wv;var ote=45e3,yU={},P0={};function N0(t,e,n){t.L=1,t.A=Yv(Uo(e)),t.u=n,t.S=!0,vU(t,null)}function vU(t,e){t.G=Date.now(),og(t),t.B=Uo(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),RU(n.i,"t",r),t.o=0,n=t.l.J,t.h=new _U,t.g=XU(t.l,n?e:null,!t.u),0<t.O&&(t.M=new tte(Pr(t.Pa,t,t.g),t.O)),uU(t.U,t.g,"readystatechange",t.nb),e=t.I?Q2(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ng(),function nte(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var d=a[u].split("=");if(1<d.length){var f=d[0];d=d[1];var g=f.split("_");o=2<=g.length&&"type"==g[1]?o+(f+"=")+d+"&":o+(f+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.v,t.B,t.m,t.W,t.u)}function IU(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function EU(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=ate(t,n),i==P0){4==e&&(t.s=4,Yr(14),r=!1),xd(t.j,t.m,null,"[Incomplete Response]");break}if(i==yU){t.s=4,Yr(15),xd(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}xd(t.j,t.m,i,null),M0(t,i)}IU(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,Yr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),U0(e),e.M=!0,Yr(11))):(xd(t.j,t.m,n,"[Invalid Chunked Response]"),Ic(t),ag(t))}function ate(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?P0:(n=Number(e.substring(n,r)),isNaN(n)?yU:(r+=1)+n>e.length?P0:(e=e.slice(r,r+n),t.o=r+n,e))}function og(t){t.Y=Date.now()+t.P,wU(t,t.P)}function wU(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=rg(Pr(t.lb,t),e)}function Zv(t){t.C&&(Ge.clearTimeout(t.C),t.C=null)}function ag(t){0==t.l.H||t.J||KU(t.l,t)}function Ic(t){Zv(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,A0(t.V),cU(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function M0(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||x0(n.i,t)))if(!t.K&&x0(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;rI(n),tI(n)}F0(n),Yr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=rg(Pr(n.ib,n),6e3));if(1>=MU(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else wc(n,11)}else if((t.K||n.g==t)&&rI(n),!Qp(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let d=i[e];if(n.V=d[0],d=d[1],2==n.H)if("c"==d[0]){n.K=d[1],n.pa=d[2];const f=d[3];null!=f&&(n.ra=f,n.l.info("VER="+n.ra));const g=d[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const _=d[5];null!=_&&"number"==typeof _&&0<_&&(n.L=r=1.5*_,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const E=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(k0(s,s.h),s.h=null))}if(r.F){const A=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;A&&(r.Da=A,Zt(r.I,r.F,A))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=JU(r,r.J?r.pa:null,r.Y),o.K){xU(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(Zv(a),og(a)),r.g=o}else WU(r);0<n.j.length&&nI(n)}else"stop"!=d[0]&&"close"!=d[0]||wc(n,7);else 3==n.H&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?wc(n,7):L0(n):"noop"!=d[0]&&n.h&&n.h.Aa(d),n.A=0)}ng()}catch{}}function TU(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Lv(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function cte(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Lv(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function ute(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Lv(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(fe=sg.prototype).setTimeout=function(t){this.P=t},fe.nb=function(t){t=t.target;const e=this.M;e&&3==Ks(t)?e.l():this.Pa(t)},fe.Pa=function(t){try{if(t==this.g)e:{const f=Ks(this.g);var e=this.g.Ia();if(this.g.da(),!(3>f)&&(3!=f||a0||this.g&&(this.h.h||this.g.ja()||jU(this.g)))){this.J||4!=f||7==e||ng(),Zv(this);var n=this.g.da();this.ca=n;t:if(IU(this)){var r=jU(this.g);t="";var i=r.length,s=4==Ks(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ic(this),ag(this);var o="";break t}this.h.i=new Ge.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function rte(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,f,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qp(a)){var d=a;break t}}d=null}if(!(n=d)){this.i=!1,this.s=3,Yr(12),Ic(this),ag(this);break e}xd(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,M0(this,n)}this.S?(EU(this,f,o),a0&&this.i&&3==f&&(uU(this.U,this.V,"tick",this.mb),this.V.start())):(xd(this.j,this.m,o,null),M0(this,o)),4==f&&Ic(this),this.i&&!this.J&&(4==f?KU(this.l,this):(this.i=!1,og(this)))}else(function bte(t){const e={};t=(t.g&&2<=Ks(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Qp(t[r]))continue;var n=Jee(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function qee(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Yr(12)):(this.s=0,Yr(13)),Ic(this),ag(this)}}}catch{}},fe.mb=function(){if(this.g){var t=Ks(this.g),e=this.g.ja();this.o<e.length&&(Zv(this),EU(this,t,e),this.i&&4!=t&&og(this))}},fe.cancel=function(){this.J=!0,Ic(this)},fe.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function ite(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(ng(),Yr(17)),Ic(this),this.s=2,ag(this)):wU(this,this.Y-t)};var AU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ec(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ec){this.h=t.h,Kv(this,t.j),this.s=t.s,this.g=t.g,Qv(this,t.m),this.l=t.l;var e=t.i,n=new lg;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),CU(this,n),this.o=t.o}else t&&(e=String(t).match(AU))?(this.h=!1,Kv(this,e[1]||"",!0),this.s=ug(e[2]||""),this.g=ug(e[3]||"",!0),Qv(this,e[4]),this.l=ug(e[5]||"",!0),CU(this,e[6]||"",!0),this.o=ug(e[7]||"")):(this.h=!1,this.i=new lg(null,this.h))}function Uo(t){return new Ec(t)}function Kv(t,e,n){t.j=n?ug(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Qv(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function CU(t,e,n){e instanceof lg?(t.i=e,function mte(t,e){e&&!t.j&&($a(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(bU(this,r),RU(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=cg(e,pte)),t.i=new lg(e,t.h))}function Zt(t,e,n){t.i.set(e,n)}function Yv(t){return Zt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ug(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function cg(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,dte),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function dte(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ec.prototype.toString=function(){var t=[],e=this.j;e&&t.push(cg(e,DU,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(cg(e,DU,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(cg(n,"/"==n.charAt(0)?fte:hte,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",cg(n,gte)),t.join("")};var DU=/[#\/\?@]/g,hte=/[#\?:]/g,fte=/[#\?]/g,pte=/[#\?@]/g,gte=/#/g;function lg(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function $a(t){t.g||(t.g=new Map,t.h=0,t.i&&function lte(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function bU(t,e){$a(t),e=kd(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function SU(t,e){return $a(t),e=kd(t,e),t.g.has(e)}function RU(t,e,n){bU(t,e),0<n.length&&(t.i=null,t.g.set(kd(t,e),s0(n)),t.h+=n.length)}function kd(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function PU(t){this.l=t||yte,t=Ge.PerformanceNavigationTiming?0<(t=Ge.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ge.g&&Ge.g.Ka&&Ge.g.Ka()&&Ge.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(fe=lg.prototype).add=function(t,e){$a(this),this.i=null,t=kd(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},fe.forEach=function(t,e){$a(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},fe.ta=function(){$a(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},fe.Z=function(t){$a(this);let e=[];if("string"==typeof t)SU(this,t)&&(e=e.concat(this.g.get(kd(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},fe.set=function(t,e){return $a(this),this.i=null,SU(this,t=kd(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},fe.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var yte=10;function NU(t){return!!t.h||!!t.g&&t.g.size>=t.j}function MU(t){return t.h?1:t.g?t.g.size:0}function x0(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function k0(t,e){t.g?t.g.add(e):t.h=e}function xU(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function kU(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return s0(t.i)}PU.prototype.cancel=function(){if(this.i=kU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var vte=class{stringify(t){return Ge.JSON.stringify(t,void 0)}parse(t){return Ge.JSON.parse(t,void 0)}};function Ite(){this.g=new vte}function Ete(t,e,n){const r=n||"";try{TU(t,function(i,s){let o=i;Kp(i)&&(o=w0(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Jv(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function dg(t){this.l=t.ec||null,this.j=t.ob||!1}function Xv(t,e){nr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=O0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tr(dg,D0),dg.prototype.g=function(){return new Xv(this.l,this.j)},dg.prototype.i=function(t){return function(){return t}}({}),tr(Xv,nr);var O0=0;function OU(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function hg(t){t.readyState=4,t.l=null,t.j=null,t.A=null,fg(t)}function fg(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(fe=Xv.prototype).open=function(t,e){if(this.readyState!=O0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,fg(this)},fe.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Ge).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hg(this)),this.readyState=O0},fe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,fg(this)),this.g&&(this.readyState=3,fg(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ge.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;OU(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},fe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?hg(this):fg(this),3==this.readyState&&OU(this)}},fe.Za=function(t){this.g&&(this.response=this.responseText=t,hg(this))},fe.Ya=function(t){this.g&&(this.response=t,hg(this))},fe.ka=function(){this.g&&hg(this)},fe.setRequestHeader=function(t,e){this.v.append(t,e)},fe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},fe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Xv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Tte=Ge.JSON.parse;function fn(t){nr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=VU,this.L=this.M=!1}tr(fn,nr);var VU="",Ate=/^https?$/i,Cte=["POST","PUT"];function LU(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,FU(t),eI(t)}function FU(t){t.F||(t.F=!0,pr(t,"complete"),pr(t,"error"))}function UU(t){if(t.h&&typeof n0<"u"&&(!t.C[1]||4!=Ks(t)||2!=t.da()))if(t.v&&4==Ks(t))C0(t.La,0,t);else if(pr(t,"readystatechange"),4==Ks(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(AU)[1]||null;!i&&Ge.self&&Ge.self.location&&(i=Ge.self.location.protocol.slice(0,-1)),r=!Ate.test(i?i.toLowerCase():"")}n=r}if(n)pr(t,"complete"),pr(t,"success");else{t.m=6;try{var s=2<Ks(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",FU(t)}}finally{eI(t)}}}function eI(t,e){if(t.g){BU(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||pr(t,"ready");try{n.onreadystatechange=r}catch{}}}function BU(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Ge.clearTimeout(t.A),t.A=null)}function Ks(t){return t.g?t.g.readyState:0}function jU(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case VU:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function $U(t){let e="";return f0(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function V0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=$U(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Zt(t,e,n))}function pg(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function HU(t){this.Ga=0,this.j=[],this.l=new Gv,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=pg("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=pg("baseRetryDelayMs",5e3,t),this.hb=pg("retryDelaySeedMs",1e4,t),this.eb=pg("forwardChannelMaxRetries",2,t),this.xa=pg("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new PU(t&&t.concurrentRequestLimit),this.Ja=new Ite,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function L0(t){if(GU(t),3==t.H){var e=t.W++,n=Uo(t.I);if(Zt(n,"SID",t.K),Zt(n,"RID",e),Zt(n,"TYPE","terminate"),gg(t,n),(e=new sg(t,t.l,e)).L=2,e.A=Yv(Uo(n)),n=!1,Ge.navigator&&Ge.navigator.sendBeacon)try{n=Ge.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Ge.Image&&((new Image).src=e.A,n=!0),n||(e.g=XU(e.l,null),e.g.ha(e.A)),e.G=Date.now(),og(e)}YU(t)}function tI(t){t.g&&(U0(t),t.g.cancel(),t.g=null)}function GU(t){tI(t),t.u&&(Ge.clearTimeout(t.u),t.u=null),rI(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Ge.clearTimeout(t.m),t.m=null)}function nI(t){if(!NU(t.i)&&!t.m){t.m=!0;var e=t.Na;Xp||sU(),eg||(Xp(),eg=!0),T0.add(e,t),t.C=0}}function qU(t,e){var n;n=e?e.m:t.W++;const r=Uo(t.I);Zt(r,"SID",t.K),Zt(r,"RID",n),Zt(r,"AID",t.V),gg(t,r),t.o&&t.s&&V0(r,t.o,t.s),n=new sg(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=zU(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),k0(t.i,n),N0(n,r,e)}function gg(t,e){t.na&&f0(t.na,function(n,r){Zt(e,r,n)}),t.h&&TU({},function(n,r){Zt(e,r,n)})}function zU(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Pr(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let d=i[u].g;const f=i[u].map;if(d-=s,0>d)s=Math.max(0,i[u].g-100),a=!1;else try{Ete(f,o,"req"+d+"_")}catch{r&&r(f)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function WU(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Xp||sU(),eg||(Xp(),eg=!0),T0.add(e,t),t.A=0}}function F0(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=rg(Pr(t.Ma,t),QU(t,t.A)),t.A++,0))}function U0(t){null!=t.B&&(Ge.clearTimeout(t.B),t.B=null)}function ZU(t){t.g=new sg(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Uo(t.wa);Zt(e,"RID","rpc"),Zt(e,"SID",t.K),Zt(e,"AID",t.V),Zt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Zt(e,"TO",t.qa),Zt(e,"TYPE","xmlhttp"),gg(t,e),t.o&&t.s&&V0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Yv(Uo(e)),n.u=null,n.S=!0,vU(n,t)}function rI(t){null!=t.v&&(Ge.clearTimeout(t.v),t.v=null)}function KU(t,e){var n=null;if(t.g==e){rI(t),U0(t),t.g=null;var r=2}else{if(!x0(t.i,e))return;n=e.F,xU(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;pr(r=qv(),new fU(r,n)),nI(t)}else WU(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function Ste(t,e){return!(MU(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=rg(Pr(t.Na,t,e),QU(t,t.C)),t.C++,0)))}(t,e)||2==r&&F0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:wc(t,5);break;case 4:wc(t,10);break;case 3:wc(t,6);break;default:wc(t,2)}}function QU(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function wc(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Pr(t.pb,t);n||(n=new Ec("//www.google.com/images/cleardot.gif"),Ge.location&&"http"==Ge.location.protocol||Kv(n,"https"),Yv(n)),function wte(t,e){const n=new Gv;if(Ge.Image){const r=new Image;r.onload=Fv(Jv,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Fv(Jv,n,r,"TestLoadImage: error",!1,e),r.onabort=Fv(Jv,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fv(Jv,n,r,"TestLoadImage: timeout",!1,e),Ge.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Yr(2);t.H=0,t.h&&t.h.za(e),YU(t),GU(t)}function YU(t){if(t.H=0,t.ma=[],t.h){const e=kU(t.i);(0!=e.length||0!=t.j.length)&&(q2(t.ma,e),q2(t.ma,t.j),t.i.i.length=0,s0(t.j),t.j.length=0),t.h.ya()}}function JU(t,e,n){var r=n instanceof Ec?Uo(n):new Ec(n);if(""!=r.g)e&&(r.g=e+"."+r.g),Qv(r,r.m);else{var i=Ge.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ec(null);r&&Kv(s,r),e&&(s.g=e),i&&Qv(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&Zt(r,n,e),Zt(r,"VER",t.ra),gg(t,r),r}function XU(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new fn(t.Ha&&!t.va?new dg({ob:n}):t.va)).Oa(t.J),e}function eB(){}function iI(){if(Md&&!(10<=Number(jee)))throw Error("Environmental error: no available transport.")}function Ai(t,e){nr.call(this),this.g=new HU(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Qp(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Qp(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Od(this)}function tB(t){b0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function nB(){S0.call(this),this.status=1}function Od(t){this.g=t}function ms(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function B0(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function bt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(fe=fn.prototype).Oa=function(t){this.M=t},fe.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():R0.g(),this.C=function gU(t){return t.h||(t.h=t.i())}(this.u?this.u:R0),this.g.onreadystatechange=Pr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void LU(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=Ge.FormData&&t instanceof Ge.FormData,!(0<=G2(Cte,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{BU(this),0<this.B&&((this.L=function Dte(t){return Md&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pr(this.ua,this)):this.A=C0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){LU(this,s)}},fe.ua=function(){typeof n0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pr(this,"timeout"),this.abort(8))},fe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,pr(this,"complete"),pr(this,"abort"),eI(this))},fe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),eI(this,!0)),fn.$.N.call(this)},fe.La=function(){this.s||(this.G||this.v||this.l?UU(this):this.kb())},fe.kb=function(){UU(this)},fe.isActive=function(){return!!this.g},fe.da=function(){try{return 2<Ks(this)?this.g.status:-1}catch{return-1}},fe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},fe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Tte(e)}},fe.Ia=function(){return this.m},fe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(fe=HU.prototype).ra=8,fe.H=1,fe.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new sg(this,this.l,t);let s=this.s;if(this.U&&(s?(s=Q2(s),J2(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=zU(this,i,e),Zt(n=Uo(this.I),"RID",t),Zt(n,"CVER",22),this.F&&Zt(n,"X-HTTP-Session-Id",this.F),gg(this,n),s&&(this.O?e="headers="+encodeURIComponent(String($U(s)))+"&"+e:this.o&&V0(n,this.o,s)),k0(this.i,i),this.bb&&Zt(n,"TYPE","init"),this.P?(Zt(n,"$req",e),Zt(n,"SID","null"),i.aa=!0,N0(i,n,null)):N0(i,n,e),this.H=2}}else 3==this.H&&(t?qU(this,t):0==this.j.length||NU(this.i)||qU(this))},fe.Ma=function(){if(this.u=null,ZU(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=rg(Pr(this.jb,this),t)}},fe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Yr(10),tI(this),ZU(this))},fe.ib=function(){null!=this.v&&(this.v=null,tI(this),F0(this),Yr(19))},fe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Yr(2)):(this.l.info("Failed to ping google.com"),Yr(1))},fe.isActive=function(){return!!this.h&&this.h.isActive(this)},(fe=eB.prototype).Ba=function(){},fe.Aa=function(){},fe.za=function(){},fe.ya=function(){},fe.isActive=function(){return!0},fe.Va=function(){},iI.prototype.g=function(t,e){return new Ai(t,e)},tr(Ai,nr),Ai.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Yr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=JU(t,null,t.Y),nI(t)},Ai.prototype.close=function(){L0(this.g)},Ai.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=w0(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&nI(e)},Ai.prototype.N=function(){this.g.h=null,delete this.j,L0(this.g),delete this.g,Ai.$.N.call(this)},tr(tB,b0),tr(nB,S0),tr(Od,eB),Od.prototype.Ba=function(){pr(this.g,"a")},Od.prototype.Aa=function(t){pr(this.g,new tB(t))},Od.prototype.za=function(t){pr(this.g,new nB)},Od.prototype.ya=function(){pr(this.g,"b")},tr(ms,function Rte(){this.blockSize=-1}),ms.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ms.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)B0(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){B0(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){B0(this,r),i=0;break}}this.h=i,this.i+=e},ms.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var Pte={};function j0(t){return-128<=t&&128>t?function Fee(t,e){var n=Pte;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new bt([0|e],0>e?-1:0)}):new bt([0|t],0>t?-1:0)}function Qs(t){if(isNaN(t)||!isFinite(t))return Vd;if(0>t)return gr(Qs(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=$0;return new bt(e,0)}var $0=4294967296,Vd=j0(0),H0=j0(1),iB=j0(16777216);function Bo(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Qi(t){return-1==t.h}function gr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new bt(n,~t.h).add(H0)}function sI(t,e){return t.add(gr(e))}function oI(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function mg(t,e){this.g=t,this.h=e}function aI(t,e){if(Bo(e))throw Error("division by zero");if(Bo(t))return new mg(Vd,Vd);if(Qi(t))return e=aI(gr(t),e),new mg(gr(e.g),gr(e.h));if(Qi(e))return e=aI(t,gr(e)),new mg(gr(e.g),e.h);if(30<t.g.length){if(Qi(t)||Qi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=H0,r=e;0>=r.X(t);)n=sB(n),r=sB(r);var i=Ld(n,1),s=Ld(r,1);for(r=Ld(r,2),n=Ld(n,2);!Bo(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ld(r,1),n=Ld(n,1)}return e=sI(t,i.R(e)),new mg(i,e)}for(i=Vd;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Qs(n)).R(e);Qi(o)||0<o.X(t);)o=(s=Qs(n-=r)).R(e);Bo(s)&&(s=H0),i=i.add(s),t=sI(t,o)}return new mg(i,t)}function sB(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new bt(n,t.h)}function Ld(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new bt(i,t.h)}(fe=bt.prototype).ea=function(){if(Qi(this))return-gr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:$0+r)*e,e*=$0}return t},fe.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Bo(this))return"0";if(Qi(this))return"-"+gr(this).toString(t);for(var e=Qs(Math.pow(t,6)),n=this,r="";;){var i=aI(n,e).g,s=((0<(n=sI(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Bo(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},fe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},fe.X=function(t){return Qi(t=sI(this,t))?-1:Bo(t)?0:1},fe.abs=function(){return Qi(this)?gr(this):this},fe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new bt(n,-2147483648&n[n.length-1]?-1:0)},fe.R=function(t){if(Bo(this)||Bo(t))return Vd;if(Qi(this))return Qi(t)?gr(this).R(gr(t)):gr(gr(this).R(t));if(Qi(t))return gr(this.R(gr(t)));if(0>this.X(iB)&&0>t.X(iB))return Qs(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,oI(n,2*r+2*i),n[2*r+2*i+1]+=s*u,oI(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,oI(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,oI(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new bt(n,0)},fe.gb=function(t){return aI(this,t).h},fe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new bt(n,this.h&t.h)},fe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new bt(n,this.h|t.h)},fe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new bt(n,this.h^t.h)},iI.prototype.createWebChannel=iI.prototype.g,Ai.prototype.send=Ai.prototype.u,Ai.prototype.open=Ai.prototype.m,Ai.prototype.close=Ai.prototype.close,zv.NO_ERROR=0,zv.TIMEOUT=8,zv.HTTP_ERROR=6,pU.COMPLETE="complete",mU.EventType=ig,ig.OPEN="a",ig.CLOSE="b",ig.ERROR="c",ig.MESSAGE="d",nr.prototype.listen=nr.prototype.O,fn.prototype.listenOnce=fn.prototype.P,fn.prototype.getLastError=fn.prototype.Sa,fn.prototype.getLastErrorCode=fn.prototype.Ia,fn.prototype.getStatus=fn.prototype.da,fn.prototype.getResponseJson=fn.prototype.Wa,fn.prototype.getResponseText=fn.prototype.ja,fn.prototype.send=fn.prototype.ha,fn.prototype.setWithCredentials=fn.prototype.Oa,ms.prototype.digest=ms.prototype.l,ms.prototype.reset=ms.prototype.reset,ms.prototype.update=ms.prototype.j,bt.prototype.add=bt.prototype.add,bt.prototype.multiply=bt.prototype.R,bt.prototype.modulo=bt.prototype.gb,bt.prototype.compare=bt.prototype.X,bt.prototype.toNumber=bt.prototype.ea,bt.prototype.toString=bt.prototype.toString,bt.prototype.getBits=bt.prototype.D,bt.fromNumber=Qs,bt.fromString=function rB(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return gr(rB(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Qs(Math.pow(e,8)),r=Vd,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Qs(Math.pow(e,s)),r=r.R(s).add(Qs(o))):r=(r=r.R(n)).add(Qs(o))}return r};var Nte=gs.createWebChannelTransport=function(){return new iI},Mte=gs.getStatEventTarget=function(){return qv()},G0=gs.ErrorCode=zv,xte=gs.EventType=pU,kte=gs.Event=vc,oB=gs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},uI=(gs.FetchXmlHttpFactory=dg,gs.WebChannel=mU),Ote=gs.XhrIo=fn,Vte=gs.Md5=ms,Fd=gs.Integer=bt;const aB="@firebase/firestore";class rr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rr.UNAUTHENTICATED=new rr(null),rr.GOOGLE_CREDENTIALS=new rr("google-credentials-uid"),rr.FIRST_PARTY=new rr("first-party-uid"),rr.MOCK_USER=new rr("mock-user");let Ud="10.7.0";const Ha=new ci.Yd("@firebase/firestore");function Bd(){return Ha.logLevel}function te(t,...e){if(Ha.logLevel<=ci.in.DEBUG){const n=e.map(q0);Ha.debug(`Firestore (${Ud}): ${t}`,...n)}}function En(t,...e){if(Ha.logLevel<=ci.in.ERROR){const n=e.map(q0);Ha.error(`Firestore (${Ud}): ${t}`,...n)}}function di(t,...e){if(Ha.logLevel<=ci.in.WARN){const n=e.map(q0);Ha.warn(`Firestore (${Ud}): ${t}`,...n)}}function q0(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function ye(t="Unexpected state"){const e=`FIRESTORE (${Ud}) INTERNAL ASSERTION FAILED: `+t;throw En(e),new Error(e)}function Se(t,e){t||ye()}function ae(t,e){return t}const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends be.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class uB{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ute{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rr.UNAUTHENTICATED))}shutdown(){}}class Bte{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class jte{constructor(e){this.t=e,this.currentUser=rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Zn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,P.Z)(function*(){yield d.promise,yield s(r.currentUser)}))},u=d=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Zn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se("string"==typeof r.accessToken),new uB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Se(null===e||"string"==typeof e),new rr(e)}}class $te{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=rr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Hte{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new $te(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gte{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se("string"==typeof n.token),this.R=n.token,new cB(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function qte(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class lB{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=qte(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function jd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function dB(t){return t+"\0"}class rn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rn.fromMillis(Date.now())}static fromDate(e){return rn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new rn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Re(e)}static min(){return new Re(new rn(0,0))}static max(){return new Re(new rn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class _g{constructor(e,n,r){void 0===n?n=0:n>e.length&&ye(),void 0===r?r=e.length-n:r>e.length-n&&ye(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===_g.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _g?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ft extends _g{construct(e,n,r){return new ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const zte=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends _g{construct(e,n,r){return new Kt(e,n,r)}static isValidIdentifier(e){return zte.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new J(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new J(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new J(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new J(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(n)}static emptyPath(){return new Kt([])}}class ce{constructor(e){this.path=e}static fromPath(e){return new ce(ft.fromString(e))}static fromName(e){return new ce(ft.fromString(e).popFirst(5))}static empty(){return new ce(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ft.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new ft(e.slice()))}}class $d{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function z0(t){return t.fields.find(e=>2===e.kind)}function Tc(t){return t.fields.filter(e=>2!==e.kind)}$d.UNKNOWN_ID=-1;class Ac{constructor(e,n){this.fieldPath=e,this.kind=n}}class Hd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Hd(0,Ci.min())}}function hB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Re.fromTimestamp(1e9===r?new rn(n+1,0):new rn(n,r));return new Ci(i,ce.empty(),e)}function fB(t){return new Ci(t.readTime,t.key,-1)}class Ci{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ci(Re.min(),ce.empty(),-1)}static max(){return new Ci(Re.max(),ce.empty(),-1)}}function W0(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ce.comparator(t.documentKey,e.documentKey),0!==n?n:je(t.largestBatchId,e.largestBatchId))}const pB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ga(t){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,P.Z)(function*(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==pB)throw t;te("LocalStore","Unexpectedly lost primary lease")}),Z0.apply(this,arguments)}class x{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new x((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof x?n:x.resolve(n)}catch(n){return x.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):x.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):x.reject(n)}static resolve(e){return new x((n,r)=>{n(e)})}static reject(e){return new x((n,r)=>{r(e)})}static waitFor(e){return new x((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=x.resolve(!1);for(const r of e)n=n.next(i=>i?x.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new x((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new x((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class cI{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Zn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new yg(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=K0(r.target.error);this.V.reject(new yg(e,i))}}static open(e,n,r,i){try{return new cI(n,e.transaction(i,r))}catch(s){throw new yg(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(te("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Qte(n)}}class _s{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===_s.S((0,be.z$)())&&En("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return te("SimpleDb","Removing database:",e),Cc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,be.hl)())return!1;if(_s.C())return!0;const e=(0,be.z$)(),n=_s.S(e),r=0<n&&n<10,i=_s.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,P.Z)(function*(){return n.db||(te("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new yg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new J(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new J(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new yg(e,a))},s.onupgradeneeded=o=>{te("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.p.N(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{te("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,P.Z)(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.O(e);const u=cI.open(s.db,e,o?"readonly":"readwrite",r),d=i(u).next(f=>(u.g(),f)).catch(f=>(u.abort(f),x.reject(f))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,f="FirebaseError"!==d.name&&a<3;if(te("SimpleDb","Transaction failed with error:",d.message,"Retrying:",f),s.close(),!f)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Kte{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Cc(this.k.delete())}}class yg extends J{constructor(e,n){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function qa(t){return"IndexedDbTransactionError"===t.name}class Qte{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(te("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(te("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cc(r)}add(e){return te("SimpleDb","ADD",this.store.name,e,e),Cc(this.store.add(e))}get(e){return Cc(this.store.get(e)).next(n=>(void 0===n&&(n=null),te("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return te("SimpleDb","DELETE",this.store.name,e),Cc(this.store.delete(e))}count(){return te("SimpleDb","COUNT",this.store.name),Cc(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new x((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new x((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){te("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new x((r,i)=>{n.onerror=s=>{const o=K0(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new x((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new Kte(a),d=n(a.primaryKey,a.value,u);if(d instanceof x){const f=d.catch(g=>(u.done(),x.reject(g)));r.push(f)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>x.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Cc(t){return new x((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=K0(r.target.error);n(i)}})}let mB=!1;function K0(t){const e=_s.S((0,be.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mB||(mB=!0,setTimeout(()=>{throw r},0)),r}}return t}class Yte{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;te("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,P.Z)(function*(){n.task=null;try{te("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){qa(r)?te("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ga(r)}yield n.ee(6e4)}))}}class Jte{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,P.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,s=!0;return x.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return te("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(te("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=fB(s);W0(o,r)>0&&(r=o)}),new Ci(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Di=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function vg(t){return null==t}function Ig(t){return 0===t&&1/t==-1/0}function _B(t){return"number"==typeof t&&Number.isInteger(t)&&!Ig(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Mr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=yB(e)),e=Xte(t.get(n),e);return yB(e)}function Xte(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function yB(t){return t+"\x01\x01"}function Ys(t){const e=t.length;if(Se(e>=2),2===e)return Se("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ft.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&ye(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:ye()}s=o+2}return new ft(r)}const vB=["userId","batchId"];function lI(t,e){return[t,Mr(e)]}function IB(t,e,n){return[t,Mr(e),n]}const ene={},tne=["prefixPath","collectionGroup","readTime","documentId"],nne=["prefixPath","collectionGroup","documentId"],rne=["collectionGroup","readTime","prefixPath","documentId"],ine=["canonicalId","targetId"],sne=["targetId","path"],one=["path","targetId"],ane=["collectionId","parent"],une=["indexId","uid"],cne=["uid","sequenceNumber"],lne=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dne=["indexId","uid","orderedDocumentKey"],hne=["userId","collectionPath","documentId"],fne=["userId","collectionPath","largestBatchId"],pne=["userId","collectionGroup","largestBatchId"],EB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gne=[...EB,"documentOverlays"],wB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],TB=wB,mne=[...TB,"indexConfiguration","indexState","indexEntries"];class Q0 extends gB{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function ir(t,e){const n=ae(t);return _s.M(n.ae,e)}function AB(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function za(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class jt{constructor(e,n){this.comparator=e,this.root=n||mr.EMPTY}insert(e,n){return new jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mr.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dI(this.root,e,this.comparator,!1)}getReverseIterator(){return new dI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dI(this.root,e,this.comparator,!0)}}class dI{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??mr.RED,this.left=i??mr.EMPTY,this.right=s??mr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new mr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return mr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}mr.EMPTY=null,mr.RED=!0,mr.BLACK=!1,mr.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,n,r,i,s){return this}insert(e,n,r){return new mr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nt{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new DB(this.data.getIterator())}getIteratorFrom(e){return new DB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class DB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Gd(t){return t.hasNext()?t.getNext():void 0}class hi{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new hi([])}unionWith(e){let n=new Nt(Kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class bB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Kn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bB("Invalid base64 string: "+s):s}}(e);return new Kn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Kn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kn.EMPTY_BYTE_STRING=new Kn("");const yne=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wa(t){if(Se(!!t),"string"==typeof t){let e=0;const n=yne.exec(t);if(Se(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pn(t.seconds),nanos:pn(t.nanos)}}function pn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function jo(t){return"string"==typeof t?Kn.fromBase64String(t):Kn.fromUint8Array(t)}function hI(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function fI(t){const e=t.mapValue.fields.__previous_value__;return hI(e)?fI(e):e}function Eg(t){const e=Wa(t.mapValue.fields.__local_write_time__.timestampValue);return new rn(e.seconds,e.nanos)}class vne{constructor(e,n,r,i,s,o,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class Za{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Za("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}const Ka={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},pI={nullValue:"NULL_VALUE"};function Qa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hI(t)?4:NB(t)?9007199254740991:10:ye()}function Js(t,e){if(t===e)return!0;const n=Qa(t);if(n!==Qa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Eg(t).isEqual(Eg(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Wa(i.timestampValue),a=Wa(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,jo(t.bytesValue).isEqual(jo(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return pn(i.geoPointValue.latitude)===pn(s.geoPointValue.latitude)&&pn(i.geoPointValue.longitude)===pn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return pn(i.integerValue)===pn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=pn(i.doubleValue),a=pn(s.doubleValue);return o===a?Ig(o)===Ig(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return jd(t.arrayValue.values||[],e.arrayValue.values||[],Js);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(AB(o)!==AB(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Js(o[u],a[u])))return!1;return!0}(t,e);default:return ye()}var s}function wg(t,e){return void 0!==(t.values||[]).find(n=>Js(n,e))}function Ya(t,e){if(t===e)return 0;const n=Qa(t),r=Qa(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=pn(s.integerValue||s.doubleValue),u=pn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return SB(t.timestampValue,e.timestampValue);case 4:return SB(Eg(t),Eg(e));case 5:return je(t.stringValue,e.stringValue);case 6:return function(s,o){const a=jo(s),u=jo(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const f=je(a[d],u[d]);if(0!==f)return f}return je(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=je(pn(s.latitude),pn(o.latitude));return 0!==a?a:je(pn(s.longitude),pn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let d=0;d<a.length&&d<u.length;++d){const f=Ya(a[d],u[d]);if(f)return f}return je(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ka.mapValue&&o===Ka.mapValue)return 0;if(s===Ka.mapValue)return 1;if(o===Ka.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const _=je(u[g],f[g]);if(0!==_)return _;const y=Ya(a[u[g]],d[f[g]]);if(0!==y)return y}return je(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ye()}}function SB(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return je(t,e);const n=Wa(t),r=Wa(e),i=je(n.seconds,r.seconds);return 0!==i?i:je(n.nanos,r.nanos)}function qd(t){return Y0(t)}function Y0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?jo(t.bytesValue).toBase64():"referenceValue"in t?ce.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Y0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Y0(n.fields[o])}`;return i+"}"}(t.mapValue):ye()}function Dc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function J0(t){return!!t&&"integerValue"in t}function Tg(t){return!!t&&"arrayValue"in t}function RB(t){return!!t&&"nullValue"in t}function PB(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mI(t){return!!t&&"mapValue"in t}function Ag(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return za(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ag(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ag(t.arrayValue.values[n]);return e}return Object.assign({},t)}function NB(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ine(t){return"nullValue"in t?pI:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Dc(Za.empty(),ce.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ye()}function Ene(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Dc(Za.empty(),ce.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ka:ye()}function MB(t,e){const n=Ya(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function xB(t,e){const n=Ya(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class _r{constructor(e){this.value=e}static empty(){return new _r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!mI(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ag(n)}setAll(e){let n=Kt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ag(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());mI(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Js(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];mI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){za(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new _r(Ag(this.value))}}function kB(t){const e=[];return za(t.fields,(n,r)=>{const i=new Kt([n]);if(mI(r)){const s=kB(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new hi(e)}class Qt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Qt(e,0,Re.min(),Re.min(),Re.min(),_r.empty(),0)}static newFoundDocument(e,n,r,i){return new Qt(e,1,n,Re.min(),r,i,0)}static newNoDocument(e,n){return new Qt(e,2,n,Re.min(),Re.min(),_r.empty(),0)}static newUnknownDocument(e,n){return new Qt(e,3,n,Re.min(),Re.min(),_r.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ja{constructor(e,n){this.position=e,this.inclusive=n}}function OB(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?ce.comparator(ce.fromName(o.referenceValue),n.key):Ya(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function VB(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Js(t.position[n],e.position[n]))return!1;return!0}class Cg{constructor(e,n="asc"){this.field=e,this.dir=n}}function wne(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class LB{}class ut extends LB{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new Tne(e,n,r):"array-contains"===n?new Dne(e,r):"in"===n?new HB(e,r):"not-in"===n?new bne(e,r):"array-contains-any"===n?new Sne(e,r):new ut(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new Ane(e,r):new Cne(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ya(n,this.value)):null!==n&&Qa(this.value)===Qa(n)&&this.matchesComparison(Ya(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class St extends LB{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new St(e,n)}matches(e){return zd(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function zd(t){return"and"===t.op}function X0(t){return"or"===t.op}function eS(t){return FB(t)&&zd(t)}function FB(t){for(const e of t.filters)if(e instanceof St)return!1;return!0}function tS(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+qd(t.value);if(eS(t))return t.filters.map(e=>tS(e)).join(",");{const e=t.filters.map(n=>tS(n)).join(",");return`${t.op}(${e})`}}function UB(t,e){return t instanceof ut?(r=t,(i=e)instanceof ut&&r.op===i.op&&r.field.isEqual(i.field)&&Js(r.value,i.value)):t instanceof St?function(r,i){return i instanceof St&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&UB(o,i.filters[a]),!0)}(t,e):void ye();var r,i}function BB(t,e){const n=t.filters.concat(e);return St.create(n,t.op)}function jB(t){return t instanceof ut?`${(n=t).field.canonicalString()} ${n.op} ${qd(n.value)}`:t instanceof St?function(n){return n.op.toString()+" {"+n.getFilters().map(jB).join(" ,")+"}"}(t):"Filter";var n}class Tne extends ut{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class Ane extends ut{constructor(e,n){super(e,"in",n),this.keys=$B(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Cne extends ut{constructor(e,n){super(e,"not-in",n),this.keys=$B(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $B(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class Dne extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tg(n)&&wg(n.arrayValue,this.value)}}class HB extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&wg(this.value.arrayValue,n)}}class bne extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(wg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!wg(this.value.arrayValue,n)}}class Sne extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wg(this.value.arrayValue,r))}}class Rne{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function nS(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Rne(t,e,n,r,i,s,o)}function bc(t){const e=ae(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tS(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),vg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qd(r)).join(",")),e.ce=n}return e.ce}function Dg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wne(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UB(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!VB(t.startAt,e.startAt)&&VB(t.endAt,e.endAt)}function _I(t){return ce.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function yI(t,e){return t.filters.filter(n=>n instanceof ut&&n.field.isEqual(e))}function GB(t,e,n){let r=pI,i=!0;for(const s of yI(t,e)){let o=pI,a=!0;switch(s.op){case"<":case"<=":o=Ine(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=pI}MB({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];MB({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function qB(t,e,n){let r=Ka,i=!0;for(const s of yI(t,e)){let o=Ka,a=!0;switch(s.op){case">=":case">":o=Ene(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ka}xB({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];xB({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class $o{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function zB(t,e,n,r,i,s,o,a){return new $o(t,e,n,r,i,s,o,a)}function Wd(t){return new $o(t)}function WB(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function rS(t){return null!==t.collectionGroup}function Zd(t){const e=ae(t);if(null===e.le){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Nt(Kt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Cg(s,r))}),n.has(Kt.keyField().canonicalString())||e.le.push(new Cg(Kt.keyField(),r))}return e.le}function Jr(t){const e=ae(t);return e.he||(e.he=function ZB(t,e){if("F"===t.limitType)return nS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new Cg(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Ja(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ja(t.startAt.position,t.startAt.inclusive):null;return nS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Zd(t))),e.he}function iS(t,e){const n=t.filters.concat([e]);return new $o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vI(t,e,n){return new $o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bg(t,e){return Dg(Jr(t),Jr(e))&&t.limitType===e.limitType}function KB(t){return`${bc(Jr(t))}|lt:${t.limitType}`}function Kd(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>jB(i)).join(", ")}]`),vg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>qd(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>qd(i)).join(",")),`Target(${r})`}(Jr(t))}; limitType=${t.limitType})`}function Sg(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ce.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Zd(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const d=OB(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,Zd(r),i)||r.endAt&&!function(o,a,u){const d=OB(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,Zd(r),i)));var r,i}function QB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function YB(t){return(e,n)=>{let r=!1;for(const i of Zd(t)){const s=Pne(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Pne(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return null!==u&&null!==d?Ya(u,d):ye()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ye()}}class Ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){za(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return CB(this.inner)}size(){return this.innerSize}}const Nne=new jt(ce.comparator);function fi(){return Nne}const JB=new jt(ce.comparator);function Rg(...t){let e=JB;for(const n of t)e=e.insert(n.key,n);return e}function XB(t){let e=JB;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xs(){return Pg()}function ej(){return Pg()}function Pg(){return new Ho(t=>t.toString(),(t,e)=>t.isEqual(e))}const Mne=new jt(ce.comparator),xne=new Nt(ce.comparator);function Qe(...t){let e=xne;for(const n of t)e=e.add(n);return e}const kne=new Nt(je);function sS(){return kne}function tj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ig(e)?"-0":e}}function nj(t){return{integerValue:""+t}}function rj(t,e){return _B(e)?nj(e):tj(t,e)}class II{constructor(){this._=void 0}}function One(t,e,n){return t instanceof Qd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&hI(s)&&(s=fI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Sc?sj(t,e):t instanceof Rc?oj(t,e):function(i,s){const o=ij(i,s),a=aj(o)+aj(i.Ie);return J0(o)&&J0(i.Ie)?nj(a):tj(i.serializer,a)}(t,e)}function Vne(t,e,n){return t instanceof Sc?sj(t,e):t instanceof Rc?oj(t,e):n}function ij(t,e){return t instanceof Yd?J0(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Qd extends II{}class Sc extends II{constructor(e){super(),this.elements=e}}function sj(t,e){const n=uj(e);for(const r of t.elements)n.some(i=>Js(i,r))||n.push(r);return{arrayValue:{values:n}}}class Rc extends II{constructor(e){super(),this.elements=e}}function oj(t,e){let n=uj(e);for(const r of t.elements)n=n.filter(i=>!Js(i,r));return{arrayValue:{values:n}}}class Yd extends II{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function aj(t){return pn(t.integerValue||t.doubleValue)}function uj(t){return Tg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Ng{constructor(e,n){this.field=e,this.transform=n}}class Fne{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function EI(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class wI{}function cj(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Xd(t.key,sn.none()):new Jd(t.key,t.data,sn.none());{const n=t.data,r=_r.empty();let i=new Nt(Kt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Go(t.key,r,new hi(i.toArray()),sn.none())}}function Une(t,e,n){t instanceof Jd?function(i,s,o){const a=i.value.clone(),u=hj(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Go?function(i,s,o){if(!EI(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=hj(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(dj(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Mg(t,e,n,r){return t instanceof Jd?function(s,o,a,u){if(!EI(s.precondition,o))return a;const d=s.value.clone(),f=fj(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Go?function(s,o,a,u){if(!EI(s.precondition,o))return a;const d=fj(s.fieldTransforms,u,o),f=o.data;return f.setAll(dj(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,EI(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function Bne(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ij(r.transform,i||null);null!=s&&(null===n&&(n=_r.empty()),n.set(r.field,s))}return n||null}function lj(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&jd(r,i,(s,o)=>function Lne(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Sc&&i instanceof Sc||r instanceof Rc&&i instanceof Rc?jd(r.elements,i.elements,Js):r instanceof Yd&&i instanceof Yd?Js(r.Ie,i.Ie):r instanceof Qd&&i instanceof Qd);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Jd extends wI{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Go extends wI{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function dj(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function hj(t,e,n){const r=new Map;Se(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Vne(o,a,n[i]))}return r}function fj(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,One(s,o,e))}return r}class Xd extends wI{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oS extends wI{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class aS{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Une(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mg(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Mg(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ej();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=cj(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Qe())}isEqual(e){return this.batchId===e.batchId&&jd(this.mutations,e.mutations,(n,r)=>lj(n,r))&&jd(this.baseMutations,e.baseMutations,(n,r)=>lj(n,r))}}class uS{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Se(e.mutations.length===r.length);let i=Mne;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new uS(e,n,r,i)}}class cS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $ne{constructor(e,n){this.count=e,this.unchangedNames=n}}var Mn,pt;function pj(t){switch(t){default:return ye();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function gj(t){if(void 0===t)return En("GRPC error has no .code"),L.UNKNOWN;switch(t){case Mn.OK:return L.OK;case Mn.CANCELLED:return L.CANCELLED;case Mn.UNKNOWN:return L.UNKNOWN;case Mn.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Mn.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Mn.INTERNAL:return L.INTERNAL;case Mn.UNAVAILABLE:return L.UNAVAILABLE;case Mn.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Mn.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Mn.NOT_FOUND:return L.NOT_FOUND;case Mn.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Mn.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Mn.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Mn.ABORTED:return L.ABORTED;case Mn.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Mn.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Mn.DATA_LOSS:return L.DATA_LOSS;default:return ye()}}(pt=Mn||(Mn={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";function mj(){return new TextEncoder}const Hne=new Fd([4294967295,4294967295],0);function _j(t){const e=mj().encode(t),n=new Vte;return n.update(e),new Uint8Array(n.digest())}function yj(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fd([n,r],0),new Fd([i,s],0)]}class lS{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xg(`Invalid padding: ${n}`);if(r<0)throw new xg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new xg(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new xg(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Fd.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Fd.fromNumber(r)));return 1===i.compare(Hne)&&(i=new Fd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=_j(e),[r,i]=yj(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new lS(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const n=_j(e),[r,i]=yj(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class xg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class kg{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Og.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new kg(Re.min(),i,new jt(je),fi(),Qe())}}class Og{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Og(r,n,Qe(),Qe(),Qe())}}class AI{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class vj{constructor(e,n){this.targetId=e,this.fe=n}}class Ij{constructor(e,n,r=Kn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Ej{constructor(){this.ge=0,this.pe=Tj(),this.ye=Kn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Qe(),n=Qe(),r=Qe();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ye()}}),new Og(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Tj()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Se(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Gne{constructor(e){this.Le=e,this.ke=new Map,this.qe=fi(),this.Qe=wj(),this.Ke=new jt(je)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:ye()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(_I(s))if(0===r){const o=new ce(s.path);this.We(n,o,Qt.newNoDocument(o,Re.min()))}else Se(1===r);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=jo(r).toUint8Array()}catch(u){if(u instanceof bB)return di("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new lS(o,i,s)}catch(u){return di(u instanceof xg?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&_I(a.target)){const u=new ce(a.target.path);null!==this.qe.get(u)||this.st(o,u)||this.We(o,u,Qt.newNoDocument(u,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Qe();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Ye(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new kg(e,n,this.Ke,this.qe,r);return this.qe=fi(),this.Qe=wj(),this.Ke=new jt(je),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Ej,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Nt(je),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||te("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Ej),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function wj(){return new jt(ce.comparator)}function Tj(){return new jt(ce.comparator)}const qne={asc:"ASCENDING",desc:"DESCENDING"},zne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wne={and:"AND",or:"OR"};class Zne{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dS(t,e){return t.useProto3Json||vg(e)?e:{value:e}}function eh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Aj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Kne(t,e){return eh(t,e.toTimestamp())}function wn(t){return Se(!!t),Re.fromTimestamp(function(n){const r=Wa(n);return new rn(r.seconds,r.nanos)}(t))}function hS(t,e){return(r=t,new ft(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function Cj(t){const e=ft.fromString(t);return Se(kj(e)),e}function Vg(t,e){return hS(t.databaseId,e.path)}function eo(t,e){const n=Cj(e);if(n.get(1)!==t.databaseId.projectId)throw new J(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(bj(n))}function fS(t,e){return hS(t.databaseId,e)}function Dj(t){const e=Cj(t);return 4===e.length?ft.emptyPath():bj(e)}function Lg(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bj(t){return Se(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Sj(t,e,n){return{name:Vg(t,e),fields:n.value.mapValue.fields}}function Rj(t,e,n){const r=eo(t,e.name),i=wn(e.updateTime),s=e.createTime?wn(e.createTime):Re.min(),o=new _r({mapValue:{fields:e.fields}}),a=Qt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Fg(t,e){let n;if(e instanceof Jd)n={update:Sj(t,e.key,e.value)};else if(e instanceof Xd)n={delete:Vg(t,e.key)};else if(e instanceof Go)n={update:Sj(t,e.key,e.data),updateMask:rre(e.fieldMask)};else{if(!(e instanceof oS))return ye();n={verify:Vg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Qd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Sc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Rc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Yd)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw ye()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Kne(t,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ye()),n;var s}function pS(t,e){const n=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?sn.updateTime(wn(s.updateTime)):void 0!==s.exists?sn.exists(s.exists):sn.none():sn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Se("REQUEST_TIME"===a.setToServerValue),u=new Qd):"appendMissingElements"in a?u=new Sc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Rc(a.removeAllFromArray.values||[]):"increment"in a?u=new Yd(o,a.increment):ye();const d=Kt.fromServerFormat(a.fieldPath);return new Ng(d,u)}(t,i)):[];var s;if(e.update){const i=eo(t,e.update.name),s=new _r({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new hi((e.updateMask.fieldPaths||[]).map(f=>Kt.fromServerFormat(f)));return new Go(i,s,o,n,r)}return new Jd(i,s,n,r)}if(e.delete){const i=eo(t,e.delete);return new Xd(i,n)}if(e.verify){const i=eo(t,e.verify);return new oS(i,n)}return ye()}function Pj(t,e){return{documents:[fS(t,e.path)]}}function gS(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=fS(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=fS(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return xj(St.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(d=>{return{field:Xa((g=d).field),direction:ere(g.dir)};var g})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=dS(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function Nj(t){let e=Dj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Se(1===r);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(g){const _=Mj(g);return _ instanceof St&&eS(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(_=>{return new Cg(th((E=_).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;n.limit&&(a=function(g){let _;return _="object"==typeof g?g.value:g,vg(_)?null:_}(n.limit));let u=null;var g;n.startAt&&(u=new Ja((g=n.startAt).values||[],!!g.before));let d=null;return n.endAt&&(d=function(g){return new Ja(g.values||[],!g.before)}(n.endAt)),zB(e,i,o,s,a,"F",u,d)}function Mj(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=th(n.unaryFilter.field);return ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=th(n.unaryFilter.field);return ut.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=th(n.unaryFilter.field);return ut.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=th(n.unaryFilter.field);return ut.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(t):void 0!==t.fieldFilter?ut.create(th((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return St.create(n.compositeFilter.filters.map(r=>Mj(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ye()}}(n.compositeFilter.op))}(t):ye();var n}function ere(t){return qne[t]}function tre(t){return zne[t]}function nre(t){return Wne[t]}function Xa(t){return{fieldPath:t.canonicalString()}}function th(t){return Kt.fromServerFormat(t.fieldPath)}function xj(t){return t instanceof ut?function(n){if("=="===n.op){if(PB(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NAN"}};if(RB(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(PB(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NOT_NAN"}};if(RB(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xa(n.field),op:tre(n.op),value:n.value}}}(t):t instanceof St?function(n){const r=n.getFilters().map(i=>xj(i));return 1===r.length?r[0]:{compositeFilter:{op:nre(n.op),filters:r}}}(t):ye()}function rre(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kj(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class qo{constructor(e,n,r,i,s=Re.min(),o=Re.min(),a=Kn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new qo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Oj{constructor(e){this.ut=e}}function Vj(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:CI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Vg(s=t.ut,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:eh(s,o.version.toTimestamp()),createTime:eh(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Pc(e.version)};else{if(!e.isUnknownDocument())return ye();r.unknownDocument={path:n.path.toArray(),version:Pc(e.version)}}var s,o;return r}function CI(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Pc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Nc(t){const e=new rn(t.seconds,t.nanoseconds);return Re.fromTimestamp(e)}function Mc(t,e){const n=(e.baseMutations||[]).map(s=>pS(t.ut,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>pS(t.ut,s)),i=rn.fromMillis(e.localWriteTimeMs);return new aS(e.batchId,i,n,r)}function Ug(t){const e=Nc(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Nc(t.lastLimboFreeSnapshotVersion):Re.min();let r;return r=void 0!==t.query.documents?(Se(1===(s=t.query).documents.length),Jr(Wd(Dj(s.documents[0])))):function(s){return Jr(Nj(s))}(t.query),new qo(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Kn.fromBase64String(t.resumeToken));var s}function Lj(t,e){const n=Pc(e.snapshotVersion),r=Pc(e.lastLimboFreeSnapshotVersion);let i;i=_I(e.target)?Pj(t.ut,e.target):gS(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:bc(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function mS(t){const e=Nj({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?vI(e,e.limit,"L"):e}function _S(t,e){return new cS(e.largestBatchId,pS(t.ut,e.overlayMutation))}function Fj(t,e){const n=e.path.lastSegment();return[t,Mr(e.path.popLast()),n]}function Uj(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Pc(r.readTime),documentKey:Mr(r.documentKey.path),largestBatchId:r.largestBatchId}}class sre{getBundleMetadata(e,n){return Bj(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Nc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return Bj(e).put({bundleId:(i=n).id,createTime:Pc(wn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return jj(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:mS(s.bundledQuery),readTime:Nc(s.readTime)};var s})}saveNamedQuery(e,n){return jj(e).put({name:(i=n).name,readTime:Pc(wn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Bj(t){return ir(t,"bundles")}function jj(t){return ir(t,"namedQueries")}class DI{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new DI(e,n.uid||"")}getOverlay(e,n){return Bg(e).get(Fj(this.userId,n)).next(r=>r?_S(this.serializer,r):null)}getOverlays(e,n){const r=Xs();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new cS(n,o);i.push(this.lt(e,a))}),x.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Mr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Bg(e).H("collectionPathOverlayIndex",a))}),x.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Xs(),s=Mr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Bg(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=_S(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Xs();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Bg(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,d,f)=>{const g=_S(this.serializer,d);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):f.done()}).next(()=>s)}lt(e,n){return Bg(e).put(function(i,s,o){const[a,u,d]=Fj(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Fg(i.ut,o.mutation)}}(this.serializer,this.userId,n))}}function Bg(t){return ir(t,"documentOverlays")}class xc{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(pn(e.integerValue));else if("doubleValue"in e){const r=pn(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),Ig(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(jo(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?NB(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):ye()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),ce.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function ore(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function $j(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=ore(255&r[s]);if(i+=o,8!==o)break}return i}(t);return Math.ceil(e/8)}xc.St=new xc;class are{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=$j(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=$j(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class ure{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class cre{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class jg{constructor(){this.Wt=new are,this.Gt=new ure(this.Wt),this.zt=new cre(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class kc{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new kc(this.indexId,this.documentKey,this.arrayValue,r)}}function eu(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=Hj(t.arrayValue,e.arrayValue),0!==n?n:(n=Hj(t.directionalValue,e.directionalValue),0!==n?n:ce.comparator(t.documentKey,e.documentKey)))}function Hj(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class Gj{constructor(e){this.Jt=new Nt((n,r)=>Kt.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Se(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=z0(e);if(void 0!==n&&!this.tn(n))return!1;const r=Tc(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.nn(a,u)||!this.rn(this.Yt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Yt.length||!this.rn(this.Yt[o++],r[s]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Nt(Kt.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new Ac(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Ac(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Ac(r.field,"asc"===r.dir?0:1)));return new $d($d.UNKNOWN_ID,this.collectionId,n,Hd.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function qj(t){var e,n;if(Se(t instanceof ut||t instanceof St),t instanceof ut){if(t instanceof HB){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>ut.create(t.field,"==",s)))||[];return St.create(i,"or")}return t}const r=t.filters.map(i=>qj(i));return St.create(r,t.op)}function lre(t){if(0===t.getFilters().length)return[];const e=IS(qj(t));return Se(zj(e)),yS(e)||vS(e)?[e]:e.getFilters()}function yS(t){return t instanceof ut}function vS(t){return t instanceof St&&eS(t)}function zj(t){return yS(t)||vS(t)||function(n){if(n instanceof St&&X0(n)){for(const r of n.getFilters())if(!yS(r)&&!vS(r))return!1;return!0}return!1}(t)}function IS(t){if(Se(t instanceof ut||t instanceof St),t instanceof ut)return t;if(1===t.filters.length)return IS(t.filters[0]);const e=t.filters.map(r=>IS(r));let n=St.create(e,t.op);return n=bI(n),zj(n)?n:(Se(n instanceof St),Se(zd(n)),Se(n.filters.length>1),n.filters.reduce((r,i)=>ES(r,i)))}function ES(t,e){let n;return Se(t instanceof ut||t instanceof St),Se(e instanceof ut||e instanceof St),n=t instanceof ut?e instanceof ut?St.create([t,e],"and"):Wj(t,e):e instanceof ut?Wj(e,t):function(i,s){if(Se(i.filters.length>0&&s.filters.length>0),zd(i)&&zd(s))return BB(i,s.getFilters());const o=X0(i)?i:s,a=X0(i)?s:i,u=o.filters.map(d=>ES(d,a));return St.create(u,"or")}(t,e),bI(n)}function Wj(t,e){if(zd(e))return BB(e,t.getFilters());{const n=e.filters.map(r=>ES(t,r));return St.create(n,"or")}}function bI(t){if(Se(t instanceof ut||t instanceof St),t instanceof ut)return t;const e=t.getFilters();if(1===e.length)return bI(e[0]);if(FB(t))return t;const n=e.map(i=>bI(i)),r=[];return n.forEach(i=>{i instanceof ut?r.push(i):i instanceof St&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:St.create(r,t.op)}class dre{constructor(){this.on=new wS}addToCollectionParentIndex(e,n){return this.on.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(Ci.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}}class wS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Nt(ft.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nt(ft.comparator)).toArray()}}const SI=new Uint8Array(0);class hre{constructor(e,n){this.user=e,this.databaseId=n,this._n=new wS,this.an=new Ho(r=>bc(r),(r,i)=>Dg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:r,parent:Mr(i)};return Zj(e).put(s)}return x.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[dB(n),""],!1,!0);return Zj(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Ys(o.parent))}return r})}addFieldIndex(e,n){const r=$g(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(n.indexState){const o=rh(e);return s.next(a=>{o.put(Uj(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=$g(e),i=rh(e),s=nh(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=$g(e),r=nh(e),i=rh(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return x.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new Gj(r).sn();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=nh(e);let i=!0;const s=new Map;return x.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Qe();const a=[];return x.forEach(s,(u,d)=>{var U;te("IndexedDbIndexManager",`Using index ${U=u,`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(ne=>`${ne.fieldPath}:${ne.kind}`).join(",")}`} to execute ${bc(n)}`);const f=function(U,ne){const oe=z0(ne);if(void 0===oe)return null;for(const Oe of yI(U,oe.fieldPath))switch(Oe.op){case"array-contains-any":return Oe.value.arrayValue.values||[];case"array-contains":return[Oe.value]}return null}(d,u),g=function(U,ne){const oe=new Map;for(const Oe of Tc(ne))for(const gt of yI(U,Oe.fieldPath))switch(gt.op){case"==":case"in":oe.set(Oe.fieldPath.canonicalString(),gt.value);break;case"not-in":case"!=":return oe.set(Oe.fieldPath.canonicalString(),gt.value),Array.from(oe.values())}return null}(d,u),_=function(U,ne){const oe=[];let Oe=!0;for(const gt of Tc(ne)){const Tn=0===gt.kind?GB(U,gt.fieldPath,U.startAt):qB(U,gt.fieldPath,U.startAt);oe.push(Tn.value),Oe&&(Oe=Tn.inclusive)}return new Ja(oe,Oe)}(d,u),y=function(U,ne){const oe=[];let Oe=!0;for(const gt of Tc(ne)){const Tn=0===gt.kind?qB(U,gt.fieldPath,U.endAt):GB(U,gt.fieldPath,U.endAt);oe.push(Tn.value),Oe&&(Oe=Tn.inclusive)}return new Ja(oe,Oe)}(d,u),E=this.ln(u,d,_),A=this.ln(u,d,y),S=this.hn(u,d,g),O=this.Pn(u.indexId,f,E,_.inclusive,A,y.inclusive,S);return x.forEach(O,R=>r.j(R,n.limit).next(U=>{U.forEach(ne=>{const oe=ce.fromSegments(ne.documentKey);o.has(oe)||(o=o.add(oe),a.push(oe))})}))}).next(()=>a)}return x.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:lre(St.create(e.filters,"and")).map(r=>nS(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){const u=(null!=n?n.length:1)*Math.max(r.length,s.length),d=u/(null!=n?n.length:1),f=[];for(let g=0;g<u;++g){const _=n?this.In(n[g/d]):SI,y=this.Tn(e,_,r[g%d],i),E=this.En(e,_,s[g%d],o),A=a.map(S=>this.Tn(e,_,S,!0));f.push(...this.createRange(y,E,A))}return f}Tn(e,n,r,i){const s=new kc(e,ce.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){const s=new kc(e,ce.empty(),n,r);return i?s.Ht():s}cn(e,n){const r=new Gj(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.un(n);return x.forEach(i,s=>this.cn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new Nt(Kt.comparator),f=!1;for(const g of u.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?f=!0:d=d.add(_.field));for(const g of u.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new jg;for(const i of Tc(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.jt(i.kind);xc.St.ht(s,o)}return r.Ut()}In(e){const n=new jg;return xc.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new jg;return xc.St.ht(Dc(this.databaseId,n),r.jt(function(s){const o=Tc(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new jg);let s=0;for(const o of Tc(e)){const a=r[s++];for(const u of i)if(this.Rn(n,o.fieldPath)&&Tg(a))i=this.Vn(i,o,a);else{const d=u.jt(o.kind);xc.St.ht(a,d)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new jg;u.seed(a.Ut()),xc.St.ht(o,u.jt(n.kind)),s.push(u)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof ut&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=$g(e),i=rh(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return x.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(f,g){const _=g?new Hd(g.sequenceNumber,new Ci(Nc(g.readTime),new ce(Ys(g.documentKey)),g.largestBatchId)):Hd.empty(),y=f.fields.map(([E,A])=>new Ac(Kt.fromServerFormat(E),A));return new $d(f.indexId,f.collectionGroup,y,_)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:je(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=$g(e),s=rh(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>x.forEach(a,u=>s.put(Uj(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return x.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?x.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),x.forEach(a,u=>this.gn(e,i,u).next(d=>{const f=this.pn(s,u);return d.isEqual(f)?x.resolve():this.yn(e,s,u,d,f)}))))})}wn(e,n,r,i){return nh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return nh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=nh(e);let s=new Nt(eu);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new kc(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new Nt(eu);const i=this.dn(n,e);if(null==i)return r;const s=z0(n);if(null!=s){const o=e.data.field(s.fieldPath);if(Tg(o))for(const a of o.arrayValue.values||[])r=r.add(new kc(n.indexId,e.key,this.In(a),i))}else r=r.add(new kc(n.indexId,e.key,SI,i));return r}yn(e,n,r,i,s){te("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,d,f,g,_){const y=u.getIterator(),E=d.getIterator();let A=Gd(y),S=Gd(E);for(;A||S;){let O=!1,R=!1;if(A&&S){const U=f(A,S);U<0?R=!0:U>0&&(O=!0)}else null!=A?R=!0:O=!0;O?(g(S),S=Gd(E)):R?(_(A),A=Gd(y)):(A=Gd(y),S=Gd(E))}}(i,s,eu,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),x.waitFor(o)}fn(e){let n=1;return rh(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>eu(o,a)).filter((o,a,u)=>!a||0!==eu(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=eu(o,e),u=eu(o,n);if(0===a)i[0]=e.Ht();else if(a>0&&u<0)i.push(o),i.push(o.Ht());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,SI,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,SI,[]]))}return s}bn(e,n){return eu(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Kj)}getMinOffset(e,n){return x.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||ye())).next(Kj)}}function Zj(t){return ir(t,"collectionParents")}function nh(t){return ir(t,"indexEntries")}function $g(t){return ir(t,"indexConfiguration")}function rh(t){return ir(t,"indexState")}function Kj(t){Se(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;W0(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ci(e.readTime,e.documentKey,n)}const Qj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new xr(e,xr.DEFAULT_COLLECTION_PERCENTILE,xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Yj(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:o},(f,g,_)=>(a++,_.delete()));s.push(u.next(()=>{Se(1===a)}));const d=[];for(const f of n.mutations){const g=IB(e,f.key.path,n.batchId);s.push(i.delete(g)),d.push(f.key)}return x.waitFor(s).next(()=>d)}function RI(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ye();e=t.noDocument}return JSON.stringify(e).length}xr.DEFAULT_COLLECTION_PERCENTILE=10,xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xr.DEFAULT=new xr(41943040,xr.DEFAULT_COLLECTION_PERCENTILE,xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xr.DISABLED=new xr(-1,0,0);class PI{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){Se(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new PI(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tu(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=ih(e),o=tu(e);return o.add({}).next(a=>{Se("number"==typeof a);const u=new aS(a,n,r,i),d=function(y,E,A){const S=A.baseMutations.map(R=>Fg(y.ut,R)),O=A.mutations.map(R=>Fg(y.ut,R));return{userId:E,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:S,mutations:O}}(this.serializer,this.userId,u),f=[];let g=new Nt((_,y)=>je(_.canonicalString(),y.canonicalString()));for(const _ of i){const y=IB(this.userId,_.key.path,a);g=g.add(_.key.path.popLast()),f.push(o.put(d)),f.push(s.put(y,ene))}return g.forEach(_=>{f.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),x.waitFor(f).next(()=>u)})}lookupMutationBatch(e,n){return tu(e).get(n).next(r=>r?(Se(r.userId===this.userId),Mc(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?x.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return tu(e).Y({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Se(a.batchId>=r),s=Mc(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return tu(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tu(e).W("userMutationsIndex",n).next(r=>r.map(i=>Mc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=lI(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ih(e).Y({range:i},(o,a,u)=>{const[d,f,g]=o,_=Ys(f);if(d===this.userId&&n.path.isEqual(_))return tu(e).get(g).next(y=>{if(!y)throw ye();Se(y.userId===this.userId),s.push(Mc(this.serializer,y))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nt(je);const i=[];return n.forEach(s=>{const o=lI(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=ih(e).Y({range:a},(d,f,g)=>{const[_,y,E]=d,A=Ys(y);_===this.userId&&s.path.isEqual(A)?r=r.add(E):g.done()});i.push(u)}),x.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=lI(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Nt(je);return ih(e).Y({range:o},(u,d,f)=>{const[g,_,y]=u,E=Ys(_);g===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(y)):f.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(tu(e).get(s).next(o=>{if(null===o)throw ye();Se(o.userId===this.userId),r.push(Mc(this.serializer,o))}))}),x.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Yj(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),x.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return x.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return ih(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Ys(s[1]);i.push(u)}else a.done()}).next(()=>{Se(0===i.length)})})}containsKey(e,n){return Jj(e,this.userId,n)}Mn(e){return Xj(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Jj(t,e,n){const r=lI(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ih(t).Y({range:s,J:!0},(a,u,d)=>{const[f,g,_]=a;f===e&&g===i&&(o=!0),d.done()}).next(()=>o)}function tu(t){return ir(t,"mutations")}function ih(t){return ir(t,"documentMutations")}function Xj(t){return ir(t,"mutationQueues")}class Oc{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Oc(0)}static Nn(){return new Oc(-1)}}class fre{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new Oc(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Re.fromTimestamp(new rn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>sh(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Se(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return sh(e).Y((o,a)=>{const u=Ug(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>x.waitFor(s)).next(()=>i)}forEachTarget(e,n){return sh(e).Y((r,i)=>{const s=Ug(i);n(s)})}Bn(e){return e$(e).get("targetGlobalKey").next(n=>(Se(null!==n),n))}Ln(e,n){return e$(e).put("targetGlobalKey",n)}kn(e,n){return sh(e).put(Lj(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=bc(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return sh(e).Y({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const d=Ug(a);Dg(n,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=nu(e);return n.forEach(o=>{const a=Mr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),x.waitFor(i)}removeMatchingKeys(e,n,r){const i=nu(e);return x.forEach(n,s=>{const o=Mr(s.path);return x.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=nu(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=nu(e);let s=Qe();return i.Y({range:r,J:!0},(o,a,u)=>{const d=Ys(o[1]),f=new ce(d);s=s.add(f)}).next(()=>s)}containsKey(e,n){const r=Mr(n.path),i=IDBKeyRange.bound([r],[dB(r)],!1,!0);let s=0;return nu(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],u,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}_t(e,n){return sh(e).get(n).next(r=>r?Ug(r):null)}}function sh(t){return ir(t,"targets")}function e$(t){return ir(t,"targetGlobal")}function nu(t){return ir(t,"targetDocuments")}function t$([t,e],[n,r]){const i=je(t,n);return 0===i?je(e,r):i}class pre{constructor(e){this.Qn=e,this.buffer=new Nt(t$),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();t$(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class n${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;te("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,P.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){qa(r)?te("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ga(r)}yield n.Gn(3e5)}))}}class gre{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return x.resolve(Di._e);const r=new pre(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(Qj)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qj):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Bd()<=ci.in.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(d-u)+`ms\nTotal Duration: ${d-f}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class mre{constructor(e,n){this.db=e,this.garbageCollector=function r$(t,e){return new gre(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return NI(e,r)}removeReference(e,n,r){return NI(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return NI(e,n)}Xn(e,n){return function(i,s){let o=!1;return Xj(i).Z(a=>Jj(i,a,s).next(u=>(u&&(o=!0),x.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=n){const u=this.Xn(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Re.min()),nu(e).delete([0,Mr(o.path)])))});i.push(u)}}).next(()=>x.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return NI(e,n)}Zn(e,n){const r=nu(e);let i,s=Di._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{0===o?(s!==Di._e&&n(new ce(Ys(i)),s),s=d,i=u):s=Di._e}).next(()=>{s!==Di._e&&n(new ce(Ys(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function NI(t,e){return nu(t).put((i=t.currentSequenceNumber,{targetId:0,path:Mr(e.path),sequenceNumber:i}));var i}class i${constructor(){this.changes=new Ho(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _re{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Vc(e).put(r)}removeEntry(e,n,r){return Vc(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],CI(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=Qt.newInvalidDocument(n);return Vc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Hg(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:Qt.newInvalidDocument(n)};return Vc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Hg(n))},(i,s)=>{r={document:this.tr(n,s),size:RI(s)}}).next(()=>r)}getEntries(e,n){let r=fi();return this.rr(e,n,(i,s)=>{const o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=fi(),i=new jt(ce.comparator);return this.rr(e,n,(s,o)=>{const a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,RI(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return x.resolve();let i=new Nt(u$);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Hg(i.first()),Hg(i.last())),o=i.getIterator();let a=o.getNext();return Vc(e).Y({index:"documentKeyIndex",range:s},(u,d,f)=>{const g=ce.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&u$(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?f.U(Hg(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),CI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vc(e).W(IDBKeyRange.bound(a,u,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let f=fi();for(const g of d){const _=this.tr(ce.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(Sg(n,_)||i.has(_.key))&&(f=f.insert(_.key,_))}return f})}getAllFromCollectionGroup(e,n,r,i){let s=fi();const o=a$(n,r),a=a$(n,Ci.max());return Vc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,f)=>{const g=this.tr(ce.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(g.key,g),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new yre(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return o$(e).get("remoteDocumentGlobalKey").next(n=>(Se(!!n),n))}er(e,n){return o$(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function ire(t,e){let n;if(e.document)n=Rj(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ce.fromSegments(e.noDocument.path),i=Nc(e.noDocument.readTime);n=Qt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye();{const r=ce.fromSegments(e.unknownDocument.path),i=Nc(e.unknownDocument.version);n=Qt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new rn(i[0],i[1]);return Re.fromTimestamp(s)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(Re.min()))return r}return Qt.newInvalidDocument(e)}}function s$(t){return new _re(t)}class yre extends i${constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Ho(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Nt((s,o)=>je(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=Vj(this._r.serializer,o);i=i.add(s.path.popLast());const d=RI(u);r+=d-a.size,n.push(this._r.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=Vj(this._r.serializer,o.convertToNoDocument(Re.min()));n.push(this._r.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),x.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function o$(t){return ir(t,"remoteDocumentGlobal")}function Vc(t){return ir(t,"remoteDocumentsV14")}function Hg(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function a$(t,e){const n=e.documentKey.path.toArray();return[t,CI(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function u$(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=je(n[s],r[s]),i)return i;return i=je(n.length,r.length),i||(i=je(n[n.length-2],r[r.length-2]),i||je(n[n.length-1],r[r.length-1]))}class vre{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class c${constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Mg(r.mutation,i,hi.empty(),rn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Qe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Qe()){const i=Xs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Rg();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Xs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Qe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=fi();const o=Pg(),a=Pg();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(void 0===f||f.mutation instanceof Go)?s=s.insert(d.key,d):void 0!==f?(o.set(d.key,f.mutation.getFieldMask()),Mg(f.mutation,d,f.mutation.getFieldMask(),rn.now())):o.set(d.key,hi.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var g;return a.set(d,new vre(f,null!==(g=o.get(d))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Pg();let i=new jt((o,a)=>o-a),s=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=n.get(u);if(null===d)return;let f=r.get(u)||hi.empty();f=a.applyToLocalView(d,f),r.set(u,f);const g=(i.get(a.batchId)||Qe()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,f=u.value,g=ej();f.forEach(_=>{if(!s.has(_)){const y=cj(n.get(_),r.get(_));null!==y&&g.set(_,y),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return ce.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):rS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):x.resolve(Xs());let a=-1,u=s;return o.next(d=>x.forEach(d,(f,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(f)?x.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,Qe())).next(f=>({batchId:a,changes:XB(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let i=Rg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Rg();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,u=>{const d=(g=n,_=u.child(s),new $o(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const f=d.getKey();null===o.get(f)&&(o=o.insert(f,Qt.newInvalidDocument(f)))});let a=Rg();return o.forEach((u,d)=>{const f=s.get(u);void 0!==f&&Mg(f.mutation,d,hi.empty(),rn.now()),Sg(n,d)&&(a=a.insert(u,d))}),a})}}class Ire{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return x.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:wn(i.createTime)}),x.resolve();var i}getNamedQuery(e,n){return x.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:mS(i.bundledQuery),readTime:wn(i.readTime)}),x.resolve();var i}}class Ere{constructor(){this.overlays=new jt(ce.comparator),this.lr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xs();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),x.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){const i=Xs(),s=n.length+1,o=new ce(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new jt((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);null===f&&(f=Xs(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=Xs(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=i)););return x.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new cS(n,r));let s=this.lr.get(n);void 0===s&&(s=Qe(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}class TS{constructor(){this.hr=new Nt(sr.Pr),this.Ir=new Nt(sr.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new sr(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new sr(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new ce(new ft([])),r=new sr(n,e),i=new sr(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new ce(new ft([])),r=new sr(n,e),i=new sr(n,e+1);let s=Qe();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new sr(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class sr{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return ce.comparator(e.key,n.key)||je(e.gr,n.gr)}static Tr(e,n){return je(e.gr,n.gr)||ce.comparator(e.key,n.key)}}class wre{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Nt(sr.Pr)}checkEmpty(e){return x.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++;const o=new aS(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new sr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new sr(n,0),i=new sr(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nt(je);return n.forEach(i=>{const s=new sr(i,0),o=new sr(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),x.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ce.isDocumentKey(s)||(s=s.child(""));const o=new sr(new ce(s),0);let a=new Nt(je);return this.yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.gr)),!0)},o),x.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Se(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return x.forEach(n.mutations,i=>{const s=new sr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new sr(n,0),i=this.yr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return x.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Tre{constructor(e){this.Cr=e,this.docs=new jt(ce.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let r=fi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Qt.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=fi();const o=n.path,a=new ce(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||W0(fB(f),r)<=0||(i.has(f.key)||Sg(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ye()}vr(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Are(this)}getSize(e){return x.resolve(this.size)}}class Are extends i${constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class Cre{constructor(e){this.persistence=e,this.Fr=new Ho(n=>bc(n),Dg),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.Mr=0,this.Or=new TS,this.targetCount=0,this.Nr=Oc.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),x.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Oc(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.kn(n),x.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),x.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Or.containsKey(n))}}class AS{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Di(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Cre(this),this.indexManager=new dre,this.remoteDocumentCache=new Tre(r=>this.referenceDelegate.Qr(r)),this.serializer=new Oj(n),this.Kr=new Ire(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ere,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new wre(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const i=new Dre(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return x.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class Dre extends gB{constructor(e){super(),this.currentSequenceNumber=e}}class MI{constructor(e){this.persistence=e,this.Gr=new TS,this.zr=null}static jr(e){return new MI(e)}get Hr(){if(this.zr)return this.zr;throw ye()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),x.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Hr,r=>{const i=ce.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,Re.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return x.or([()=>x.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class bre{constructor(e){this.serializer=e}N(e,n,r,i){const s=new cI("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vB,{unique:!0}),u.createObjectStore("documentMutations"),l$(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=x.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),l$(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Re.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,d){return d.store("mutations").W().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vB,{unique:!0});const g=d.store("mutations"),_=f.map(y=>g.put(y));return x.waitFor(_)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:hne});d.createIndex("collectionPathOverlayIndex",fne,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",pne,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:tne});d.createIndex("documentKeyIndex",nne),d.createIndex("collectionGroupIndex",rne)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:une}).createIndex("sequenceNumberIndex",cne,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:lne}).createIndex("documentKeyIndex",dne,{unique:!1})}(e))),o}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=RI(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>x.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>x.forEach(a,u=>{Se(u.userId===s.userId);const d=Mc(this.serializer,u);return Yj(e,s.userId,d).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const u=new ft(o),d=[0,Mr(u)];s.push(n.get(d).next(f=>f?x.resolve():n.put({targetId:0,path:Mr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>x.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:ane});const r=n.store("collectionParents"),i=new wS,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Mr(u)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const u=new ft(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,u],d)=>{const f=Ys(a);return s(f.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const s=Ug(i),o=Lj(this.serializer,s);return n.put(o)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(g=o,g.document?new ce(ft.fromString(g.document.name).popFirst(5)):g.noDocument?ce.fromSegments(g.noDocument.path):g.unknownDocument?ce.fromSegments(g.unknownDocument.path):ye()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(d))}).next(()=>x.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=s$(this.serializer),s=new AS(MI.jr,this.serializer.ut);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var d;let f=null!==(d=a.get(u.userId))&&void 0!==d?d:Qe();Mc(this.serializer,u).keys().forEach(g=>f=f.add(g)),a.set(u.userId,f)}),x.forEach(a,(u,d)=>{const f=new rr(d),g=DI.ct(this.serializer,f),_=s.getIndexManager(f),y=PI.ct(f,this.serializer,_,s.referenceDelegate);return new c$(i,y,g,_).recalculateAndSaveOverlaysForDocumentKeys(new Q0(n,Di._e),u).next()})})}}function l$(t){t.createObjectStore("targetDocuments",{keyPath:sne}).createIndex("documentTargetsIndex",one,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ine,{unique:!0}),t.createObjectStore("targetGlobal")}const CS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class DS{constructor(e,n,r,i,s,o,a,u,d,f,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=d,this._i=f,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=_=>Promise.resolve(),!DS.D())throw new J(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mre(this,i),this.Ii=n+"main",this.serializer=new Oj(u),this.Ti=new _s(this.Ii,this.ai,new bre(this.serializer)),this.qr=new fre(this.referenceDelegate,this.serializer),this.remoteDocumentCache=s$(this.serializer),this.Kr=new sre,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===f&&En("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(L.FAILED_PRECONDITION,CS);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Di(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,P.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,P.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,P.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>kI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(qa(e))return te("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return te("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Gg(e).get("owner").next(n=>x.resolve(this.wi(n)))}Si(e){return kI(e).delete(this.clientId)}bi(){var e=this;return(0,P.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ir(r,"clientMetadata");return i.W().next(s=>{const o=e.Ci(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return x.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?x.resolve(!0):Gg(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new J(L.FAILED_PRECONDITION,CS);return!1}}return!(!this.networkEnabled||!this.inForeground)||kI(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&te("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,P.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new Q0(n,Di._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>kI(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return PI.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new hre(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return DI.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){te("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=15===(u=this.ai)?mne:14===u?TB:13===u?wB:12===u?gne:11===u?EB:void ye();var u;let o;return this.Ti.runTransaction(e,i,s,a=>(o=new Q0(a,this.Lr?this.Lr.next():Di._e),"readwrite-primary"===n?this.fi(o).next(u=>!!u||this.gi(o)).next(u=>{if(!u)throw En(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new J(L.FAILED_PRECONDITION,pB);return r(o)}).next(u=>this.yi(o).next(()=>u)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return Gg(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new J(L.FAILED_PRECONDITION,CS)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gg(e).put("owner",n)}static D(){return _s.D()}pi(e){const n=Gg(e);return n.get("owner").next(r=>this.wi(r)?(te("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):x.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(En(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,be.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return te("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return En("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){En("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gg(t){return ir(t,"owner")}function kI(t){return ir(t,"clientMetadata")}function bS(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class SS{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Qe(),i=Qe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new SS(e,n.fromCache,r,i)}}class Sre{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class d${constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Sre;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Bd()<=ci.in.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Kd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),x.resolve()):(Bd()<=ci.in.DEBUG&&te("QueryEngine","Query:",Kd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Bd()<=ci.in.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Kd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jr(n))):x.resolve())}zi(e,n){if(WB(n))return x.resolve(null);let r=Jr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=vI(n,null,"F"),r=Jr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Qe(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Yi(n,a);return this.Zi(n,d,o,u.readTime)?this.zi(e,vI(n,null,"F")):this.Xi(e,d,n,u)}))})))}ji(e,n,r,i){return WB(n)||i.isEqual(Re.min())?x.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?x.resolve(null):(Bd()<=ci.in.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Kd(n)),this.Xi(e,o,n,hB(i,-1)).next(a=>a))})}Yi(e,n){let r=new Nt(YB(e));return n.forEach((i,s)=>{Sg(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return Bd()<=ci.in.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Kd(n)),this.Gi.getDocumentsMatchingQuery(e,n,Ci.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Rre{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new jt(je),this.ns=new Ho(s=>bc(s),Dg),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c$(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function h$(t,e,n,r){return new Rre(t,e,n,r)}function f$(t,e){return RS.apply(this,arguments)}function RS(){return RS=(0,P.Z)(function*(t,e){const n=ae(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Qe();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({_s:d,removedBatchIds:o,addedBatchIds:a}))})})}),RS.apply(this,arguments)}function p$(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function g$(t,e,n){let r=Qe(),i=Qe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=fi();return n.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Re.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{us:o,cs:i}})}function Mre(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oh(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new qo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function ah(t,e,n){return PS.apply(this,arguments)}function PS(){return PS=(0,P.Z)(function*(t,e,n){const r=ae(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!qa(o))throw o;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),PS.apply(this,arguments)}function OI(t,e,n){const r=ae(t);let i=Re.min(),s=Qe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const g=ae(u),_=g.ns.get(f);return void 0!==_?x.resolve(g.ts.get(_)):g.qr.getTargetData(d,f)}(r,o,Jr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:Re.min(),n?s:Qe())).next(a=>(y$(r,QB(e),a),{documents:a,ls:s})))}function m$(t,e){const n=ae(t),r=ae(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function _$(t,e){const n=ae(t),r=n.rs.get(e)||Re.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,hB(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(y$(n,e,i),i))}function y$(t,e,n){let r=t.rs.get(e)||Re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}function NS(){return NS=(0,P.Z)(function*(t,e,n,r){const i=ae(t);let s=Qe(),o=fi();for(const d of n){const f=e.hs(d.metadata.name);d.document&&(s=s.add(f));const g=e.Ps(d);g.setReadTime(e.Is(d.metadata.readTime)),o=o.insert(f,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield oh(i,(f=r,Jr(Wd(ft.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>g$(d,a,o).next(f=>(a.apply(d),f)).next(f=>i.qr.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.qr.addMatchingKeys(d,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,f.us,f.cs)).next(()=>f.us)))}),NS.apply(this,arguments)}function kre(t,e){return MS.apply(this,arguments)}function MS(){return MS=(0,P.Z)(function*(t,e,n=Qe()){const r=yield oh(t,Jr(mS(e.bundledQuery))),i=ae(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=wn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(s,e);const a=r.withResumeToken(Kn.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(s,a).next(()=>i.qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(s,e))})}),MS.apply(this,arguments)}function v$(t,e){return`firestore_clients_${t}_${e}`}function I$(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function xS(t,e){return`firestore_targets_${t}_${e}`}class VI{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new J(i.error.code,i.error.message))),o?new VI(e,n,i.state,s):(En("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qg{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new J(r.error.code,r.error.message))),s?new qg(e,r.state,i):(En("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class LI{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=sS();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=_B(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new LI(e,s):(En("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class kS{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new kS(n.clientId,n.onlineState):(En("SharedClientState",`Failed to parse online state: ${e}`),null)}}class OS{constructor(){this.activeTargetIds=sS()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VS{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new jt(je),this.started=!1,this.ps=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=v$(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new OS),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,P.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const s=e.getItem(v$(e.persistenceKey,i));if(s){const o=LI.Ts(i,s);o&&(e.gs=e.gs.insert(o.clientId,o))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(xS(this.persistenceKey,e));if(r){const i=qg.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xS(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return te("SharedClientState","READ",e,n),n}setItem(e,n){te("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){te("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(te("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void En("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,P.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(o){let a=Di._e;if(null!=o)try{const u=JSON.parse(o);Se("number"==typeof u),a=u}catch(u){En("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Di._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Js(s)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new VI(this.currentUser,e,n,r),s=I$(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){const n=I$(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=xS(this.persistenceKey,e),s=new qg(e,n,r);this.setItem(i,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return LI.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return VI.Ts(new rr(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return qg.Ts(i,n)}Ms(e){return kS.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,P.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);te("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=sS();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class E${constructor(){this.eo=new OS,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new OS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ore{ro(e){}shutdown(){}}class w${constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let FI=null;function LS(){return null===FI?FI=268435456+Math.round(2147483648*Math.random()):FI++,"0x"+FI.toString(16)}const Vre={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Lre{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const kr="WebChannelConnection";class Fre extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=LS(),u=this.So(n,r);te("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(d,s,o),this.Do(n,u,d,i).then(f=>(te("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw di("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+Ud,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){return`${this.mo}/v1/${r}:${Vre[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const s=LS();return new Promise((o,a)=>{const u=new Ote;u.setWithCredentials(!0),u.listenOnce(xte.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case G0.NO_ERROR:const f=u.getResponseJson();te(kr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case G0.TIMEOUT:te(kr,`RPC '${e}' ${s} timed out`),a(new J(L.DEADLINE_EXCEEDED,"Request time out"));break;case G0.HTTP_ERROR:const g=u.getStatus();if(te(kr,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const y=_?.error;if(y&&y.status&&y.message){const E=function(S){const O=S.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(O)>=0?O:L.UNKNOWN}(y.status);a(new J(E,y.message))}else a(new J(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new J(L.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{te(kr,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);te(kr,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}vo(e,n,r){const i=LS(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Nte(),a=Mte(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");te(kr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const g=o.createWebChannel(f,u);let _=!1,y=!1;const E=new Lre({co:S=>{y?te(kr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(_||(te(kr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),te(kr,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},lo:()=>g.close()}),A=(S,O,R)=>{S.listen(O,U=>{try{R(U)}catch(ne){setTimeout(()=>{throw ne},0)}})};return A(g,uI.EventType.OPEN,()=>{y||te(kr,`RPC '${e}' stream ${i} transport opened.`)}),A(g,uI.EventType.CLOSE,()=>{y||(y=!0,te(kr,`RPC '${e}' stream ${i} transport closed`),E.Ro())}),A(g,uI.EventType.ERROR,S=>{y||(y=!0,di(kr,`RPC '${e}' stream ${i} transport errored:`,S),E.Ro(new J(L.UNAVAILABLE,"The operation could not be completed")))}),A(g,uI.EventType.MESSAGE,S=>{var O;if(!y){const R=S.data[0];Se(!!R);const ne=R.error||(null===(O=R[0])||void 0===O?void 0:O.error);if(ne){te(kr,`RPC '${e}' stream ${i} received error:`,ne);const oe=ne.status;let Oe=function(Ko){const Eh=Mn[Ko];if(void 0!==Eh)return gj(Eh)}(oe),gt=ne.message;void 0===Oe&&(Oe=L.INTERNAL,gt="Unknown error status: "+oe+" with message "+ne.message),y=!0,E.Ro(new J(Oe,gt)),g.close()}else te(kr,`RPC '${e}' stream ${i} received:`,R),E.Vo(R)}}),A(a,kte.STAT_EVENT,S=>{S.stat===oB.PROXY?te(kr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===oB.NOPROXY&&te(kr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Ao()},0),E}}function T$(){return typeof window<"u"?window:null}function UI(){return typeof document<"u"?document:null}function zg(t){return new Zne(t,!0)}class FS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class A${constructor(e,n,r,i,s,o,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new FS(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,P.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,P.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,P.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(En(n.toString()),En("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===L.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new J(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,P.Z)(function*(){e.state=0,e.start()}))}o_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ure extends A${constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function Yne(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:ye(),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(Se(void 0===f||"string"==typeof f),Kn.fromBase64String(f||"")):(Se(void 0===f||f instanceof Uint8Array),Kn.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const f=void 0===d.code?L.UNKNOWN:gj(d.code);return new J(f,d.message||"")}(o);n=new Ij(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=eo(t,r.document.name),s=wn(r.document.updateTime),o=r.document.createTime?wn(r.document.createTime):Re.min(),a=new _r({mapValue:{fields:r.document.fields}}),u=Qt.newFoundDocument(i,s,o,a);n=new AI(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=eo(t,r.document),s=r.readTime?wn(r.readTime):Re.min(),o=Qt.newNoDocument(i,s);n=new AI([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=eo(t,r.document);n=new AI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ye();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new $ne(i,s);n=new vj(r.targetId,o)}}var d;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Re.min():o.readTime?wn(o.readTime):Re.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=Lg(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=_I(u)?{documents:Pj(s,u)}:{query:gS(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Aj(s,o.resumeToken);const d=dS(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Re.min())>0){a.readTime=eh(s,o.snapshotVersion.toTimestamp());const d=dS(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function Xne(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=Lg(this.serializer),n.removeTarget=e,this.e_(n)}}class Bre extends A${constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function Jne(t,e){return t&&t.length>0?(Se(void 0!==e),t.map(n=>function(i,s){let o=wn(i.updateTime?i.updateTime:s);return o.isEqual(Re.min())&&(o=wn(s)),new Fne(o,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=wn(e.commitTime);return this.listener.I_(r,n)}return Se(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Lg(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Fg(this.serializer,r))};this.e_(n)}}class jre extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new J(L.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(L.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(L.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class Hre{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(En(n),this.f_=!1):te("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Gre{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{r.enqueueAndForget((0,P.Z)(function*(){var u;ru(o)&&(te("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,P.Z)(function*(f){const g=ae(f);g.C_.add(4),yield uh(g),g.M_.set("Unknown"),g.C_.delete(4),yield Wg(g)}),function d(f){return u.apply(this,arguments)})(o))}))}),this.M_=new Hre(r,i)}}function Wg(t){return BS.apply(this,arguments)}function BS(){return BS=(0,P.Z)(function*(t){if(ru(t))for(const e of t.v_)yield e(!0)}),BS.apply(this,arguments)}function uh(t){return jS.apply(this,arguments)}function jS(){return jS=(0,P.Z)(function*(t){for(const e of t.v_)yield e(!1)}),jS.apply(this,arguments)}function BI(t,e){const n=ae(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),GS(n)?HS(n):lh(n).Ho()&&$S(n,e))}function Zg(t,e){const n=ae(t),r=lh(n);n.D_.delete(e),r.Ho()&&C$(n,e),0===n.D_.size&&(r.Ho()?r.Zo():ru(n)&&n.M_.set("Unknown"))}function $S(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}lh(t).u_(e)}function C$(t,e){t.x_.Oe(e),lh(t).c_(e)}function HS(t){t.x_=new Gne({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),lh(t).start(),t.M_.g_()}function GS(t){return ru(t)&&!lh(t).jo()&&t.D_.size>0}function ru(t){return 0===ae(t).C_.size}function D$(t){t.x_=void 0}function qre(t){return qS.apply(this,arguments)}function qS(){return qS=(0,P.Z)(function*(t){t.D_.forEach((e,n)=>{$S(t,e)})}),qS.apply(this,arguments)}function zre(t,e){return zS.apply(this,arguments)}function zS(){return zS=(0,P.Z)(function*(t,e){D$(t),GS(t)?(t.M_.w_(e),HS(t)):t.M_.set("Unknown")}),zS.apply(this,arguments)}function Wre(t,e,n){return WS.apply(this,arguments)}function WS(){return WS=(0,P.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof Ij&&2===e.state&&e.cause)try{yield(r=(0,P.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.D_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.D_.delete(u),s.x_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield jI(t,r)}else if(e instanceof AI?t.x_.$e(e):e instanceof vj?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(Re.min()))try{const r=yield p$(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.D_.get(d);f&&s.D_.set(d,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const f=s.D_.get(u);if(!f)return;s.D_.set(u,f.withResumeToken(Kn.EMPTY_BYTE_STRING,f.snapshotVersion)),C$(s,u);const g=new qo(f.target,u,d,f.sequenceNumber);$S(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){te("RemoteStore","Failed to raise snapshot:",r),yield jI(t,r)}var r}),WS.apply(this,arguments)}function jI(t,e,n){return ZS.apply(this,arguments)}function ZS(){return ZS=(0,P.Z)(function*(t,e,n){if(!qa(e))throw e;t.C_.add(1),yield uh(t),t.M_.set("Offline"),n||(n=()=>p$(t.localStore)),t.asyncQueue.enqueueRetryable((0,P.Z)(function*(){te("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Wg(t)}))}),ZS.apply(this,arguments)}function b$(t,e){return e().catch(n=>jI(t,n,e))}function ch(t){return KS.apply(this,arguments)}function KS(){return KS=(0,P.Z)(function*(t){const e=ae(t),n=iu(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;Zre(e);)try{const i=yield Mre(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,Kre(e,i)}catch(i){yield jI(e,i)}S$(e)&&R$(e)}),KS.apply(this,arguments)}function Zre(t){return ru(t)&&t.b_.length<10}function Kre(t,e){t.b_.push(e);const n=iu(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function S$(t){return ru(t)&&!iu(t).jo()&&t.b_.length>0}function R$(t){iu(t).start()}function Qre(t){return QS.apply(this,arguments)}function QS(){return QS=(0,P.Z)(function*(t){iu(t).E_()}),QS.apply(this,arguments)}function Yre(t){return YS.apply(this,arguments)}function YS(){return YS=(0,P.Z)(function*(t){const e=iu(t);for(const n of t.b_)e.P_(n.mutations)}),YS.apply(this,arguments)}function Jre(t,e,n){return JS.apply(this,arguments)}function JS(){return JS=(0,P.Z)(function*(t,e,n){const r=t.b_.shift(),i=uS.from(r,e,n);yield b$(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ch(t)}),JS.apply(this,arguments)}function Xre(t,e){return XS.apply(this,arguments)}function XS(){return XS=(0,P.Z)(function*(t,e){var n;e&&iu(t).h_&&(yield(n=(0,P.Z)(function*(i,s){if(pj(a=s.code)&&a!==L.ABORTED){const o=i.b_.shift();iu(i).Yo(),yield b$(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield ch(i)}var a}),function r(i,s){return n.apply(this,arguments)})(t,e)),S$(t)&&R$(t)}),XS.apply(this,arguments)}function P$(t,e){return eR.apply(this,arguments)}function eR(){return eR=(0,P.Z)(function*(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=ru(n);n.C_.add(3),yield uh(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Wg(n)}),eR.apply(this,arguments)}function tR(t,e){return nR.apply(this,arguments)}function nR(){return nR=(0,P.Z)(function*(t,e){const n=ae(t);e?(n.C_.delete(2),yield Wg(n)):e||(n.C_.add(2),yield uh(n),n.M_.set("Unknown"))}),nR.apply(this,arguments)}function lh(t){return t.O_||(t.O_=function(n,r,i){const s=ae(n);return s.A_(),new Ure(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:qre.bind(null,t),Io:zre.bind(null,t),a_:Wre.bind(null,t)}),t.v_.push(function(){var e=(0,P.Z)(function*(n){n?(t.O_.Yo(),GS(t)?HS(t):t.M_.set("Unknown")):(yield t.O_.stop(),D$(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function iu(t){return t.N_||(t.N_=function(n,r,i){const s=ae(n);return s.A_(),new Bre(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:Qre.bind(null,t),Io:Xre.bind(null,t),T_:Yre.bind(null,t),I_:Jre.bind(null,t)}),t.v_.push(function(){var e=(0,P.Z)(function*(n){n?(t.N_.Yo(),yield ch(t)):(yield t.N_.stop(),t.b_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class rR{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new rR(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new J(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dh(t,e){if(En("AsyncQueue",`${e}: ${t}`),qa(t))return new J(L.UNAVAILABLE,`${e}: ${t}`);throw t}class hh{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=Rg(),this.sortedSet=new jt(this.comparator)}static emptySet(e){return new hh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof hh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new hh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class N${constructor(){this.B_=new jt(ce.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):ye():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class fh{constructor(e,n,r,i,s,o,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new fh(e,n,hh.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class eie{constructor(){this.k_=void 0,this.listeners=[]}}class tie{constructor(){this.queries=new Ho(e=>KB(e),bg),this.onlineState="Unknown",this.q_=new Set}}function iR(t,e){return sR.apply(this,arguments)}function sR(){return sR=(0,P.Z)(function*(t,e){const n=ae(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new eie),i)try{s.k_=yield n.onListen(r)}catch(o){const a=dh(o,`Initialization of query '${Kd(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&uR(n)}),sR.apply(this,arguments)}function oR(t,e){return aR.apply(this,arguments)}function aR(){return aR=(0,P.Z)(function*(t,e){const n=ae(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),aR.apply(this,arguments)}function nie(t,e){const n=ae(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&uR(n)}function rie(t,e,n){const r=ae(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function uR(t){t.q_.forEach(e=>{e.next()})}class cR{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new fh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=fh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class iie{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class M${constructor(e){this.serializer=e}hs(e){return eo(this.serializer,e)}Ps(e){return e.metadata.exists?Rj(this.serializer,e.document,!1):Qt.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return wn(e)}}class sie{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=x$(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=ft.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new M$(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.hs(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Qe()).add(s);n.set(o,a)}}return n}complete(){var e=this;return(0,P.Z)(function*(){const n=yield function xre(t,e,n,r){return NS.apply(this,arguments)}(e.localStore,new M$(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield kre(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function x$(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class k${constructor(e){this.key=e}}class O${constructor(e){this.key=e}}class V${constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Qe(),this.mutatedKeys=Qe(),this._a=YB(e),this.aa=new hh(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new N$,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{const _=i.get(f),y=Sg(this.query,g)?g:null,E=!!_&&this.mutatedKeys.has(_.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let S=!1;_&&y?_.data.isEqual(y.data)?E!==A&&(r.track({type:3,doc:y}),S=!0):this.ha(_,y)||(r.track({type:2,doc:y}),S=!0,(u&&this._a(y,u)>0||d&&this._a(y,d)<0)&&(a=!0)):!_&&y?(r.track({type:0,doc:y}),S=!0):_&&!y&&(r.track({type:1,doc:_}),S=!0,(u||d)&&(a=!0)),S&&(y?(o=o.add(y),s=A?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((f,g)=>function(y,E){const A=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return A(y)-A(E)}(f.type,g.type)||this._a(f.doc,g.doc)),this.Pa(r),i=null!=i&&i;const a=n&&!i?this.Ia():[],u=0===this.oa.size&&this.current&&!i?1:0,d=u!==this.sa;return this.sa=u,0!==o.length||d?{snapshot:new fh(this.query,e.aa,s,o,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new N$,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Qe(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new O$(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new k$(r))}),n}da(e){this.ia=e.ls,this.oa=Qe();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return fh.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class oie{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class aie{constructor(e){this.key=e,this.Ra=!1}}class uie{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Ho(a=>KB(a),bg),this.fa=new Map,this.ga=new Set,this.pa=new jt(ce.comparator),this.ya=new Map,this.wa=new TS,this.Sa={},this.ba=new Map,this.Da=Oc.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function cie(t,e){return lR.apply(this,arguments)}function lR(){return lR=(0,P.Z)(function*(t,e){const n=xR(t);let r,i;const s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=yield oh(n.localStore,Jr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield dR(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&BI(n.remoteStore,o)}return i}),lR.apply(this,arguments)}function dR(t,e,n,r,i){return hR.apply(this,arguments)}function hR(){return hR=(0,P.Z)(function*(t,e,n,r,i){t.va=(g,_,y)=>{return(E=(0,P.Z)(function*(S,O,R,U){let ne=O.view.ca(R);ne.Zi&&(ne=yield OI(S.localStore,O.query,!1).then(({documents:Tn})=>O.view.ca(Tn,ne)));const oe=U&&U.targetChanges.get(O.targetId),Oe=U&&null!=U.targetMismatches.get(O.targetId),gt=O.view.applyChanges(ne,S.isPrimaryClient,oe,Oe);return wR(S,O.targetId,gt.Ta),gt.snapshot}),function A(S,O,R,U){return E.apply(this,arguments)})(t,g,_,y);var E};const s=yield OI(t.localStore,e,!0),o=new V$(e,s.ls),a=o.ca(s.documents),u=Og.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),d=o.applyChanges(a,t.isPrimaryClient,u);wR(t,n,d.Ta);const f=new oie(e,n,o);return t.ma.set(e,f),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),d.snapshot}),hR.apply(this,arguments)}function lie(t,e){return fR.apply(this,arguments)}function fR(){return fR=(0,P.Z)(function*(t,e){const n=ae(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!bg(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ah(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Zg(n.remoteStore,r.targetId),ph(n,r.targetId)}).catch(Ga))):(ph(n,r.targetId),yield ah(n.localStore,r.targetId,!0))}),fR.apply(this,arguments)}function pR(){return pR=(0,P.Z)(function*(t,e,n){const r=kR(t);try{const i=yield function(o,a){const u=ae(o),d=rn.now(),f=a.reduce((y,E)=>y.add(E.key),Qe());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=fi(),A=Qe();return u.ss.getEntries(y,f).next(S=>{E=S,E.forEach((O,R)=>{R.isValidDocument()||(A=A.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,E)).next(S=>{g=S;const O=[];for(const R of a){const U=Bne(R,g.get(R.key).overlayedDocument);null!=U&&O.push(new Go(R.key,U,kB(U.value.mapValue),sn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,O,a)}).next(S=>{_=S;const O=S.applyToLocalDocumentSet(g,A);return u.documentOverlayCache.saveOverlays(y,S.batchId,O)})}).then(()=>({batchId:_.batchId,changes:XB(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.Sa[o.currentUser.toKey()];d||(d=new jt(je)),d=d.insert(a,u),o.Sa[o.currentUser.toKey()]=d}(r,i.batchId,n),yield zo(r,i.changes),yield ch(r.remoteStore)}catch(i){const s=dh(i,"Failed to persist write");n.reject(s)}}),pR.apply(this,arguments)}function L$(t,e){return gR.apply(this,arguments)}function gR(){return gR=(0,P.Z)(function*(t,e){const n=ae(t);try{const r=yield function Nre(t,e){const n=ae(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((f,g)=>{const _=i.get(g);if(!_)return;a.push(n.qr.removeMatchingKeys(s,f.removedDocuments,g).next(()=>n.qr.addMatchingKeys(s,f.addedDocuments,g)));let y=_.withSequenceNumber(s.currentSequenceNumber);var A,S,O;null!==e.targetMismatches.get(g)?y=y.withResumeToken(Kn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(g,y),S=y,O=f,(0===(A=_).resumeToken.approximateByteSize()||S.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8||O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(s,y))});let u=fi(),d=Qe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(g$(s,o,e.documentUpdates).next(f=>{u=f.us,d=f.cs})),!r.isEqual(Re.min())){const f=n.qr.getLastRemoteSnapshotVersion(s).next(g=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.ts=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(Se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Se(o.Ra):i.removedDocuments.size>0&&(Se(o.Ra),o.Ra=!1))}),yield zo(n,r,e)}catch(r){yield Ga(r)}}),gR.apply(this,arguments)}function F$(t,e,n){const r=ae(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=ae(o);u.onlineState=a;let d=!1;u.queries.forEach((f,g)=>{for(const _ of g.listeners)_.Q_(a)&&(d=!0)}),d&&uR(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function hie(t,e,n){return mR.apply(this,arguments)}function mR(){return mR=(0,P.Z)(function*(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new jt(ce.comparator);o=o.insert(s,Qt.newNoDocument(s,Re.min()));const a=Qe().add(s),u=new kg(Re.min(),new Map,new jt(je),o,a);yield L$(r,u),r.pa=r.pa.remove(s),r.ya.delete(e),TR(r)}else yield ah(r.localStore,e,!1).then(()=>ph(r,e,n)).catch(Ga)}),mR.apply(this,arguments)}function fie(t,e){return _R.apply(this,arguments)}function _R(){return _R=(0,P.Z)(function*(t,e){const n=ae(t),r=e.batch.batchId;try{const i=yield function Pre(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,d,f){const g=d.batch,_=g.keys();let y=x.resolve();return _.forEach(E=>{y=y.next(()=>f.getEntry(u,E)).next(A=>{const S=d.docVersions.get(E);Se(null!==S),A.version.compareTo(S)<0&&(g.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),f.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Qe();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);ER(n,r,null),IR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield zo(n,i)}catch(i){yield Ga(i)}}),_R.apply(this,arguments)}function pie(t,e,n){return yR.apply(this,arguments)}function yR(){return yR=(0,P.Z)(function*(t,e,n){const r=ae(t);try{const i=yield function(o,a){const u=ae(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,a).next(g=>(Se(null!==g),f=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);ER(r,e,n),IR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield zo(r,i)}catch(i){yield Ga(i)}}),yR.apply(this,arguments)}function vR(){return vR=(0,P.Z)(function*(t,e){const n=ae(t);ru(n.remoteStore)||te("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=ae(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=dh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),vR.apply(this,arguments)}function IR(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function ER(t,e,n){const r=ae(t);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function ph(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||U$(t,r)})}function U$(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(Zg(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),TR(t))}function wR(t,e,n){for(const r of n)r instanceof k$?(t.wa.addReference(r.key,e),mie(t,r)):r instanceof O$?(te("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||U$(t,r.key)):ye()}function mie(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(te("SyncEngine","New document in limbo: "+n),t.ga.add(r),TR(t))}function TR(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new ce(ft.fromString(e)),r=t.Da.next();t.ya.set(r,new aie(n)),t.pa=t.pa.insert(n,r),BI(t.remoteStore,new qo(Jr(Wd(n.path)),r,"TargetPurposeLimboResolution",Di._e))}}function zo(t,e,n){return AR.apply(this,arguments)}function AR(){return AR=(0,P.Z)(function*(t,e,n){const r=ae(t),i=[],s=[],o=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,u)=>{o.push(r.va(u,e,n).then(d=>{if((d||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,d?.fromCache?"not-current":"current"),d){i.push(d);const f=SS.Qi(u.targetId,d);s.push(f)}}))}),yield Promise.all(o),r.Va.a_(i),yield(a=(0,P.Z)(function*(d,f){const g=ae(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>x.forEach(f,y=>x.forEach(y.ki,E=>g.persistence.referenceDelegate.addReference(_,y.targetId,E)).next(()=>x.forEach(y.qi,E=>g.persistence.referenceDelegate.removeReference(_,y.targetId,E)))))}catch(_){if(!qa(_))throw _;te("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of f){const y=_.targetId;if(!_.fromCache){const E=g.ts.get(y),S=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);g.ts=g.ts.insert(y,S)}}}),function u(d,f){return a.apply(this,arguments)})(r.localStore,s))}),AR.apply(this,arguments)}function _ie(t,e){return CR.apply(this,arguments)}function CR(){return CR=(0,P.Z)(function*(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=yield f$(n.localStore,e);n.currentUser=e,(s=n).ba.forEach(a=>{a.forEach(u=>{u.reject(new J(L.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield zo(n,r._s)}var s}),CR.apply(this,arguments)}function yie(t,e){const n=ae(t),r=n.ya.get(e);if(r&&r.Ra)return Qe().add(r.key);{let i=Qe();const s=n.fa.get(e);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function vie(t,e){return DR.apply(this,arguments)}function DR(){return DR=(0,P.Z)(function*(t,e){const n=ae(t),r=yield OI(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&wR(n,e.targetId,i.Ta),i}),DR.apply(this,arguments)}function Iie(t,e){return bR.apply(this,arguments)}function bR(){return bR=(0,P.Z)(function*(t,e){const n=ae(t);return _$(n.localStore,e).then(r=>zo(n,r))}),bR.apply(this,arguments)}function Eie(t,e,n,r){return SR.apply(this,arguments)}function SR(){return SR=(0,P.Z)(function*(t,e,n,r){const i=ae(t),s=yield function(a,u){const d=ae(a),f=ae(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>f.Cn(g,u).next(_=>_?d.localDocuments.getDocuments(g,_):x.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===n?yield ch(i.remoteStore):"acknowledged"===n||"rejected"===n?(ER(i,e,r||null),IR(i,e),u=e,ae(ae(i.localStore).mutationQueue).Fn(u)):ye(),yield zo(i,s)):te("SyncEngine","Cannot apply mutation batch with id: "+e)}),SR.apply(this,arguments)}function RR(){return RR=(0,P.Z)(function*(t,e){const n=ae(t);if(xR(n),kR(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield B$(n,r.toArray());n.Ca=!0,yield tR(n.remoteStore,!0);for(const s of i)BI(n.remoteStore,s)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ph(n,o),ah(n.localStore,o,!0))),Zg(n.remoteStore,o)}),yield i,yield B$(n,r),function(o){const a=ae(o);a.ya.forEach((u,d)=>{Zg(a.remoteStore,d)}),a.wa.Vr(),a.ya=new Map,a.pa=new jt(ce.comparator)}(n),n.Ca=!1,yield tR(n.remoteStore,!1)}}),RR.apply(this,arguments)}function B$(t,e,n){return PR.apply(this,arguments)}function PR(){return PR=(0,P.Z)(function*(t,e,n){const r=ae(t),i=[],s=[];for(const o of e){let a;const u=r.fa.get(o);if(u&&0!==u.length){a=yield oh(r.localStore,Jr(u[0]));for(const d of u){const f=r.ma.get(d),g=yield vie(r,f);g.snapshot&&s.push(g.snapshot)}}else{const d=yield m$(r.localStore,o);a=yield oh(r.localStore,d),yield dR(r,j$(d),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i}),PR.apply(this,arguments)}function j$(t){return zB(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Tie(t){return n=ae(t).localStore,ae(ae(n).persistence).Bi();var n}function Aie(t,e,n,r){return NR.apply(this,arguments)}function NR(){return NR=(0,P.Z)(function*(t,e,n,r){const i=ae(t);if(i.Ca)return void te("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield _$(i.localStore,QB(s[0])),a=kg.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Kn.EMPTY_BYTE_STRING);yield zo(i,o,a);break}case"rejected":yield ah(i.localStore,e,!0),ph(i,e,r);break;default:ye()}}),NR.apply(this,arguments)}function Cie(t,e,n){return MR.apply(this,arguments)}function MR(){return MR=(0,P.Z)(function*(t,e,n){const r=xR(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){te("SyncEngine","Adding an already active target "+i);continue}const s=yield m$(r.localStore,i),o=yield oh(r.localStore,s);yield dR(r,j$(s),o.targetId,!1,o.resumeToken),BI(r.remoteStore,o)}for(const i of n)r.fa.has(i)&&(yield ah(r.localStore,i,!1).then(()=>{Zg(r.remoteStore,i),ph(r,i)}).catch(Ga))}}),MR.apply(this,arguments)}function xR(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=L$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hie.bind(null,e),e.Va.a_=nie.bind(null,e.eventManager),e.Va.Fa=rie.bind(null,e.eventManager),e}function kR(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pie.bind(null,e),e}class Kg{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,P.Z)(function*(){n.serializer=zg(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return h$(this.persistence,new d$,e.initialUser,this.serializer)}createPersistence(e){return new AS(MI.jr,this.serializer)}createSharedClientState(e){return new E$}terminate(){var e=this;return(0,P.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class OR extends Kg{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,P.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield kR(r.xa.syncEngine),yield ch(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return h$(this.persistence,new d$,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new n$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new Jte(n,this.persistence);return new Yte(e.asyncQueue,r)}createPersistence(e){const n=bS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?xr.withCacheSize(this.cacheSizeBytes):xr.DEFAULT;return new DS(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,T$(),UI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new E$}}class $$ extends OR{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,P.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof VS&&(r.sharedClientState.syncEngine={Ys:Eie.bind(null,i),Zs:Aie.bind(null,i),Xs:Cie.bind(null,i),Bi:Tie.bind(null,i),Js:Iie.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var s=(0,P.Z)(function*(o){yield function wie(t,e){return RR.apply(this,arguments)}(r.xa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const n=T$();if(!VS.D(n))throw new J(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=bS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new VS(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class gh{initialize(e,n){var r=this;return(0,P.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>F$(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=_ie.bind(null,r.syncEngine),yield tR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new tie}createDatastore(e){const n=zg(e.databaseInfo.databaseId),r=new Fre(e.databaseInfo);return new jre(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>F$(this.syncEngine,n,0),a=w$.D()?new w$:new Ore,new Gre(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,d,f){const g=new uie(i,s,o,a,u,d);return f&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,P.Z)(function*(r){const i=ae(r);te("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield uh(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function H$(t,e=10240){let n=0;return{read:()=>(0,P.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,P.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class $I{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):En("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class Sie{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Zn,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,P.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,P.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,P.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const s=yield e.Ka(i);return new iie(JSON.parse(s),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,P.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,P.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,P.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class Rie{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,P.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new J(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,P.Z)(function*(o,a){const u=ae(o),d=Lg(u.serializer)+"/documents",f={documents:a.map(E=>Vg(u.serializer,E))},g=yield u.Co("BatchGetDocuments",d,f,a.length),_=new Map;g.forEach(E=>{const A=function Qne(t,e){return"found"in e?function(r,i){Se(!!i.found);const s=eo(r,i.found.name),o=wn(i.found.updateTime),a=i.found.createTime?wn(i.found.createTime):Re.min(),u=new _r({mapValue:{fields:i.found.fields}});return Qt.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){Se(!!i.missing),Se(!!i.readTime);const s=eo(r,i.missing),o=wn(i.readTime);return Qt.newNoDocument(s,o)}(t,e):ye()}(u.serializer,E);_.set(A.key.toString(),A)});const y=[];return a.forEach(E=>{const A=_.get(E.toString());Se(!!A),y.push(A)}),y}),function s(o,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,P.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=ce.fromPath(i);e.mutations.push(new oS(s,e.precondition(s)))}),yield(r=(0,P.Z)(function*(s,o){const a=ae(s),u=Lg(a.serializer)+"/documents",d={writes:o.map(f=>Fg(a.serializer,f))};yield a.wo("Commit",u,d)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ye();n=Re.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new J(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Re.min())?sn.exists(!1):sn.updateTime(n):sn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Re.min()))throw new J(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sn.updateTime(n)}return sn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Pie{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new FS(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,P.Z)(function*(){const n=new Rie(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.ja(s)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!vg(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!pj(n)}return!1}}class Nie{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=rr.UNAUTHENTICATED,this.clientId=lB.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,P.Z)(function*(a){te("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(te("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,P.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,P.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=dh(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function HI(t,e){return VR.apply(this,arguments)}function VR(){return VR=(0,P.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,P.Z)(function*(s){r.isEqual(s)||(yield f$(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),VR.apply(this,arguments)}function LR(t,e){return FR.apply(this,arguments)}function FR(){return FR=(0,P.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield UR(t);te("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>P$(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>P$(e.remoteStore,s)),t._onlineComponents=e}),FR.apply(this,arguments)}function G$(t){return"FirebaseError"===t.name?t.code===L.FAILED_PRECONDITION||t.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function UR(t){return BR.apply(this,arguments)}function BR(){return BR=(0,P.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{yield HI(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!G$(n))throw n;di("Error using user provided cache. Falling back to memory cache: "+n),yield HI(t,new Kg)}}else te("FirestoreClient","Using default OfflineComponentProvider"),yield HI(t,new Kg);return t._offlineComponents}),BR.apply(this,arguments)}function GI(t){return jR.apply(this,arguments)}function jR(){return jR=(0,P.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),yield LR(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),yield LR(t,new gh))),t._onlineComponents}),jR.apply(this,arguments)}function q$(t){return UR(t).then(e=>e.persistence)}function mh(t){return UR(t).then(e=>e.localStore)}function z$(t){return GI(t).then(e=>e.remoteStore)}function $R(t){return GI(t).then(e=>e.syncEngine)}function _h(t){return HR.apply(this,arguments)}function HR(){return HR=(0,P.Z)(function*(t){const e=yield GI(t),n=e.eventManager;return n.onListen=cie.bind(null,e.syncEngine),n.onUnlisten=lie.bind(null,e.syncEngine),n}),HR.apply(this,arguments)}function Z$(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget((0,P.Z)(function*(){return function(s,o,a,u,d){const f=new $I({next:_=>{o.enqueueAndForget(()=>oR(s,g));const y=_.docs.has(a);!y&&_.fromCache?d.reject(new J(L.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&_.fromCache&&u&&"server"===u.source?d.reject(new J(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new cR(Wd(a.path),f,{includeMetadataChanges:!0,J_:!0});return iR(s,g)}(yield _h(t),t.asyncQueue,e,n,r)})),r.promise}function K$(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget((0,P.Z)(function*(){return function(s,o,a,u,d){const f=new $I({next:_=>{o.enqueueAndForget(()=>oR(s,g)),_.fromCache&&"server"===u.source?d.reject(new J(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new cR(a,f,{includeMetadataChanges:!0,J_:!0});return iR(s,g)}(yield _h(t),t.asyncQueue,e,n,r)})),r.promise}function Q$(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Y$=new Map;function GR(t,e,n){if(!n)throw new J(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function J$(t,e,n,r){if(!0===e&&!0===r)throw new J(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function X$(t){if(!ce.isDocumentKey(t))throw new J(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function eH(t){if(ce.isDocumentKey(t))throw new J(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qI(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":ye()}function ot(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qI(t);throw new J(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function tH(t,e){if(e<=0)throw new J(L.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class nH{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new J(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new J(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}J$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Q$(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new J(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nH({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new J(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nH(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Ute;switch(r.type){case"firstParty":return new Hte(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Y$.get(n);r&&(te("ComponentProvider","Removing Datastore"),Y$.delete(n),r.terminate())}(this),Promise.resolve()}}class yr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yr(this.firestore,e,this._query)}}class Yt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new to(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yt(this.firestore,e,this._key)}}class to extends yr{constructor(e,n,r){super(e,n,Wd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new ce(e))}withConverter(e){return new to(this.firestore,e,this._path)}}function iH(t,e,...n){if(t=(0,be.m9)(t),GR("collection","path",e),t instanceof Qg){const r=ft.fromString(e,...n);return eH(r),new to(t,null,r)}{if(!(t instanceof Yt||t instanceof to))throw new J(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return eH(r),new to(t.firestore,null,r)}}function zI(t,e,...n){if(t=(0,be.m9)(t),1===arguments.length&&(e=lB.newId()),GR("doc","path",e),t instanceof Qg){const r=ft.fromString(e,...n);return X$(r),new Yt(t,null,new ce(r))}{if(!(t instanceof Yt||t instanceof to))throw new J(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return X$(r),new Yt(t.firestore,t instanceof to?t.converter:null,new ce(r))}}function sH(t,e){return t=(0,be.m9)(t),e=(0,be.m9)(e),(t instanceof Yt||t instanceof to)&&(e instanceof Yt||e instanceof to)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function qR(t,e){return t=(0,be.m9)(t),e=(0,be.m9)(e),t instanceof yr&&e instanceof yr&&t.firestore===e.firestore&&bg(t._query,e._query)&&t.converter===e.converter}class Hie{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new FS(this,"async_queue_retry"),this.iu=()=>{const n=UI();n&&te("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=UI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=UI();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Zn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,P.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!qa(n))throw n;te("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,En("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=rR.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&ye()}verifyOperationInProgress(){}uu(){var e=this;return(0,P.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function zR(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class Gie{constructor(){this._progressObserver={},this._taskCompletionResolver=new Zn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class $t extends Qg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Hie,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||oH(this),this._firestoreClient.terminate()}}function gn(t){return t._firestoreClient||oH(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function oH(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new vne(t._databaseId,u,t._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Q$(f.experimentalLongPollingOptions),f.useFetchStreams));var u,f;t._firestoreClient=new Nie(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function aH(t,e,n){const r=new Zn;return t.asyncQueue.enqueue((0,P.Z)(function*(){try{yield HI(t,n),yield LR(t,e),r.resolve()}catch(i){const s=i;if(!G$(s))throw s;di("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function uH(t){if(t._initialized||t._terminated)throw new J(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class no{constructor(e){this._byteString=e}static fromBase64String(e){try{return new no(Kn.fromBase64String(e))}catch(n){throw new J(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new no(Kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wo{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new J(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lc{constructor(e){this._methodName=e}}class WI{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}const tse=/^__.*__$/;class nse{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Go(e,this.data,this.fieldMask,n,this.fieldTransforms):new Jd(e,this.data,n,this.fieldTransforms)}}class cH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Go(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lH(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}class ZI{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new ZI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return YI(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(lH(this.Iu)&&tse.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class rse{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zg(e)}pu(e,n,r,i=!1){return new ZI({Iu:e,methodName:n,gu:r,path:Kt.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fc(t){const e=t._freezeSettings(),n=zg(t._databaseId);return new rse(t._databaseId,!!e.ignoreUndefinedProperties,n)}function KI(t,e,n,r,i,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);QR("Data must be an object, but it was:",o,r);const a=fH(r,o);let u,d;if(s.merge)u=new hi(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const g of s.mergeFields){const _=Xg(e,g,n);if(!o.contains(_))throw new J(L.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);gH(f,_)||f.push(_)}u=new hi(f),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new nse(new _r(a),u,d)}class Jg extends Lc{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jg}}function dH(t,e,n){return new ZI({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class WR extends Lc{_toFieldTransform(e){return new Ng(e.path,new Qd)}isEqual(e){return e instanceof WR}}class ise extends Lc{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=dH(this,e,!0),r=this.yu.map(s=>Uc(s,n)),i=new Sc(r);return new Ng(e.path,i)}isEqual(e){return this===e}}class sse extends Lc{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=dH(this,e,!0),r=this.yu.map(s=>Uc(s,n)),i=new Rc(r);return new Ng(e.path,i)}isEqual(e){return this===e}}class ose extends Lc{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new Yd(e.serializer,rj(e.serializer,this.wu));return new Ng(e.path,n)}isEqual(e){return this===e}}function ZR(t,e,n,r){const i=t.pu(1,e,n);QR("Data must be an object, but it was:",i,r);const s=[],o=_r.empty();za(r,(u,d)=>{const f=QI(e,u,n);d=(0,be.m9)(d);const g=i.Ru(f);if(d instanceof Jg)s.push(f);else{const _=Uc(d,g);null!=_&&(s.push(f),o.set(f,_))}});const a=new hi(s);return new cH(o,a,i.fieldTransforms)}function KR(t,e,n,r,i,s){const o=t.pu(1,e,n),a=[Xg(e,r,n)],u=[i];if(s.length%2!=0)throw new J(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(Xg(e,s[_])),u.push(s[_+1]);const d=[],f=_r.empty();for(let _=a.length-1;_>=0;--_)if(!gH(d,a[_])){const y=a[_];let E=u[_];E=(0,be.m9)(E);const A=o.Ru(y);if(E instanceof Jg)d.push(y);else{const S=Uc(E,A);null!=S&&(d.push(y),f.set(y,S))}}const g=new hi(d);return new cH(f,g,o.fieldTransforms)}function hH(t,e,n,r=!1){return Uc(n,t.pu(r?4:3,e))}function Uc(t,e){if(pH(t=(0,be.m9)(t)))return QR("Unsupported field value:",e,t),fH(t,e);if(t instanceof Lc)return function(r,i){if(!lH(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Uc(a,i.Vu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if(null===(r=(0,be.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return rj(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=rn.fromDate(r);return{timestampValue:eh(i.serializer,s)}}if(r instanceof rn){const s=new rn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:eh(i.serializer,s)}}if(r instanceof WI)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof no)return{bytesValue:Aj(i.serializer,r._byteString)};if(r instanceof Yt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:hS(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${qI(r)}`)}(t,e)}function fH(t,e){const n={};return CB(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):za(t,(r,i)=>{const s=Uc(i,e.Eu(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function pH(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof rn||t instanceof WI||t instanceof no||t instanceof Yt||t instanceof Lc)}function QR(t,e,n){if(!pH(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=qI(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function Xg(t,e,n){if((e=(0,be.m9)(e))instanceof Wo)return e._internalPath;if("string"==typeof e)return QI(t,e);throw YI("Field path arguments must be of type string or ",t,!1,void 0,n)}const ase=new RegExp("[~\\*/\\[\\]]");function QI(t,e,n){if(e.search(ase)>=0)throw YI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wo(...e.split("."))._internalPath}catch{throw YI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function YI(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new J(L.INVALID_ARGUMENT,a+t+u)}function gH(t,e){return t.some(n=>n.isEqual(e))}class em{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new use(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(JI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class use extends em{data(){return super.data()}}function JI(t,e){return"string"==typeof e?QI(t,e):e instanceof Wo?e._internalPath:e._delegate._internalPath}function mH(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new J(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class YR{}class tm extends YR{}function su(t,e,...n){let r=[];e instanceof YR&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof yh).length,a=s.filter(u=>u instanceof nm).length;if(o>1||o>0&&a>0)throw new J(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class nm extends tm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new nm(e,n,r)}_apply(e){const n=this._parse(e);return IH(e._query,n),new yr(e.firestore,e.converter,iS(e._query,n))}_parse(e){const n=Fc(e.firestore);return function(s,o,a,u,d,f,g){let _;if(d.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new J(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){vH(g,f);const y=[];for(const E of g)y.push(yH(u,s,E));_={arrayValue:{values:y}}}else _=yH(u,s,g)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||vH(g,f),_=hH(a,"where",g,"in"===f||"not-in"===f);return ut.create(d,f,_)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class yh extends YR{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new yh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:St.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)IH(o,u),o=iS(o,u)}(e._query,n),new yr(e.firestore,e.converter,iS(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class JR extends tm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new JR(e,n)}_apply(e){const n=function(i,s,o){if(null!==i.startAt)throw new J(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new J(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cg(s,o)}(e._query,this._field,this._direction);return new yr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new $o(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class XI extends tm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new XI(e,n,r)}_apply(e){return new yr(e.firestore,e.converter,vI(e._query,this._limit,this._limitType))}}class eE extends tm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new eE(e,n,r)}_apply(e){const n=_H(e,this.type,this._docOrFields,this._inclusive);return new yr(e.firestore,e.converter,(s=n,new $o((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class tE extends tm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new tE(e,n,r)}_apply(e){const n=_H(e,this.type,this._docOrFields,this._inclusive);return new yr(e.firestore,e.converter,(s=n,new $o((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function _H(t,e,n,r){if(n[0]=(0,be.m9)(n[0]),n[0]instanceof em)return function(s,o,a,u,d){if(!u)throw new J(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const g of Zd(s))if(g.field.isKeyField())f.push(Dc(o,u.key));else{const _=u.data.field(g.field);if(hI(_))throw new J(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const y=g.field.canonicalString();throw new J(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(_)}return new Ja(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Fc(t.firestore);return function(o,a,u,d,f,g){const _=o.explicitOrderBy;if(f.length>_.length)throw new J(L.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let E=0;E<f.length;E++){const A=f[E];if(_[E].field.isKeyField()){if("string"!=typeof A)throw new J(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof A}`);if(!rS(o)&&-1!==A.indexOf("/"))throw new J(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${A}' contains a slash.`);const S=o.path.child(ft.fromString(A));if(!ce.isDocumentKey(S))throw new J(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const O=new ce(S);y.push(Dc(a,O))}else{const S=hH(u,d,A);y.push(S)}}return new Ja(y,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function yH(t,e,n){if("string"==typeof(n=(0,be.m9)(n))){if(""===n)throw new J(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rS(e)&&-1!==n.indexOf("/"))throw new J(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ft.fromString(n));if(!ce.isDocumentKey(r))throw new J(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dc(t,new ce(r))}if(n instanceof Yt)return Dc(t,n._key);throw new J(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qI(n)}.`)}function vH(t,e){if(!Array.isArray(t)||0===t.length)throw new J(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IH(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new J(L.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class XR{convertValue(e,n="none"){switch(Qa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ye()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return za(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new WI(pn(e.latitude),pn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=fI(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Eg(e));default:return null}}convertTimestamp(e){const n=Wa(e);return new rn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ft.fromString(e);Se(kj(r));const i=new Za(r.get(1),r.get(3)),s=new ce(r.popFirst(5));return i.isEqual(n)||En(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function nE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class _se extends XR{constructor(e){super(),this.firestore=e}convertBytes(e){return new no(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,n)}}class Bc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zo extends em{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(JI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class rm extends Zo{data(e={}){return super.data(e)}}class ou{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Bc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new rm(this._firestore,this._userDataWriter,r.key,r,new Bc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new rm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new rm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:vse(a.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function vse(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}function wH(t,e){return t instanceof Zo&&e instanceof Zo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ou&&e instanceof ou&&t._firestore===e._firestore&&qR(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class au extends XR{constructor(e){super(),this.firestore=e}convertBytes(e){return new no(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,n)}}function TH(t,e,n){t=ot(t,Yt);const r=ot(t.firestore,$t),i=nE(t.converter,e,n);return vh(r,[KI(Fc(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,sn.none())])}function AH(t,e,n,...r){t=ot(t,Yt);const i=ot(t.firestore,$t),s=Fc(i);let o;return o="string"==typeof(e=(0,be.m9)(e))||e instanceof Wo?KR(s,"updateDoc",t._key,e,n,r):ZR(s,"updateDoc",t._key,e),vh(i,[o.toMutation(t._key,sn.exists(!0))])}function CH(t,...e){var n,r,i;t=(0,be.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||zR(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(zR(e[o])){const g=e[o];e[o]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,d,f;if(t instanceof Yt)d=ot(t.firestore,$t),f=Wd(t._key.path),u={next:g=>{e[o]&&e[o](eP(d,t,g))},error:e[o+1],complete:e[o+2]};else{const g=ot(t,yr);d=ot(g.firestore,$t),f=g._query;const _=new au(d);u={next:y=>{e[o]&&e[o](new ou(d,_,g,y))},error:e[o+1],complete:e[o+2]},mH(t._query)}return function(_,y,E,A){const S=new $I(A),O=new cR(y,S,E);return _.asyncQueue.enqueueAndForget((0,P.Z)(function*(){return iR(yield _h(_),O)})),()=>{S.Na(),_.asyncQueue.enqueueAndForget((0,P.Z)(function*(){return oR(yield _h(_),O)}))}}(gn(d),f,a,u)}function vh(t,e){return function(r,i){const s=new Zn;return r.asyncQueue.enqueueAndForget((0,P.Z)(function*(){return function die(t,e,n){return pR.apply(this,arguments)}(yield $R(r),i,s)})),s.promise}(gn(t),e)}function eP(t,e,n){const r=n.docs.get(e._key),i=new au(t);return new Zo(t,i,e._key,r,new Bc(n.hasPendingWrites,n.fromCache),e.converter)}const Lse={maxAttempts:5};class DH{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Fc(e)}set(e,n,r){this._verifyNotCommitted();const i=uu(e,this._firestore),s=nE(i.converter,n,r),o=KI(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,sn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=uu(e,this._firestore);let o;return o="string"==typeof(n=(0,be.m9)(n))||n instanceof Wo?KR(this._dataReader,"WriteBatch.update",s._key,n,r,i):ZR(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,sn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=uu(e,this._firestore);return this._mutations=this._mutations.concat(new Xd(n._key,sn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uu(t,e){if((t=(0,be.m9)(t)).firestore!==e)throw new J(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class Fse extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Fc(n)}get(n){const r=uu(n,this._firestore),i=new _se(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return ye();const o=s[0];if(o.isFoundDocument())return new em(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new em(this._firestore,i,r._key,null,r.converter);throw ye()})}set(n,r,i){const s=uu(n,this._firestore),o=nE(s.converter,r,i),a=KI(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=uu(n,this._firestore);let a;return a="string"==typeof(r=(0,be.m9)(r))||r instanceof Wo?KR(this._dataReader,"Transaction.update",o._key,r,i,s):ZR(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=uu(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=uu(e,this._firestore),r=new au(this._firestore);return super.get(e).then(i=>new Zo(this._firestore,r,n._key,i._document,new Bc(!1,!1),n.converter))}}function nP(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new J("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function PH(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function NH(){if(!function _ne(){return typeof atob<"u"}())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Ud=Rd.SDK_VERSION,(0,Rd._registerComponent)(new dc.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new $t(new jte(r.getProvider("auth-internal")),new Gte(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new J(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Rd.registerVersion)(aB,"4.4.0",e),(0,Rd.registerVersion)(aB,"4.4.0","esm2017")}();class im{constructor(e){this._delegate=e}static fromBase64String(e){return NH(),new im(no.fromBase64String(e))}static fromUint8Array(e){return PH(),new im(no.fromUint8Array(e))}toBase64(){return NH(),this._delegate.toBase64()}toUint8Array(){return PH(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function rP(t){return function Zse(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class Kse{enableIndexedDbPersistence(e,n){return function zie(t,e){uH(t=ot(t,$t));const n=gn(t);if(n._uninitializedComponentsProvider)throw new J(L.FAILED_PRECONDITION,"SDK cache is already specified.");di("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new gh;return aH(n,i,new OR(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function Wie(t){uH(t=ot(t,$t));const e=gn(t);if(e._uninitializedComponentsProvider)throw new J(L.FAILED_PRECONDITION,"SDK cache is already specified.");di("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new gh;return aH(e,r,new $$(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Zie(t){if(t._initialized&&!t._terminated)throw new J(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Zn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,P.Z)(function*(){try{yield(n=(0,P.Z)(function*(i){if(!_s.D())return Promise.resolve();const s=i+"main";yield _s.delete(s)}),function r(i){return n.apply(this,arguments)})(bS(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class MH{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Za||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&di("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function rH(t,e,n,r={}){var i;const s=(t=ot(t,Qg))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=rr.MOCK_USER;else{a=(0,be.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new J(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new rr(d)}t._authCredentials=new Bte(new uB(a,u))}}(this._delegate,e,n,r)}enableNetwork(){return function Qie(t){return function Mie(t){return t.asyncQueue.enqueue((0,P.Z)(function*(){const e=yield q$(t),n=yield z$(t);return e.setNetworkEnabled(!0),function(i){const s=ae(i);return s.C_.delete(0),Wg(s)}(n)}))}(gn(t=ot(t,$t)))}(this._delegate)}disableNetwork(){return function Yie(t){return function xie(t){return t.asyncQueue.enqueue((0,P.Z)(function*(){const e=yield q$(t),n=yield z$(t);return e.setNetworkEnabled(!1),(r=(0,P.Z)(function*(s){const o=ae(s);o.C_.add(0),yield uh(o),o.M_.set("Offline")}),function i(s){return r.apply(this,arguments)})(n);var r}))}(gn(t=ot(t,$t)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,J$("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Kie(t){return function(n){const r=new Zn;return n.asyncQueue.enqueueAndForget((0,P.Z)(function*(){return function gie(t,e){return vR.apply(this,arguments)}(yield $R(n),r)})),r.promise}(gn(t=ot(t,$t)))}(this._delegate)}onSnapshotsInSync(e){return function Sse(t,e){return function Vie(t,e){const n=new $I(e);return t.asyncQueue.enqueueAndForget((0,P.Z)(function*(){return i=yield _h(t),s=n,ae(i).q_.add(s),void s.next();var i,s})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,P.Z)(function*(){return i=yield _h(t),s=n,void ae(i).q_.delete(s);var i,s}))}}(gn(t=ot(t,$t)),zR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ih(this,iH(this._delegate,e))}catch(n){throw Xr(n,"collection()","Firestore.collection()")}}doc(e){try{return new Yi(this,zI(this._delegate,e))}catch(n){throw Xr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ei(this,function $ie(t,e){if(t=ot(t,Qg),GR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(L.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new yr(t,null,(r=e,new $o(ft.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw Xr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Use(t,e,n){t=ot(t,$t);const r=Object.assign(Object.assign({},Lse),n);return function(s){if(s.maxAttempts<1)throw new J(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new Zn;return s.asyncQueue.enqueueAndForget((0,P.Z)(function*(){const d=yield function W$(t){return GI(t).then(e=>e.datastore)}(s);new Pie(s.asyncQueue,d,a,o,u).run()})),u.promise}(gn(t),i=>e(new Fse(t,i)),r)}(this._delegate,n=>e(new xH(this,n)))}batch(){return gn(this._delegate),new kH(new DH(this._delegate,e=>vh(this._delegate,e)))}loadBundle(e){return function Jie(t,e){const n=gn(t=ot(t,$t)),r=new Gie;return function Lie(t,e,n,r){const i=function(o,a){let u;return u="string"==typeof o?mj().encode(o):o,f=function(f,g){if(f instanceof Uint8Array)return H$(f,g);if(f instanceof ArrayBuffer)return H$(new Uint8Array(f),g);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new Sie(f,a);var f}(n,zg(e));t.asyncQueue.enqueueAndForget((0,P.Z)(function*(){!function Die(t,e,n){const r=ae(t);var i;(i=(0,P.Z)(function*(o,a,u){try{const d=yield a.getMetadata();if(yield function(E,A){const S=ae(E),O=wn(A.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",R=>S.Kr.getBundleMetadata(R,A.id)).then(R=>!!R&&R.createTime.compareTo(O)>=0)}(o.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(E=d).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);u._updateProgress(x$(d));const f=new sie(d,o.localStore,a.serializer);let g=yield a.Ma();for(;g;){const y=yield f.ea(g);y&&u._updateProgress(y),g=yield a.Ma()}const _=yield f.complete();return yield zo(o,_.ra,void 0),yield function(E,A){const S=ae(E);return S.persistence.runTransaction("Save bundle","readwrite",O=>S.Kr.saveBundleMetadata(O,A))}(o.localStore,d),u._completeWith(_.progress),Promise.resolve(_.na)}catch(d){return di("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var E}),function s(o,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield $R(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Xie(t,e){return function Fie(t,e){return t.asyncQueue.enqueue((0,P.Z)(function*(){return function(r,i){const s=ae(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield mh(t),e)}))}(gn(t=ot(t,$t)),e).then(n=>n?new yr(t,null,n.query):null)}(this._delegate,e).then(n=>n?new ei(this,n):null)}}class iE extends XR{constructor(e){super(),this.firestore=e}convertBytes(e){return new im(new no(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Yi.forKey(n,this.firestore,null)}}class xH{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new iE(e)}get(e){const n=$c(e);return this._delegate.get(n).then(r=>new sm(this._firestore,new Zo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=$c(e);return r?(nP("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=$c(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=$c(e);return this._delegate.delete(n),this}}class kH{constructor(e){this._delegate=e}set(e,n,r){const i=$c(e);return r?(nP("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=$c(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=$c(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class jc{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new rm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new om(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=jc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new jc(e,new iE(e),n),i.set(n,s)),s}}jc.INSTANCES=new WeakMap;class Yi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new iE(e)}static forPath(e,n,r){if(e.length%2!=0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Yi(n,new Yt(n._delegate,r,new ce(e)))}static forKey(e,n,r){return new Yi(n,new Yt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ih(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ih(this.firestore,iH(this._delegate,e))}catch(n){throw Xr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,be.m9)(e))instanceof Yt&&sH(this._delegate,e)}set(e,n){n=nP("DocumentReference.set",n);try{return n?TH(this._delegate,e,n):TH(this._delegate,e)}catch(r){throw Xr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?AH(this._delegate,e):AH(this._delegate,e,n,...r)}catch(i){throw Xr(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Dse(t){return vh(ot(t.firestore,$t),[new Xd(t._key,sn.none())])}(this._delegate)}onSnapshot(...e){const n=OH(e),r=VH(e,i=>new sm(this.firestore,new Zo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return CH(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function Ese(t){t=ot(t,Yt);const e=ot(t.firestore,$t),n=gn(e),r=new au(e);return function kie(t,e){const n=new Zn;return t.asyncQueue.enqueueAndForget((0,P.Z)(function*(){return(r=(0,P.Z)(function*(s,o,a){try{const u=yield function(f,g){const _=ae(f);return _.persistence.runTransaction("read document","readonly",y=>_.localDocuments.getDocument(y,g))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new J(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=dh(u,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield mh(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Zo(e,r,t._key,i,new Bc(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function wse(t){t=ot(t,Yt);const e=ot(t.firestore,$t);return Z$(gn(e),t._key,{source:"server"}).then(n=>eP(e,t,n))}(this._delegate):function Ise(t){t=ot(t,Yt);const e=ot(t.firestore,$t);return Z$(gn(e),t._key).then(n=>eP(e,t,n))}(this._delegate),n.then(r=>new sm(this.firestore,new Zo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Yi(this.firestore,this._delegate.withConverter(e?jc.getInstance(this.firestore,e):null))}}function Xr(t,e,n){return t.message=t.message.replace(e,n),t}function OH(t){for(const e of t)if("object"==typeof e&&!rP(e))return e;return{}}function VH(t,e){var n,r;let i;return i=rP(t[0])?t[0]:rP(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class sm{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Yi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return wH(this._delegate,e._delegate)}}class om extends sm{data(e){const n=this._delegate.data(e);return this._delegate._converter||function Fte(t,e){t||ye()}(void 0!==n),n}}class ei{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new iE(e)}where(e,n,r){try{return new ei(this.firestore,su(this._delegate,function cse(t,e,n){const r=e,i=JI("where",t);return nm._create(i,r,n)}(e,n,r)))}catch(i){throw Xr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new ei(this.firestore,su(this._delegate,function lse(t,e="asc"){const n=e,r=JI("orderBy",t);return JR._create(r,n)}(e,n)))}catch(r){throw Xr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ei(this.firestore,su(this._delegate,function dse(t){return tH("limit",t),XI._create("limit",t,"F")}(e)))}catch(n){throw Xr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new ei(this.firestore,su(this._delegate,function hse(t){return tH("limitToLast",t),XI._create("limitToLast",t,"L")}(e)))}catch(n){throw Xr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ei(this.firestore,su(this._delegate,function fse(...t){return eE._create("startAt",t,!0)}(...e)))}catch(n){throw Xr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ei(this.firestore,su(this._delegate,function pse(...t){return eE._create("startAfter",t,!1)}(...e)))}catch(n){throw Xr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ei(this.firestore,su(this._delegate,function gse(...t){return tE._create("endBefore",t,!1)}(...e)))}catch(n){throw Xr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ei(this.firestore,su(this._delegate,function mse(...t){return tE._create("endAt",t,!0)}(...e)))}catch(n){throw Xr(n,"endAt()","Query.endAt()")}}isEqual(e){return qR(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function Ase(t){t=ot(t,yr);const e=ot(t.firestore,$t),n=gn(e),r=new au(e);return function Oie(t,e){const n=new Zn;return t.asyncQueue.enqueueAndForget((0,P.Z)(function*(){return(r=(0,P.Z)(function*(s,o,a){try{const u=yield OI(s,o,!0),d=new V$(o,u.ls),f=d.ca(u.documents),g=d.applyChanges(f,!1);a.resolve(g.snapshot)}catch(u){const d=dh(u,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield mh(t),e,n);var r})),n.promise}(n,t._query).then(i=>new ou(e,r,t,i))}(this._delegate):"server"===e?.source?function Cse(t){t=ot(t,yr);const e=ot(t.firestore,$t),n=gn(e),r=new au(e);return K$(n,t._query,{source:"server"}).then(i=>new ou(e,r,t,i))}(this._delegate):function Tse(t){t=ot(t,yr);const e=ot(t.firestore,$t),n=gn(e),r=new au(e);return mH(t._query),K$(n,t._query).then(i=>new ou(e,r,t,i))}(this._delegate),n.then(r=>new iP(this.firestore,new ou(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=OH(e),r=VH(e,i=>new iP(this.firestore,new ou(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return CH(this._delegate,n,r)}withConverter(e){return new ei(this.firestore,this._delegate.withConverter(e?jc.getInstance(this.firestore,e):null))}}class Yse{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new om(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class iP{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new ei(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new om(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Yse(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new om(this._firestore,r))})}isEqual(e){return wH(this._delegate,e._delegate)}}class Ih extends ei{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Yi(this.firestore,e):null}doc(e){try{return new Yi(this.firestore,void 0===e?zI(this._delegate):zI(this._delegate,e))}catch(n){throw Xr(n,"doc()","CollectionReference.doc()")}}add(e){return function bse(t,e){const n=ot(t.firestore,$t),r=zI(t),i=nE(t.converter,e);return vh(n,[KI(Fc(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,sn.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Yi(this.firestore,n))}isEqual(e){return sH(this._delegate,e._delegate)}withConverter(e){return new Ih(this.firestore,this._delegate.withConverter(e?jc.getInstance(this.firestore,e):null))}}function $c(t){return ot(t,Yt)}class sP{constructor(...e){this._delegate=new Wo(...e)}static documentId(){return new sP(Kt.keyField().canonicalString())}isEqual(e){return(e=(0,be.m9)(e))instanceof Wo&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function jse(){return new WR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Hc(e)}static delete(){const e=function Bse(){return new Jg("deleteField")}();return e._methodName="FieldValue.delete",new Hc(e)}static arrayUnion(...e){const n=function $se(...t){return new ise("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new Hc(n)}static arrayRemove(...e){const n=function Hse(...t){return new sse("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new Hc(n)}static increment(e){const n=function Gse(t){return new ose("increment",t)}(e);return n._methodName="FieldValue.increment",new Hc(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Jse={Firestore:MH,GeoPoint:WI,Timestamp:rn,Blob:im,Transaction:xH,WriteBatch:kH,DocumentReference:Yi,DocumentSnapshot:sm,Query:ei,QueryDocumentSnapshot:om,QuerySnapshot:iP,CollectionReference:Ih,FieldPath:sP,FieldValue:Hc,setLogLevel:function Qse(t){!function Lte(t){Ha.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function LH(t,e){return function toe(t,e=b2){return new at(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function oP(t,e){return LH(t,e).pipe(De(n=>({payload:n,type:"query"})))}!function eoe(t){(function Xse(t,e){t.INTERNAL.registerComponent(new dc.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Jse)))})(t,(e,n)=>new MH(e,n,new Kse)),t.registerVersion("@firebase/firestore-compat","0.3.23")}(Ba.Z);class FH{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=$H(r,n);return new jH(i,s,this.afs)}snapshotChanges(){return function noe(t,e){return LH(t,e).pipe(Yy(void 0),t0(),De(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ti)}valueChanges(e={}){return this.snapshotChanges().pipe(De(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return D(this.ref.get(e)).pipe(Ti)}}function sE(t,e){return oP(t,e).pipe(Yy(void 0),t0(),De(n=>{const[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=s.find(g=>g.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function UH(t,e,n){return sE(t,n).pipe(Xy((r,i)=>function roe(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function ioe(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return aP(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return aP(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return aP(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),zt(),De(r=>r.map(i=>({type:i.type,payload:i}))))}function aP(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function BH(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class jH{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=sE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(De(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Yy(void 0),t0(),fs(([r,i])=>i.length>0||!r),De(([,r])=>r),Ti)}auditTrail(e){return this.stateChanges(e).pipe(Xy((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=BH(e);return UH(this.query,n,this.afs.schedulers.outsideAngular).pipe(Ti)}valueChanges(e={}){return oP(this.query,this.afs.schedulers.outsideAngular).pipe(De(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ti)}get(e){return D(this.query.get(e)).pipe(Ti)}add(e){return this.ref.add(e)}doc(e){return new FH(this.ref.doc(e),this.afs)}}class soe{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?sE(this.query,this.afs.schedulers.outsideAngular).pipe(De(n=>n.filter(r=>e.indexOf(r.type)>-1)),fs(n=>n.length>0),Ti):sE(this.query,this.afs.schedulers.outsideAngular).pipe(Ti)}auditTrail(e){return this.stateChanges(e).pipe(Xy((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=BH(e);return UH(this.query,n,this.afs.schedulers.outsideAngular).pipe(Ti)}valueChanges(e={}){return oP(this.query,this.afs.schedulers.outsideAngular).pipe(De(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ti)}get(e){return D(this.query.get(e)).pipe(Ti)}}const ooe=new le("angularfire2.enableFirestorePersistence"),aoe=new le("angularfire2.firestore.persistenceSettings"),uoe=new le("angularfire2.firestore.settings"),coe=new le("angularfire2.firestore.use-emulator");function $H(t,e=(n=>n)){return{query:e(t),ref:t}}let loe=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,d,f,g,_,y,E,A,S,O,R){this.schedulers=u;const U=Xb(n,a,r),ne=f;g&&$2(U,a,_,E,A,S,y,O),[this.firestore,this.persistenceEnabled$]=M2(`${U.name}.firestore`,"AngularFirestore",U.name,()=>{const oe=a.runOutsideAngular(()=>U.firestore());if(s&&oe.settings(s),ne&&oe.useEmulator(...ne),i&&!xy(o)){const Oe=()=>{try{return D(oe.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(gt){return typeof console<"u"&&console.warn(gt),W(!1)}};return[oe,a.runOutsideAngular(Oe)]}return[oe,W(!1)]},[s,ne,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=$H(i,r),a=this.schedulers.ngZone.run(()=>s);return new jH(a,o,this)}collectionGroup(n,r){const i=r||(o=>o),s=this.firestore.collectionGroup(n);return new soe(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new FH(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(ie(Ov),ie(Vv,8),ie(ooe,8),ie(uoe,8),ie(_o),ie(Tt),ie(P2),ie(aoe,8),ie(coe,8),ie(yc,8),ie(V2,8),ie(L2,8),ie(F2,8),ie(U2,8),ie(B2,8),ie(j2,8),ie(S2,8))};static \u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();const doe=[{path:"",component:lF},{path:"home",component:lF},{path:"login",component:Pee},{path:"food",component:(()=>{class t{constructor(n){this.firestore=n,this.items=[]}ngOnInit(){this.firestore.collection("food_items").valueChanges().subscribe(n=>{this.items=n,console.log(this.items),console.log()}),this.firestore.collection("food_items").valueChanges(),console.log(this.items)}static#e=this.\u0275fac=function(r){return new(r||t)(X(loe))};static#t=this.\u0275cmp=Un({type:t,selectors:[["app-food"]],decls:47,vars:0,consts:[[2,"align-items","center","text-align","center"],[1,"container","mt-2","mb-5"],[1,"row"],[1,"col-3"],[1,"dropdown","me-2"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],[1,"dropdown-menu"],["routerLink","/food","routerLinkActive","active","ariaCurrentWhenActive","page",1,"dropdown-item"],["routerLink","/tourism","routerLinkActive","active","ariaCurrentWhenActive","page",1,"dropdown-item"],["routerLink","/human-resources","routerLinkActive","active","ariaCurrentWhenActive","page",1,"dropdown-item"],[1,"col-8"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary","float-end"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["href","#",1,"btn","btn-primary"]],template:function(r,i){1&r&&(me(0,"h1",0),Ce(1,"Food"),he(),me(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"button",5),Ce(7," Categories "),he(),me(8,"ul",6)(9,"li")(10,"a",7),Ce(11,"Food"),he()(),me(12,"li")(13,"a",8),Ce(14,"Tourism"),he()(),me(15,"li")(16,"a",9),Ce(17,"HR"),he()()()()(),me(18,"div",10)(19,"ul")(20,"button",11),Ce(21," Create New "),he(),me(22,"div",12)(23,"div",13)(24,"div",14)(25,"div",15)(26,"h1",16),Ce(27,"Modal title"),he(),Xn(28,"button",17),he(),me(29,"div",18),Ce(30," ... "),he(),me(31,"div",19)(32,"button",20),Ce(33,"Close"),he(),me(34,"button",21),Ce(35,"Save changes"),he()()()()()(),me(36,"div",10)(37,"ul")(38,"div",22)(39,"div",23),Ce(40," Card Title: "),he(),me(41,"div",24)(42,"h5",25),Ce(43,"Apple Name:"),he(),Xn(44,"p",26),me(45,"a",27),Ce(46,"Go somewhere"),he()()()()()()()())},dependencies:[Mo,lc]})}return t})()},{path:"human-resources",component:(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Un({type:t,selectors:[["app-hr"]],decls:18,vars:0,consts:[[2,"align-items","center","text-align","center"],[1,"container","mt-2","mb-5"],[1,"row"],[1,"col-3"],[1,"dropdown","me-2"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],[1,"dropdown-menu"],["routerLink","/food","routerLinkActive","active","ariaCurrentWhenActive","page",1,"dropdown-item"],["routerLink","/tourism","routerLinkActive","active","ariaCurrentWhenActive","page",1,"dropdown-item"],["routerLink","/human-resources","routerLinkActive","active","ariaCurrentWhenActive","page",1,"dropdown-item"]],template:function(r,i){1&r&&(me(0,"h1",0),Ce(1,"Coming Soon"),he(),me(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"button",5),Ce(7," Categories "),he(),me(8,"ul",6)(9,"li")(10,"a",7),Ce(11,"Food"),he()(),me(12,"li")(13,"a",8),Ce(14,"Tourism"),he()(),me(15,"li")(16,"a",9),Ce(17,"HR"),he()()()()()()())},dependencies:[Mo,lc]})}return t})()},{path:"tourism",component:(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Un({type:t,selectors:[["app-tourism"]],decls:18,vars:0,consts:[[2,"align-items","center","text-align","center"],[1,"container","mt-2","mb-5"],[1,"row"],[1,"col-3"],[1,"dropdown","me-2"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],[1,"dropdown-menu"],["routerLink","/food","routerLinkActive","active","ariaCurrentWhenActive","page",1,"dropdown-item"],["routerLink","/tourism","routerLinkActive","active","ariaCurrentWhenActive","page",1,"dropdown-item"],["routerLink","/human-resources","routerLinkActive","active","ariaCurrentWhenActive","page",1,"dropdown-item"]],template:function(r,i){1&r&&(me(0,"h1",0),Ce(1,"Coming Soon"),he(),me(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"button",5),Ce(7," Categories "),he(),me(8,"ul",6)(9,"li")(10,"a",7),Ce(11,"Food"),he()(),me(12,"li")(13,"a",8),Ce(14,"Tourism"),he()(),me(15,"li")(16,"a",9),Ce(17,"HR"),he()()()()()()())},dependencies:[Mo,lc]})}return t})()},{path:"register",component:(()=>{class t{constructor(n,r,i){this.authService=n,this.router=r,this.afAuth=i,this.hide=!0,this.hideConfirmPassword=!0,this.registerForm=new fp({username:new Po("",[Ro.required,Ro.email]),phoneNumber:new Po("",[Ro.required]),password:new Po("",[Ro.required]),confirmPassword:new Po("",[Ro.required])})}registerWithEmailPassword(){const n=Object.assign(this.registerForm.value,{email:this.registerForm.value.username});this.authService.registerWithEmailPassword(n).then(r=>{this.router.navigate(["/login"]),this.afAuth.signOut(),window.alert("Registration successful, please login")}).catch(r=>{console.error(r),window.alert("Error has occured: "+r)})}static#e=this.\u0275fac=function(r){return new(r||t)(X(e0),X(Qr),X(yc))};static#t=this.\u0275cmp=Un({type:t,selectors:[["app-register"]],decls:42,vars:3,consts:[["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"container-fluid"],[1,"row","mt-3"],[1,"col-sm-6"],[1,"text-center"],[1,"card",3,"formGroup"],[1,"card-body","text-center"],[3,"formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["formControlName","username","type","email","id","email","required","","placeholder","Enter Username or Email",1,"form-control"],["for","phoneNumber",1,"form-label"],["formControlName","phoneNumber","type","number","id","phoneNumber","required","","placeholder","07x xxx xxx",1,"form-control"],["for","password",1,"form-label"],["formControlName","password","type","password","id","password","required","","placeholder","Enter your password",1,"form-control"],["formControlName","confirmPassword","type","password","id","confirmPassword","required","","placeholder","Enter your password",1,"form-control"],[1,"mb-3","text-center"],[1,"btn","btn-primary",3,"disabled","click"],["type","submit",1,"btn","btn-link"],[1,"card"]],template:function(r,i){1&r&&(me(0,"head"),Xn(1,"meta",0)(2,"meta",1),me(3,"title"),Ce(4,"Register Page"),he()(),me(5,"div",2)(6,"div",3)(7,"div",4)(8,"h1",5),Ce(9,"User Account"),he(),me(10,"div",6)(11,"div",7)(12,"form",8)(13,"div",9)(14,"label",10),Ce(15,"Email:"),he(),Xn(16,"input",11),he(),me(17,"div",9)(18,"label",12),Ce(19,"Phone Number:"),he(),Xn(20,"input",13),he(),me(21,"div",9)(22,"label",14),Ce(23,"Password:"),he(),Xn(24,"input",15),he(),me(25,"div",9)(26,"label",14),Ce(27,"Confirm Password:"),he(),Xn(28,"input",16),he(),me(29,"div",17)(30,"button",18),qr("click",function(){return i.registerWithEmailPassword()}),Ce(31,"Create Account"),he()(),me(32,"div",17)(33,"button",19),Ce(34,"Forgot Password"),he()()()()()(),me(35,"div",4)(36,"h1",5),Ce(37,"Company Account"),he(),me(38,"div",20)(39,"div",7)(40,"h1"),Ce(41,"Coming Soon!"),he()()()()()()),2&r&&(Eo(10),To("formGroup",i.registerForm),Eo(2),To("formGroup",i.registerForm),Eo(18),To("disabled",i.registerForm.invalid))},dependencies:[Zy,lp,rC,ZA,Uy,yp,_p,Ky]})}return t})()},{path:"marketing",component:(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Un({type:t,selectors:[["app-marketing"]],decls:2,vars:0,template:function(r,i){1&r&&(me(0,"p"),Ce(1,"marketing works!"),he())}})}return t})()},{path:"events",component:(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Un({type:t,selectors:[["app-events"]],decls:2,vars:0,template:function(r,i){1&r&&(me(0,"p"),Ce(1,"events works!"),he())}})}return t})()},{path:"news",component:(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Un({type:t,selectors:[["app-news"]],decls:2,vars:0,template:function(r,i){1&r&&(me(0,"p"),Ce(1,"news works!"),he())}})}return t})()},{path:"my_profile",component:(()=>{class t{constructor(n,r){this.afAuth=n,this.router=r}logOut(){var n=this;return(0,P.Z)(function*(){yield n.afAuth.signOut(),window.alert("Logged out!"),n.router.navigate(["/home"])})()}static#e=this.\u0275fac=function(r){return new(r||t)(X(yc),X(Qr))};static#t=this.\u0275cmp=Un({type:t,selectors:[["app-myprofile"]],decls:4,vars:0,consts:[[3,"click"]],template:function(r,i){1&r&&(me(0,"h1"),Ce(1,"Logout"),he(),me(2,"button",0),qr("click",function(){return i.logOut()}),Ce(3,"Logout"),he())}})}return t})()},{path:"**",component:H2},{path:"404",component:H2}];let hoe=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=cr({type:t});static#n=this.\u0275inj=ur({imports:[uF.forRoot(doe),uF]})}return t})(),foe=(()=>{class t{constructor(){this.title="BalkanOn",this.title2="BalkanOn"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Un({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&Xn(0,"router-outlet")},dependencies:[DC]})}return t})();function poe(t,e){1&t&&(me(0,"li",8)(1,"a",22),Ce(2,"Login"),he()())}function goe(t,e){if(1&t&&(me(0,"li",8)(1,"a",23),Ce(2),he()()),2&t){const n=e.ngIf;Eo(2),PT(n.email)}}let moe=(()=>{class t{constructor(n,r){this.afAuth=n,this.authService=r}static#e=this.\u0275fac=function(r){return new(r||t)(X(yc),X(e0))};static#t=this.\u0275cmp=Un({type:t,selectors:[["app-navbar"]],decls:41,vars:6,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container"],[1,"me-auto"],["routerLink","/home",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"float-sm-right","collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/marketing","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link","active"],["aria-current","page","routerLink","/events","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link","active"],["aria-current","page","routerLink","/news","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link","active"],["class","nav-item",4,"ngIf"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],["href","#",1,"dropdown-item"],[1,"dropdown-divider"],["href","#",1,"dropdown-item","disabled"],[1,"navbar","fixed-bottom","navbar-light","bg-light"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["aria-current","page","routerLink","/login","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link","active"],["aria-current","page","routerLink","/my_profile","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link","active"]],template:function(r,i){1&r&&(me(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),Ce(4,"LOGO"),he()(),me(5,"button",4),Xn(6,"span",5),he(),me(7,"div",6)(8,"ul",7)(9,"li",8)(10,"a",9),Ce(11,"Marketing"),he()(),me(12,"li",8)(13,"a",10),Ce(14,"Events"),he()(),me(15,"li",8)(16,"a",11),Ce(17,"News"),he()(),ET(18,poe,3,0,"li",12),$T(19,"async"),ET(20,goe,3,1,"li",12),$T(21,"async"),me(22,"li",13)(23,"a",14),Ce(24," English "),he(),me(25,"ul",15)(26,"li")(27,"a",16),Ce(28,"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438"),he()(),me(29,"li")(30,"a",16),Ce(31,"\u0421\u0440\u043f\u0441\u043a\u0438"),he()(),me(32,"li"),Xn(33,"hr",17),he(),me(34,"li")(35,"a",18),Ce(36,"Language"),he()()()()()()()(),me(37,"nav",19)(38,"div",20)(39,"a",21),Ce(40,"Fixed bottom"),he()()()),2&r&&(Eo(18),To("ngIf",!HT(19,2,i.afAuth.user)),Eo(2),To("ngIf",HT(21,4,i.afAuth.user)))},dependencies:[b1,Mo,lc,P1]})}return t})();const _oe_firebase={apiKey:"AIzaSyCSDrOmWXOAKB74JDbOZhQqvRLf4ZlWXgk",authDomain:"sellerworld-455be.firebaseapp.com",projectId:"sellerworld-455be",storageBucket:"sellerworld-455be.appspot.com",messagingSenderId:"330933858571",appId:"1:330933858571:web:8020c06543ddbb7719f20e",measurementId:"G-2KW5Y81LYB"};let yoe=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=cr({type:t,bootstrap:[foe,moe]});static#n=this.\u0275inj=ur({imports:[n7,hoe,Aee.initializeApp(_oe_firebase),Ree,hZ,dZ]})}return t})();e7().bootstrapModule(yoe).catch(t=>console.error(t))},399:(Ji,xn,$e)=>{$e.d(xn,{Z:()=>On});var I=$e(58),ke=$e(537),j=$e(823),Ve=$e(879);class dt{constructor(Ue,ze){this._delegate=Ue,this.firebase=ze,(0,j._addComponent)(Ue,new ke.wA("app-compat",()=>this,"PUBLIC")),this.container=Ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ue){this._delegate.automaticDataCollectionEnabled=Ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ue=>{this._delegate.checkDestroyed(),Ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(Ue,ze=j._DEFAULT_ENTRY_NAME){var Vn;this._delegate.checkDestroyed();const Ln=this._delegate.container.getProvider(Ue);return!Ln.isInitialized()&&"EXPLICIT"===(null===(Vn=Ln.getComponent())||void 0===Vn?void 0:Vn.instantiationMode)&&Ln.initialize(),Ln.getImmediate({identifier:ze})}_removeServiceInstance(Ue,ze=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ue).clearInstance(ze)}_addComponent(Ue){(0,j._addComponent)(this._delegate,Ue)}_addOrOverwriteComponent(Ue){(0,j._addOrOverwriteComponent)(this._delegate,Ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Jt=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function et(){const mt=function kn(mt){const Ue={},ze={__esModule:!0,initializeApp:function Ot(We,An={}){const Z=j.initializeApp(We,An);if((0,I.r3)(Ue,Z.name))return Ue[Z.name];const Gt=new mt(Z,ze);return Ue[Z.name]=Gt,Gt},app:Ln,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function Rt(We){const An=We.name,Z=An.replace("-compat","");if(j._registerComponent(We)&&"PUBLIC"===We.type){const Gt=(Vt=Ln())=>{if("function"!=typeof Vt[Z])throw Jt.create("invalid-app-argument",{appName:An});return Vt[Z]()};void 0!==We.serviceProps&&(0,I.ZB)(Gt,We.serviceProps),ze[Z]=Gt,mt.prototype[Z]=function(...Vt){return this._getService.bind(this,An).apply(this,We.multipleInstances?Vt:[])}}return"PUBLIC"===We.type?ze[Z]:null},removeApp:function Vn(We){delete Ue[We]},useAsService:function vr(We,An){return"serverAuth"===An?null:An},modularAPIs:j}};function Ln(We){if(!(0,I.r3)(Ue,We=We||j._DEFAULT_ENTRY_NAME))throw Jt.create("no-app",{appName:We});return Ue[We]}return ze.default=ze,Object.defineProperty(ze,"apps",{get:function _t(){return Object.keys(Ue).map(We=>Ue[We])}}),Ln.App=mt,ze}(dt);return mt.INTERNAL=Object.assign(Object.assign({},mt.INTERNAL),{createFirebaseNamespace:et,extendNamespace:function Ue(ze){(0,I.ZB)(mt,ze)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),mt}(),re=new Ve.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const mt=self.firebase.SDK_VERSION;mt&&mt.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const On=K;!function ht(mt){(0,j.registerVersion)("@firebase/app-compat","0.2.25",mt)}()},823:(Ji,xn,$e)=>{$e.r(xn),$e.d(xn,{FirebaseError:()=>Ve.ZR,SDK_VERSION:()=>vs,_DEFAULT_ENTRY_NAME:()=>pi,_addComponent:()=>ys,_addOrOverwriteComponent:()=>Yn,_apps:()=>Er,_clearComponents:()=>Dn,_components:()=>es,_getProvider:()=>Lt,_registerComponent:()=>io,_removeServiceInstance:()=>gi,deleteApp:()=>ar,getApp:()=>Is,getApps:()=>Xo,initializeApp:()=>Jo,onLog:()=>ea,registerVersion:()=>Es,setLogLevel:()=>Gc});var I=$e(861),ke=$e(537),j=$e(879),Ve=$e(58);const dt=(k,b)=>b.some(ee=>k instanceof ee);let Ht,Jt;const K=new WeakMap,re=new WeakMap,Te=new WeakMap,Je=new WeakMap,ht=new WeakMap;let Ue={get(k,b,ee){if(k instanceof IDBTransaction){if("done"===b)return re.get(k);if("objectStoreNames"===b)return k.objectStoreNames||Te.get(k);if("store"===b)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return Ot(k[b])},set:(k,b,ee)=>(k[b]=ee,!0),has:(k,b)=>k instanceof IDBTransaction&&("done"===b||"store"===b)||b in k};function Ln(k){return"function"==typeof k?function Vn(k){return k!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function et(){return Jt||(Jt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(k)?function(...b){return k.apply(_t(this),b),Ot(K.get(this))}:function(...b){return Ot(k.apply(_t(this),b))}:function(b,...ee){const Ie=k.call(_t(this),b,...ee);return Te.set(Ie,b.sort?b.sort():[b]),Ot(Ie)}}(k):(k instanceof IDBTransaction&&function mt(k){if(re.has(k))return;const b=new Promise((ee,Ie)=>{const Be=()=>{k.removeEventListener("complete",tt),k.removeEventListener("error",$),k.removeEventListener("abort",$)},tt=()=>{ee(),Be()},$=()=>{Ie(k.error||new DOMException("AbortError","AbortError")),Be()};k.addEventListener("complete",tt),k.addEventListener("error",$),k.addEventListener("abort",$)});re.set(k,b)}(k),dt(k,function kn(){return Ht||(Ht=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(k,Ue):k)}function Ot(k){if(k instanceof IDBRequest)return function On(k){const b=new Promise((ee,Ie)=>{const Be=()=>{k.removeEventListener("success",tt),k.removeEventListener("error",$)},tt=()=>{ee(Ot(k.result)),Be()},$=()=>{Ie(k.error),Be()};k.addEventListener("success",tt),k.addEventListener("error",$)});return b.then(ee=>{ee instanceof IDBCursor&&K.set(ee,k)}).catch(()=>{}),ht.set(b,k),b}(k);if(Je.has(k))return Je.get(k);const b=Ln(k);return b!==k&&(Je.set(k,b),ht.set(b,k)),b}const _t=k=>ht.get(k),We=["get","getKey","getAll","getAllKeys","count"],An=["put","add","delete","clear"],Z=new Map;function Gt(k,b){if(!(k instanceof IDBDatabase)||b in k||"string"!=typeof b)return;if(Z.get(b))return Z.get(b);const ee=b.replace(/FromIndex$/,""),Ie=b!==ee,Be=An.includes(ee);if(!(ee in(Ie?IDBIndex:IDBObjectStore).prototype)||!Be&&!We.includes(ee))return;const tt=function(){var $=(0,I.Z)(function*(Xt,...Ee){const Xe=this.transaction(Xt,Be?"readwrite":"readonly");let na=Xe.store;return Ie&&(na=na.index(Ee.shift())),(yield Promise.all([na[ee](...Ee),Be&&Xe.done]))[0]});return function(Ee){return $.apply(this,arguments)}}();return Z.set(b,tt),tt}!function ze(k){Ue=k(Ue)}(k=>({...k,get:(b,ee,Ie)=>Gt(b,ee)||k.get(b,ee,Ie),has:(b,ee)=>!!Gt(b,ee)||k.has(b,ee)}));class Vt{constructor(b){this.container=b}getPlatformInfoString(){return this.container.getProviders().map(ee=>{if(function mn(k){const b=k.getComponent();return"VERSION"===b?.type}(ee)){const Ie=ee.getImmediate();return`${Ie.library}/${Ie.version}`}return null}).filter(ee=>ee).join(" ")}}const bi="@firebase/app",at=new j.Yd("@firebase/app"),pi="[DEFAULT]",du={[bi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Er=new Map,es=new Map;function ys(k,b){try{k.container.addComponent(b)}catch(ee){at.debug(`Component ${b.name} failed to register with FirebaseApp ${k.name}`,ee)}}function Yn(k,b){k.container.addOrOverwriteComponent(b)}function io(k){const b=k.name;if(es.has(b))return at.debug(`There were multiple attempts to register component ${b}.`),!1;es.set(b,k);for(const ee of Er.values())ys(ee,k);return!0}function Lt(k,b){const ee=k.container.getProvider("heartbeat").getImmediate({optional:!0});return ee&&ee.triggerHeartbeat(),k.container.getProvider(b)}function gi(k,b,ee=pi){Lt(k,b).clearInstance(ee)}function Dn(){es.clear()}const ti=new Ve.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ni{constructor(b,ee,Ie){this._isDeleted=!1,this._options=Object.assign({},b),this._config=Object.assign({},ee),this._name=ee.name,this._automaticDataCollectionEnabled=ee.automaticDataCollectionEnabled,this._container=Ie,this.container.addComponent(new ke.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(b){this.checkDestroyed(),this._automaticDataCollectionEnabled=b}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(b){this._isDeleted=b}checkDestroyed(){if(this.isDeleted)throw ti.create("app-deleted",{appName:this._name})}}const vs="10.7.1";function Jo(k,b={}){let ee=k;"object"!=typeof b&&(b={name:b});const Ie=Object.assign({name:pi,automaticDataCollectionEnabled:!1},b),Be=Ie.name;if("string"!=typeof Be||!Be)throw ti.create("bad-app-name",{appName:String(Be)});if(ee||(ee=(0,Ve.aH)()),!ee)throw ti.create("no-options");const tt=Er.get(Be);if(tt){if((0,Ve.vZ)(ee,tt.options)&&(0,Ve.vZ)(Ie,tt.config))return tt;throw ti.create("duplicate-app",{appName:Be})}const $=new ke.H0(Be);for(const Ee of es.values())$.addComponent(Ee);const Xt=new ni(ee,Ie,$);return Er.set(Be,Xt),Xt}function Is(k=pi){const b=Er.get(k);if(!b&&k===pi&&(0,Ve.aH)())return Jo();if(!b)throw ti.create("no-app",{appName:k});return b}function Xo(){return Array.from(Er.values())}function ar(k){return wr.apply(this,arguments)}function wr(){return(wr=(0,I.Z)(function*(k){const b=k.name;Er.has(b)&&(Er.delete(b),yield Promise.all(k.container.getProviders().map(ee=>ee.delete())),k.isDeleted=!0)})).apply(this,arguments)}function Es(k,b,ee){var Ie;let Be=null!==(Ie=du[k])&&void 0!==Ie?Ie:k;ee&&(Be+=`-${ee}`);const tt=Be.match(/\s|\//),$=b.match(/\s|\//);if(tt||$){const Xt=[`Unable to register library "${Be}" with version "${b}":`];return tt&&Xt.push(`library name "${Be}" contains illegal characters (whitespace or "/")`),tt&&$&&Xt.push("and"),$&&Xt.push(`version name "${b}" contains illegal characters (whitespace or "/")`),void at.warn(Xt.join(" "))}io(new ke.wA(`${Be}-version`,()=>({library:Be,version:b}),"VERSION"))}function ea(k,b){if(null!==k&&"function"!=typeof k)throw ti.create("invalid-log-argument");(0,j.Am)(k,b)}function Gc(k){(0,j.Ub)(k)}const hu="firebase-heartbeat-database",ta=1,C="firebase-heartbeat-store";let T=null;function D(){return T||(T=function Rt(k,b,{blocked:ee,upgrade:Ie,blocking:Be,terminated:tt}={}){const $=indexedDB.open(k,b),Xt=Ot($);return Ie&&$.addEventListener("upgradeneeded",Ee=>{Ie(Ot($.result),Ee.oldVersion,Ee.newVersion,Ot($.transaction),Ee)}),ee&&$.addEventListener("blocked",Ee=>ee(Ee.oldVersion,Ee.newVersion,Ee)),Xt.then(Ee=>{tt&&Ee.addEventListener("close",()=>tt()),Be&&Ee.addEventListener("versionchange",Xe=>Be(Xe.oldVersion,Xe.newVersion,Xe))}).catch(()=>{}),Xt}(hu,ta,{upgrade:(k,b)=>{0===b&&k.createObjectStore(C)}}).catch(k=>{throw ti.create("idb-open",{originalErrorMessage:k.message})})),T}function M(){return(M=(0,I.Z)(function*(k){try{return yield(yield D()).transaction(C).objectStore(C).get(Ze(k))}catch(b){if(b instanceof Ve.ZR)at.warn(b.message);else{const ee=ti.create("idb-get",{originalErrorMessage:b?.message});at.warn(ee.message)}}})).apply(this,arguments)}function W(k,b){return Le.apply(this,arguments)}function Le(){return(Le=(0,I.Z)(function*(k,b){try{const Ie=(yield D()).transaction(C,"readwrite");yield Ie.objectStore(C).put(b,Ze(k)),yield Ie.done}catch(ee){if(ee instanceof Ve.ZR)at.warn(ee.message);else{const Ie=ti.create("idb-set",{originalErrorMessage:ee?.message});at.warn(Ie.message)}}})).apply(this,arguments)}function Ze(k){return`${k.name}!${k.options.appId}`}class bn{constructor(b){this.container=b,this._heartbeatsCache=null;const ee=this.container.getProvider("app").getImmediate();this._storage=new At(ee),this._heartbeatsCachePromise=this._storage.read().then(Ie=>(this._heartbeatsCache=Ie,Ie))}triggerHeartbeat(){var b=this;return(0,I.Z)(function*(){var ee,Ie;const tt=b.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$=ve();if((null!=(null===(ee=b._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)||(b._heartbeatsCache=yield b._heartbeatsCachePromise,null!=(null===(Ie=b._heartbeatsCache)||void 0===Ie?void 0:Ie.heartbeats)))&&b._heartbeatsCache.lastSentHeartbeatDate!==$&&!b._heartbeatsCache.heartbeats.some(Xt=>Xt.date===$))return b._heartbeatsCache.heartbeats.push({date:$,agent:tt}),b._heartbeatsCache.heartbeats=b._heartbeatsCache.heartbeats.filter(Xt=>{const Ee=new Date(Xt.date).valueOf();return Date.now()-Ee<=2592e6}),b._storage.overwrite(b._heartbeatsCache)})()}getHeartbeatsHeader(){var b=this;return(0,I.Z)(function*(){var ee;if(null===b._heartbeatsCache&&(yield b._heartbeatsCachePromise),null==(null===(ee=b._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)||0===b._heartbeatsCache.heartbeats.length)return"";const Ie=ve(),{heartbeatsToSend:Be,unsentEntries:tt}=function Fn(k,b=1024){const ee=[];let Ie=k.slice();for(const Be of k){const tt=ee.find($=>$.agent===Be.agent);if(tt){if(tt.dates.push(Be.date),Pi(ee)>b){tt.dates.pop();break}}else if(ee.push({agent:Be.agent,dates:[Be.date]}),Pi(ee)>b){ee.pop();break}Ie=Ie.slice(1)}return{heartbeatsToSend:ee,unsentEntries:Ie}}(b._heartbeatsCache.heartbeats),$=(0,Ve.L)(JSON.stringify({version:2,heartbeats:Be}));return b._heartbeatsCache.lastSentHeartbeatDate=Ie,tt.length>0?(b._heartbeatsCache.heartbeats=tt,yield b._storage.overwrite(b._heartbeatsCache)):(b._heartbeatsCache.heartbeats=[],b._storage.overwrite(b._heartbeatsCache)),$})()}}function ve(){return(new Date).toISOString().substring(0,10)}class At{constructor(b){this.app=b,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,Ve.hl)()&&(0,Ve.eu)().then(()=>!0).catch(()=>!1)})()}read(){var b=this;return(0,I.Z)(function*(){if(yield b._canUseIndexedDBPromise){const Ie=yield function z(k){return M.apply(this,arguments)}(b.app);return Ie?.heartbeats?Ie:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(b){var ee=this;return(0,I.Z)(function*(){var Ie;if(yield ee._canUseIndexedDBPromise){const tt=yield ee.read();return W(ee.app,{lastSentHeartbeatDate:null!==(Ie=b.lastSentHeartbeatDate)&&void 0!==Ie?Ie:tt.lastSentHeartbeatDate,heartbeats:b.heartbeats})}})()}add(b){var ee=this;return(0,I.Z)(function*(){var Ie;if(yield ee._canUseIndexedDBPromise){const tt=yield ee.read();return W(ee.app,{lastSentHeartbeatDate:null!==(Ie=b.lastSentHeartbeatDate)&&void 0!==Ie?Ie:tt.lastSentHeartbeatDate,heartbeats:[...tt.heartbeats,...b.heartbeats]})}})()}}function Pi(k){return(0,Ve.L)(JSON.stringify({version:2,heartbeats:k})).length}!function qc(k){io(new ke.wA("platform-logger",b=>new Vt(b),"PRIVATE")),io(new ke.wA("heartbeat",b=>new bn(b),"PRIVATE")),Es(bi,"0.9.25",k),Es(bi,"0.9.25","esm2017"),Es("fire-js","")}("")},191:(Ji,xn,$e)=>{$e.r(xn);var I=$e(861),ke=$e(399),j=$e(58),Ve=$e(823),dt=$e(879),Ht=$e(582),Jt=$e(537);const et={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const On=function Je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},mt=function ht(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ue=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Vn=new dt.Yd("@firebase/auth");function Ot(h,...c){Vn.logLevel<=dt.in.ERROR&&Vn.error(`Auth (${Ve.SDK_VERSION}): ${h}`,...c)}function _t(h,...c){throw An(h,...c)}function Rt(h,...c){return An(h,...c)}function vr(h,c,l){const p=Object.assign(Object.assign({},mt()),{[c]:l});return new j.LL("auth","Firebase",p).create(c,{appName:h.name})}function We(h,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&_t(h,"argument-error"),vr(h,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function An(h,...c){if("string"!=typeof h){const l=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=h.name),h._errorFactory.create(l,...p)}return Ue.create(h,...c)}function Z(h,c,...l){if(!h)throw An(c,...l)}function Gt(h){const c="INTERNAL ASSERTION FAILED: "+h;throw Ot(c),new Error(c)}function Vt(h,c){h||Gt(c)}function mn(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function bi(){return"http:"===Si()||"https:"===Si()}function Si(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}class Ri{constructor(c,l){this.shortDelay=c,this.longDelay=l,Vt(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function at(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bi()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function V(h,c){Vt(h.emulator,"Emulator should always be set here");const{url:l}=h.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class F{static initialize(c,l,p){this.fetchImpl=c,l&&(this.headersImpl=l),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Gt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Gt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Gt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const H={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},G=new Ri(3e4,6e4);function Q(h,c){return h.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:h.tenantId}):c}function B(h,c,l,p){return pe.apply(this,arguments)}function pe(){return(pe=(0,I.Z)(function*(h,c,l,p,m={}){return st(h,m,(0,I.Z)(function*(){let v={},w={};p&&("GET"===c?w=p:v={body:JSON.stringify(p)});const N=(0,j.xO)(Object.assign({key:h.config.apiKey},w)).slice(1),q=yield h._getAdditionalHeaders();return q["Content-Type"]="application/json",h.languageCode&&(q["X-Firebase-Locale"]=h.languageCode),F.fetch()(qt(h,h.config.apiHost,l,N),Object.assign({method:c,headers:q,referrerPolicy:"no-referrer"},v))}))})).apply(this,arguments)}function st(h,c,l){return De.apply(this,arguments)}function De(){return(De=(0,I.Z)(function*(h,c,l){h._canInitEmulator=!1;const p=Object.assign(Object.assign({},H),c);try{const m=new Qn(h),v=yield Promise.race([l(),m.promise]);m.clearNetworkTimeout();const w=yield v.json();if("needConfirmation"in w)throw Cn(h,"account-exists-with-different-credential",w);if(v.ok&&!("errorMessage"in w))return w;{const N=v.ok?w.errorMessage:w.error.message,[q,ue]=N.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===q)throw Cn(h,"credential-already-in-use",w);if("EMAIL_EXISTS"===q)throw Cn(h,"email-already-in-use",w);if("USER_DISABLED"===q)throw Cn(h,"user-disabled",w);const _e=p[q]||q.toLowerCase().replace(/[_\s]+/g,"-");if(ue)throw vr(h,_e,ue);_t(h,_e)}}catch(m){if(m instanceof j.ZR)throw m;_t(h,"network-request-failed",{message:String(m)})}})).apply(this,arguments)}function Ae(h,c,l,p){return ct.apply(this,arguments)}function ct(){return(ct=(0,I.Z)(function*(h,c,l,p,m={}){const v=yield B(h,c,l,p,m);return"mfaPendingCredential"in v&&_t(h,"multi-factor-auth-required",{_serverResponse:v}),v})).apply(this,arguments)}function qt(h,c,l,p){const m=`${c}${l}?${p}`;return h.config.emulator?V(h.config,m):`${h.config.apiScheme}://${m}`}function Mt(h){switch(h){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Qn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,p)=>{this.timer=setTimeout(()=>p(Rt(this.auth,"network-request-failed")),G.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cn(h,c,l){const p={appName:h.name};l.email&&(p.email=l.email),l.phoneNumber&&(p.phoneNumber=l.phoneNumber);const m=Rt(h,c,p);return m.customData._tokenResponse=l,m}function or(h){return void 0!==h&&void 0!==h.getResponse}function Ir(h){return void 0!==h&&void 0!==h.enterprise}class Or{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return Mt(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Xi(){return(Xi=(0,I.Z)(function*(h){return(yield B(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function _n(h,c){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,I.Z)(function*(h,c){return B(h,"GET","/v2/recaptchaConfig",Q(h,c))})).apply(this,arguments)}function pi(){return(pi=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Er(){return(Er=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ys(){return(ys=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Yn(h){if(h)try{const c=new Date(Number(h));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function gi(){return(gi=(0,I.Z)(function*(h,c=!1){const l=(0,j.m9)(h),p=yield l.getIdToken(c),m=Yo(p);Z(m&&m.exp&&m.auth_time&&m.iat,l.auth,"internal-error");const v="object"==typeof m.firebase?m.firebase:void 0,w=v?.sign_in_provider;return{claims:m,token:p,authTime:Yn(Dn(m.auth_time)),issuedAtTime:Yn(Dn(m.iat)),expirationTime:Yn(Dn(m.exp)),signInProvider:w||null,signInSecondFactor:v?.sign_in_second_factor||null}})).apply(this,arguments)}function Dn(h){return 1e3*Number(h)}function Yo(h){const[c,l,p]=h.split(".");if(void 0===c||void 0===l||void 0===p)return Ot("JWT malformed, contained fewer than 3 sections"),null;try{const m=(0,j.tV)(l);return m?JSON.parse(m):(Ot("Failed to decode base64 JWT payload"),null)}catch(m){return Ot("Caught error parsing JWT payload as JSON",m?.toString()),null}}function ni(h,c){return vs.apply(this,arguments)}function vs(){return(vs=(0,I.Z)(function*(h,c,l=!1){if(l)return c;try{return yield c}catch(p){throw p instanceof j.ZR&&function Jo({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(p)&&h.auth.currentUser===h&&(yield h.auth.signOut()),p}})).apply(this,arguments)}class Is{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const m=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,m)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,I.Z)(function*(){yield l.iteration()}),p)}iteration(){var c=this;return(0,I.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class Xo{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yn(this.lastLoginAt),this.creationTime=Yn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ar(h){return wr.apply(this,arguments)}function wr(){return wr=(0,I.Z)(function*(h){var c;const l=h.auth,p=yield h.getIdToken(),m=yield ni(h,function es(h,c){return ys.apply(this,arguments)}(l,{idToken:p}));Z(m?.users.length,l,"internal-error");const v=m.users[0];h._notifyReloadListener(v);const w=null!==(c=v.providerUserInfo)&&void 0!==c&&c.length?function hu(h){return h.map(c=>{var{providerId:l}=c,p=(0,Ht._T)(c,["providerId"]);return{providerId:l,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(v.providerUserInfo):[],N=function Gc(h,c){return[...h.filter(p=>!c.some(m=>m.providerId===p.providerId)),...c]}(h.providerData,w),_e=!!h.isAnonymous&&!(h.email&&v.passwordHash||N?.length),we={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:N,metadata:new Xo(v.createdAt,v.lastLoginAt),isAnonymous:_e};Object.assign(h,we)}),wr.apply(this,arguments)}function ea(){return(ea=(0,I.Z)(function*(h){const c=(0,j.m9)(h);yield ar(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function C(){return(C=(0,I.Z)(function*(h,c){const l=yield st(h,{},(0,I.Z)(function*(){const p=(0,j.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:m,apiKey:v}=h.config,w=qt(h,m,"/v1/token",`key=${v}`),N=yield h._getAdditionalHeaders();return N["Content-Type"]="application/x-www-form-urlencoded",F.fetch()(w,{method:"POST",headers:N,body:p})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function D(){return(D=(0,I.Z)(function*(h,c){return B(h,"POST","/v2/accounts:revokeToken",Q(h,c))})).apply(this,arguments)}class z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){Z(c.idToken,"internal-error"),Z(typeof c.idToken<"u","internal-error"),Z(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function ti(h){const c=Yo(h);return Z(c,"internal-error"),Z(typeof c.exp<"u","internal-error"),Z(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}getToken(c,l=!1){var p=this;return(0,I.Z)(function*(){return Z(!p.accessToken||p.refreshToken,c,"user-token-expired"),l||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var p=this;return(0,I.Z)(function*(){const{accessToken:m,refreshToken:v,expiresIn:w}=yield function ta(h,c){return C.apply(this,arguments)}(c,l);p.updateTokensAndExpiration(m,v,Number(w))})()}updateTokensAndExpiration(c,l,p){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,l){const{refreshToken:p,accessToken:m,expirationTime:v}=l,w=new z;return p&&(Z("string"==typeof p,"internal-error",{appName:c}),w.refreshToken=p),m&&(Z("string"==typeof m,"internal-error",{appName:c}),w.accessToken=m),v&&(Z("number"==typeof v,"internal-error",{appName:c}),w.expirationTime=v),w}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new z,this.toJSON())}_performRefresh(){return Gt("not implemented")}}function M(h,c){Z("string"==typeof h||typeof h>"u","internal-error",{appName:c})}class W{constructor(c){var{uid:l,auth:p,stsTokenManager:m}=c,v=(0,Ht._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Is(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=p,this.stsTokenManager=m,this.accessToken=m.accessToken,this.displayName=v.displayName||null,this.email=v.email||null,this.emailVerified=v.emailVerified||!1,this.phoneNumber=v.phoneNumber||null,this.photoURL=v.photoURL||null,this.isAnonymous=v.isAnonymous||!1,this.tenantId=v.tenantId||null,this.providerData=v.providerData?[...v.providerData]:[],this.metadata=new Xo(v.createdAt||void 0,v.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,I.Z)(function*(){const p=yield ni(l,l.stsTokenManager.getToken(l.auth,c));return Z(p,l.auth,"internal-error"),l.accessToken!==p&&(l.accessToken=p,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),p})()}getIdTokenResult(c){return function Lt(h){return gi.apply(this,arguments)}(this,c)}reload(){return function Es(h){return ea.apply(this,arguments)}(this)}_assign(c){this!==c&&(Z(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new W(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var p=this;return(0,I.Z)(function*(){let m=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),m=!0),l&&(yield ar(p)),yield p.auth._persistUserIfCurrent(p),m&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,I.Z)(function*(){const l=yield c.getIdToken();return yield ni(c,function lu(h,c){return pi.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var p,m,v,w,N,q,ue,_e;const we=null!==(p=l.displayName)&&void 0!==p?p:void 0,tn=null!==(m=l.email)&&void 0!==m?m:void 0,yi=null!==(v=l.phoneNumber)&&void 0!==v?v:void 0,Ol=null!==(w=l.photoURL)&&void 0!==w?w:void 0,I_=null!==(N=l.tenantId)&&void 0!==N?N:void 0,wa=null!==(q=l._redirectEventId)&&void 0!==q?q:void 0,bf=null!==(ue=l.createdAt)&&void 0!==ue?ue:void 0,E_=null!==(_e=l.lastLoginAt)&&void 0!==_e?_e:void 0,{uid:Vl,emailVerified:dw,isAnonymous:Sf,providerData:w_,stsTokenManager:T_}=l;Z(Vl&&T_,c,"internal-error");const hw=z.fromJSON(this.name,T_);Z("string"==typeof Vl,c,"internal-error"),M(we,c.name),M(tn,c.name),Z("boolean"==typeof dw,c,"internal-error"),Z("boolean"==typeof Sf,c,"internal-error"),M(yi,c.name),M(Ol,c.name),M(I_,c.name),M(wa,c.name),M(bf,c.name),M(E_,c.name);const Ku=new W({uid:Vl,auth:c,email:tn,emailVerified:dw,displayName:we,isAnonymous:Sf,photoURL:Ol,phoneNumber:yi,tenantId:I_,stsTokenManager:hw,createdAt:bf,lastLoginAt:E_});return w_&&Array.isArray(w_)&&(Ku.providerData=w_.map(qP=>Object.assign({},qP))),wa&&(Ku._redirectEventId=wa),Ku}static _fromIdTokenResponse(c,l,p=!1){return(0,I.Z)(function*(){const m=new z;m.updateFromServerResponse(l);const v=new W({uid:l.localId,auth:c,stsTokenManager:m,isAnonymous:p});return yield ar(v),v})()}}const Le=new Map;function Ze(h){Vt(h instanceof Function,"Expected a class definition");let c=Le.get(h);return c?(Vt(c instanceof h,"Instance stored in cache mismatched with class"),c):(c=new h,Le.set(h,c),c)}const zt=(()=>{class h{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(l,p){var m=this;return(0,I.Z)(function*(){m.storage[l]=p})()}_get(l){var p=this;return(0,I.Z)(function*(){const m=p.storage[l];return void 0===m?null:m})()}_remove(l){var p=this;return(0,I.Z)(function*(){delete p.storage[l]})()}_addListener(l,p){}_removeListener(l,p){}}return h.type="NONE",h})();function bn(h,c,l){return`firebase:${h}:${c}:${l}`}class ve{constructor(c,l,p){this.persistence=c,this.auth=l,this.userKey=p;const{config:m,name:v}=this.auth;this.fullUserKey=bn(this.userKey,m.apiKey,v),this.fullPersistenceKey=bn("persistence",m.apiKey,v),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,I.Z)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?W._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,I.Z)(function*(){if(l.persistence===c)return;const p=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,p?l.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,p="authUser"){return(0,I.Z)(function*(){if(!l.length)return new ve(Ze(zt),c,p);const m=(yield Promise.all(l.map(function(){var ue=(0,I.Z)(function*(_e){if(yield _e._isAvailable())return _e});return function(_e){return ue.apply(this,arguments)}}()))).filter(ue=>ue);let v=m[0]||Ze(zt);const w=bn(p,c.config.apiKey,c.name);let N=null;for(const ue of l)try{const _e=yield ue._get(w);if(_e){const we=W._fromJSON(c,_e);ue!==v&&(N=we),v=ue;break}}catch{}const q=m.filter(ue=>ue._shouldAllowMigration);return v._shouldAllowMigration&&q.length?(v=q[0],N&&(yield v._set(w,N.toJSON())),yield Promise.all(l.map(function(){var ue=(0,I.Z)(function*(_e){if(_e!==v)try{yield _e._remove(w)}catch{}});return function(_e){return ue.apply(this,arguments)}}())),new ve(v,c,p)):new ve(v,c,p)})()}}function Fn(h){const c=h.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(k(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(At(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ee(c))return"Blackberry";if(Ie(c))return"Webos";if(Pi(c))return"Safari";if((c.includes("chrome/")||qc(c))&&!c.includes("edge/"))return"Chrome";if(b(c))return"Android";{const p=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function At(h=(0,j.z$)()){return/firefox\//i.test(h)}function Pi(h=(0,j.z$)()){const c=h.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function qc(h=(0,j.z$)()){return/crios\//i.test(h)}function k(h=(0,j.z$)()){return/iemobile/i.test(h)}function b(h=(0,j.z$)()){return/android/i.test(h)}function ee(h=(0,j.z$)()){return/blackberry/i.test(h)}function Ie(h=(0,j.z$)()){return/webos/i.test(h)}function Be(h=(0,j.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function Ee(h=(0,j.z$)()){return Be(h)||b(h)||Ie(h)||ee(h)||/windows phone/i.test(h)||k(h)}function na(h,c=[]){let l;switch(h){case"Browser":l=Fn((0,j.z$)());break;case"Worker":l=`${Fn((0,j.z$)())}-${h}`;break;default:l=h}const p=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Ve.SDK_VERSION}/${p}`}class uP{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const p=v=>new Promise((w,N)=>{try{w(c(v))}catch(q){N(q)}});p.onAbort=l,this.queue.push(p);const m=this.queue.length-1;return()=>{this.queue[m]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,I.Z)(function*(){if(l.auth.currentUser===c)return;const p=[];try{for(const m of l.queue)yield m(c),m.onAbort&&p.push(m.onAbort)}catch(m){p.reverse();for(const v of p)try{v()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:m?.message})}})()}}function fu(){return(fu=(0,I.Z)(function*(h,c={}){return B(h,"GET","/v2/passwordPolicy",Q(h,c))})).apply(this,arguments)}class cP{constructor(c){var l,p,m,v;const w=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=w.minPasswordLength)&&void 0!==l?l:6,w.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=w.maxPasswordLength),void 0!==w.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=w.containsLowercaseCharacter),void 0!==w.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=w.containsUppercaseCharacter),void 0!==w.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=w.containsNumericCharacter),void 0!==w.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=w.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(m=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==m?m:"",this.forceUpgradeOnSignin=null!==(v=c.forceUpgradeOnSignin)&&void 0!==v&&v,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,p,m,v,w,N;const q={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,q),this.validatePasswordCharacterOptions(c,q),q.isValid&&(q.isValid=null===(l=q.meetsMinPasswordLength)||void 0===l||l),q.isValid&&(q.isValid=null===(p=q.meetsMaxPasswordLength)||void 0===p||p),q.isValid&&(q.isValid=null===(m=q.containsLowercaseLetter)||void 0===m||m),q.isValid&&(q.isValid=null===(v=q.containsUppercaseLetter)||void 0===v||v),q.isValid&&(q.isValid=null===(w=q.containsNumericCharacter)||void 0===w||w),q.isValid&&(q.isValid=null===(N=q.containsNonAlphanumericCharacter)||void 0===N||N),q}validatePasswordLengthOptions(c,l){const p=this.customStrengthOptions.minPasswordLength,m=this.customStrengthOptions.maxPasswordLength;p&&(l.meetsMinPasswordLength=c.length>=p),m&&(l.meetsMaxPasswordLength=c.length<=m)}validatePasswordCharacterOptions(c,l){let p;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let m=0;m<c.length;m++)p=c.charAt(m),this.updatePasswordCharacterOptionsStatuses(l,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,l,p,m,v){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=m)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=v))}}class aE{constructor(c,l,p,m){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=p,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ws(this),this.idTokenSubscription=new ws(this),this.beforeStateQueue=new uP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ue,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(c,l){var p=this;return l&&(this._popupRedirectResolver=Ze(l)),this._initializationPromise=this.queue((0,I.Z)(function*(){var m,v;if(!p._deleted&&(p.persistenceManager=yield ve.create(p,c),!p._deleted)){if(null!==(m=p._popupRedirectResolver)&&void 0!==m&&m._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(l),p.lastNotifiedUid=(null===(v=p.currentUser)||void 0===v?void 0:v.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,I.Z)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUser(c){var l=this;return(0,I.Z)(function*(){var p;const m=yield l.assertedPersistence.getCurrentUser();let v=m,w=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const N=null===(p=l.redirectUser)||void 0===p?void 0:p._redirectEventId,q=v?._redirectEventId,ue=yield l.tryRedirectSignIn(c);(!N||N===q)&&ue?.user&&(v=ue.user,w=!0)}if(!v)return l.directlySetCurrentUser(null);if(!v._redirectEventId){if(w)try{yield l.beforeStateQueue.runMiddleware(v)}catch(N){v=m,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(N))}return v?l.reloadAndSetCurrentUserOrClear(v):l.directlySetCurrentUser(null)}return Z(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===v._redirectEventId?l.directlySetCurrentUser(v):l.reloadAndSetCurrentUserOrClear(v)})()}tryRedirectSignIn(c){var l=this;return(0,I.Z)(function*(){let p=null;try{p=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,I.Z)(function*(){try{yield ar(c)}catch(p){if("auth/network-request-failed"!==p?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function ro(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}()}_delete(){var c=this;return(0,I.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,I.Z)(function*(){const p=c?(0,j.m9)(c):null;return p&&Z(p.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(p&&p._clone(l))})()}_updateCurrentUser(c,l=!1){var p=this;return(0,I.Z)(function*(){if(!p._deleted)return c&&Z(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),l||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,I.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,I.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var l=this;return this.queue((0,I.Z)(function*(){yield l.assertedPersistence.setPersistence(Ze(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,I.Z)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const p=l._getPasswordPolicyInternal();return p.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,I.Z)(function*(){const l=yield function oE(h){return fu.apply(this,arguments)}(c),p=new cP(l);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new j.LL("auth","Firebase",c())}onAuthStateChanged(c,l,p){return this.registerStateListener(this.authStateSubscription,c,l,p)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,p){return this.registerStateListener(this.idTokenSubscription,c,l,p)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,I.Z)(function*(){if(l.currentUser){const p=yield l.currentUser.getIdToken(),m={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=l.tenantId&&(m.tenantId=l.tenantId),yield function T(h,c){return D.apply(this,arguments)}(l,m)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var p=this;return(0,I.Z)(function*(){const m=yield p.getOrInitRedirectPersistenceManager(l);return null===c?m.removeCurrentUser():m.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,I.Z)(function*(){if(!l.redirectPersistenceManager){const p=c&&Ze(c)||l._popupRedirectResolver;Z(p,l,"argument-error"),l.redirectPersistenceManager=yield ve.create(l,[Ze(p._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,I.Z)(function*(){var p,m;return l._isInitialized&&(yield l.queue((0,I.Z)(function*(){}))),(null===(p=l._currentUser)||void 0===p?void 0:p._redirectEventId)===c?l._currentUser:(null===(m=l.redirectUser)||void 0===m?void 0:m._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,I.Z)(function*(){if(c===l.currentUser)return l.queue((0,I.Z)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,p,m){if(this._deleted)return()=>{};const v="function"==typeof l?l:l.next.bind(l);let w=!1;const N=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(N,this,"internal-error"),N.then(()=>{w||v(this.currentUser)}),"function"==typeof l){const q=c.addObserver(l,p,m);return()=>{w=!0,q()}}{const q=c.addObserver(l);return()=>{w=!0,q()}}}directlySetCurrentUser(c){var l=this;return(0,I.Z)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=na(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,I.Z)(function*(){var l;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const m=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();m&&(p["X-Firebase-Client"]=m);const v=yield c._getAppCheckToken();return v&&(p["X-Firebase-AppCheck"]=v),p})()}_getAppCheckToken(){var c=this;return(0,I.Z)(function*(){var l;const p=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return p?.error&&function Ln(h,...c){Vn.logLevel<=dt.in.WARN&&Vn.warn(`Auth (${Ve.SDK_VERSION}): ${h}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Ft(h){return(0,j.m9)(h)}class ws{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,j.ne)(l=>this.observer=l)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function am(h){return new Promise((c,l)=>{const p=document.createElement("script");p.setAttribute("src",h),p.onload=c,p.onerror=m=>{const v=Rt("internal-error");v.customData=m,l(v)},p.type="text/javascript",p.charset="UTF-8",function lP(){var h,c;return null!==(c=null===(h=document.getElementsByTagName("head"))||void 0===h?void 0:h[0])&&void 0!==c?c:document}().appendChild(p)})}function uE(h){return`__${h}${Math.floor(1e6*Math.random())}`}class um{constructor(c){this.type="recaptcha-enterprise",this.auth=Ft(c)}verify(c="verify",l=!1){var p=this;return(0,I.Z)(function*(){function v(){return v=(0,I.Z)(function*(N){if(!l){if(null==N.tenantId&&null!=N._agentRecaptchaConfig)return N._agentRecaptchaConfig.siteKey;if(null!=N.tenantId&&void 0!==N._tenantRecaptchaConfigs[N.tenantId])return N._tenantRecaptchaConfigs[N.tenantId].siteKey}return new Promise(function(){var q=(0,I.Z)(function*(ue,_e){_n(N,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(we=>{if(void 0!==we.recaptchaKey){const tn=new Or(we);return null==N.tenantId?N._agentRecaptchaConfig=tn:N._tenantRecaptchaConfigs[N.tenantId]=tn,ue(tn.siteKey)}_e(new Error("recaptcha Enterprise site key undefined"))}).catch(we=>{_e(we)})});return function(ue,_e){return q.apply(this,arguments)}}())}),v.apply(this,arguments)}function w(N,q,ue){const _e=window.grecaptcha;Ir(_e)?_e.enterprise.ready(()=>{_e.enterprise.execute(N,{action:c}).then(we=>{q(we)}).catch(()=>{q("NO_RECAPTCHA")})}):ue(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((N,q)=>{(function m(N){return v.apply(this,arguments)})(p.auth).then(ue=>{if(!l&&Ir(window.grecaptcha))w(ue,N,q);else{if(typeof window>"u")return void q(new Error("RecaptchaVerifier is only supported in browser"));am("https://www.google.com/recaptcha/enterprise.js?render="+ue).then(()=>{w(ue,N,q)}).catch(_e=>{q(_e)})}}).catch(ue=>{q(ue)})})})()}}function lE(h,c,l){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,I.Z)(function*(h,c,l,p=!1){const m=new um(h);let v;try{v=yield m.verify(l)}catch{v=yield m.verify(l,!0)}const w=Object.assign({},c);return Object.assign(w,p?{captchaResp:v}:{captchaResponse:v}),Object.assign(w,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(w,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),w})).apply(this,arguments)}function Ne(h,c,l,p){return cm.apply(this,arguments)}function cm(){return cm=(0,I.Z)(function*(h,c,l,p){var m;if(null!==(m=h._getRecaptchaConfig())&&void 0!==m&&m.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const v=yield lE(h,c,l,"getOobCode"===l);return p(h,v)}return p(h,c).catch(function(){var v=(0,I.Z)(function*(w){if("auth/missing-recaptcha-token"===w.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const N=yield lE(h,c,l,"getOobCode"===l);return p(h,N)}return Promise.reject(w)});return function(w){return v.apply(this,arguments)}}())}),cm.apply(this,arguments)}function pu(h){const c=h.indexOf(":");return c<0?"":h.substr(0,c+1)}function wh(h){if(!h)return null;const c=Number(h);return isNaN(c)?null:c}class ts{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return Gt("not implemented")}_getIdTokenResponse(c){return Gt("not implemented")}_linkToIdToken(c,l){return Gt("not implemented")}_getReauthenticationResolver(c){return Gt("not implemented")}}function gu(h,c){return mu.apply(this,arguments)}function mu(){return(mu=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:resetPassword",Q(h,c))})).apply(this,arguments)}function Th(){return(Th=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function nt(h,c){return _u.apply(this,arguments)}function _u(){return(_u=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Jn(){return(Jn=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:update",Q(h,c))})).apply(this,arguments)}function fm(h,c){return pm.apply(this,arguments)}function pm(){return(pm=(0,I.Z)(function*(h,c){return Ae(h,"POST","/v1/accounts:signInWithPassword",Q(h,c))})).apply(this,arguments)}function vt(h,c){return gm.apply(this,arguments)}function gm(){return(gm=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:sendOobCode",Q(h,c))})).apply(this,arguments)}function le(){return(le=(0,I.Z)(function*(h,c){return vt(h,c)})).apply(this,arguments)}function Ah(h,c){return yu.apply(this,arguments)}function yu(){return(yu=(0,I.Z)(function*(h,c){return vt(h,c)})).apply(this,arguments)}function mm(h,c){return vu.apply(this,arguments)}function vu(){return(vu=(0,I.Z)(function*(h,c){return vt(h,c)})).apply(this,arguments)}function Iu(){return(Iu=(0,I.Z)(function*(h,c){return vt(h,c)})).apply(this,arguments)}function _m(){return(_m=(0,I.Z)(function*(h,c){return Ae(h,"POST","/v1/accounts:signInWithEmailLink",Q(h,c))})).apply(this,arguments)}function ym(){return(ym=(0,I.Z)(function*(h,c){return Ae(h,"POST","/v1/accounts:signInWithEmailLink",Q(h,c))})).apply(this,arguments)}class zc extends ts{constructor(c,l,p,m=null){super("password",p),this._email=c,this._password=l,this._tenantId=m}static _fromEmailAndPassword(c,l){return new zc(c,l,"password")}static _fromEmailAndCode(c,l,p=null){return new zc(c,l,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,I.Z)(function*(){switch(l.signInMethod){case"password":return Ne(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",fm);case"emailLink":return function mP(h,c){return _m.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:_t(c,"internal-error")}})()}_linkToIdToken(c,l){var p=this;return(0,I.Z)(function*(){switch(p.signInMethod){case"password":return Ne(c,{idToken:l,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nt);case"emailLink":return function _P(h,c){return ym.apply(this,arguments)}(c,{idToken:l,email:p._email,oobCode:p._password});default:_t(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Lr(h,c){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,I.Z)(function*(h,c){return Ae(h,"POST","/v1/accounts:signInWithIdp",Q(h,c))})).apply(this,arguments)}class Ni extends ts{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new Ni(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):_t("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:m}=l,v=(0,Ht._T)(l,["providerId","signInMethod"]);if(!p||!m)return null;const w=new Ni(p,m);return w.idToken=v.idToken||void 0,w.accessToken=v.accessToken||void 0,w.secret=v.secret,w.nonce=v.nonce,w.pendingToken=v.pendingToken||null,w}_getIdTokenResponse(c){return Lr(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,Lr(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,Lr(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,j.xO)(l)}return c}}function Ch(){return(Ch=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:sendVerificationCode",Q(h,c))})).apply(this,arguments)}function Ts(){return(Ts=(0,I.Z)(function*(h,c){return Ae(h,"POST","/v1/accounts:signInWithPhoneNumber",Q(h,c))})).apply(this,arguments)}function Mi(){return(Mi=(0,I.Z)(function*(h,c){const l=yield Ae(h,"POST","/v1/accounts:signInWithPhoneNumber",Q(h,c));if(l.temporaryProof)throw Cn(h,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const mE={USER_NOT_FOUND:"user-not-found"};function Zc(){return(Zc=(0,I.Z)(function*(h,c){return Ae(h,"POST","/v1/accounts:signInWithPhoneNumber",Q(h,Object.assign(Object.assign({},c),{operation:"REAUTH"})),mE)})).apply(this,arguments)}class ge extends ts{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new ge({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new ge({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function vm(h,c){return Ts.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function gE(h,c){return Mi.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function ie(h,c){return Zc.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:p,verificationCode:m}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:p,code:m}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:p,phoneNumber:m,temporaryProof:v}=c;return p||l||m||v?new ge({verificationId:l,verificationCode:p,phoneNumber:m,temporaryProof:v}):null}}class ns{constructor(c){var l,p,m,v,w,N;const q=(0,j.zd)((0,j.pd)(c)),ue=null!==(l=q.apiKey)&&void 0!==l?l:null,_e=null!==(p=q.oobCode)&&void 0!==p?p:null,we=function Kc(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(m=q.mode)&&void 0!==m?m:null);Z(ue&&_e&&we,"argument-error"),this.apiKey=ue,this.operation=we,this.code=_e,this.continueUrl=null!==(v=q.continueUrl)&&void 0!==v?v:null,this.languageCode=null!==(w=q.languageCode)&&void 0!==w?w:null,this.tenantId=null!==(N=q.tenantId)&&void 0!==N?N:null}static parseLink(c){const l=function Dh(h){const c=(0,j.zd)((0,j.pd)(h)).link,l=c?(0,j.zd)((0,j.pd)(c)).deep_link_id:null,p=(0,j.zd)((0,j.pd)(h)).deep_link_id;return(p?(0,j.zd)((0,j.pd)(p)).link:null)||p||l||c||h}(c);try{return new ns(l)}catch{return null}}}let bh=(()=>{class h{constructor(){this.providerId=h.PROVIDER_ID}static credential(l,p){return zc._fromEmailAndPassword(l,p)}static credentialWithLink(l,p){const m=ns.parseLink(p);return Z(m,"argument-error"),zc._fromEmailAndCode(l,m.code,m.tenantId)}}return h.PROVIDER_ID="password",h.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h.EMAIL_LINK_SIGN_IN_METHOD="emailLink",h})();class rs{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Ar extends rs{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class is extends Ar{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return Z("providerId"in l&&"signInMethod"in l,"argument-error"),Ni._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return Z(c.idToken||c.accessToken,"argument-error"),Ni._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return is.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return is.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:p,oauthTokenSecret:m,pendingToken:v,nonce:w,providerId:N}=c;if(!p&&!m&&!l&&!v||!N)return null;try{return new is(N)._credential({idToken:l,accessToken:p,nonce:w,pendingToken:v})}catch{return null}}}let ri=(()=>{class h extends Ar{constructor(){super("facebook.com")}static credential(l){return Ni._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.FACEBOOK_SIGN_IN_METHOD="facebook.com",h.PROVIDER_ID="facebook.com",h})(),mi=(()=>{class h extends Ar{constructor(){super("google.com"),this.addScope("profile")}static credential(l,p){return Ni._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:p})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:p,oauthAccessToken:m}=l;if(!p&&!m)return null;try{return h.credential(p,m)}catch{return null}}}return h.GOOGLE_SIGN_IN_METHOD="google.com",h.PROVIDER_ID="google.com",h})(),lt=(()=>{class h extends Ar{constructor(){super("github.com")}static credential(l){return Ni._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.GITHUB_SIGN_IN_METHOD="github.com",h.PROVIDER_ID="github.com",h})();class As extends ts{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return Lr(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,Lr(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,Lr(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:m,pendingToken:v}=l;return p&&m&&v&&p===m?new As(p,v):null}static _create(c,l){return new As(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wu extends rs{constructor(c){Z(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return wu.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return wu.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=As.fromJSON(c);return Z(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:p}=c;if(!l||!p)return null;try{return As._create(p,l)}catch{return null}}}let xi=(()=>{class h extends Ar{constructor(){super("twitter.com")}static credential(l,p){return Ni._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:p})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:p,oauthTokenSecret:m}=l;if(!p||!m)return null;try{return h.credential(p,m)}catch{return null}}}return h.TWITTER_SIGN_IN_METHOD="twitter.com",h.PROVIDER_ID="twitter.com",h})();function ra(h,c){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,I.Z)(function*(h,c){return Ae(h,"POST","/v1/accounts:signUp",Q(h,c))})).apply(this,arguments)}class Fr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,p,m=!1){return(0,I.Z)(function*(){const v=yield W._fromIdTokenResponse(c,p,m),w=Jc(p);return new Fr({user:v,providerId:w,_tokenResponse:p,operationType:l})})()}static _forOperation(c,l,p){return(0,I.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const m=Jc(p);return new Fr({user:c,providerId:m,_tokenResponse:p,operationType:l})})()}}function Jc(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}function Xc(){return(Xc=(0,I.Z)(function*(h){var c;const l=Ft(h);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new Fr({user:l.currentUser,providerId:null,operationType:"signIn"});const p=yield ra(l,{returnSecureToken:!0}),m=yield Fr._fromIdTokenResponse(l,"signIn",p,!0);return yield l._updateCurrentUser(m.user),m})).apply(this,arguments)}class Cs extends j.ZR{constructor(c,l,p,m){var v;super(l.code,l.message),this.operationType=p,this.user=m,Object.setPrototypeOf(this,Cs.prototype),this.customData={appName:c.name,tenantId:null!==(v=c.tenantId)&&void 0!==v?v:void 0,_serverResponse:l.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,l,p,m){return new Cs(c,l,p,m)}}function Rh(h,c,l,p){return("reauthenticate"===c?l._getReauthenticationResolver(h):l._getIdTokenResponse(h)).catch(v=>{throw"auth/multi-factor-auth-required"===v.code?Cs._fromErrorAndOperation(h,v,c,p):v})}function Ph(h){return new Set(h.map(({providerId:c})=>c).filter(c=>!!c))}function el(){return el=(0,I.Z)(function*(h,c){const l=(0,j.m9)(h);yield Cr(!0,l,c);const{providerUserInfo:p}=yield function du(h,c){return Er.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),m=Ph(p||[]);return l.providerData=l.providerData.filter(v=>m.has(v.providerId)),m.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),el.apply(this,arguments)}function Nh(h,c){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,I.Z)(function*(h,c,l=!1){const p=yield ni(h,c._linkToIdToken(h.auth,yield h.getIdToken()),l);return Fr._forOperation(h,"link",p)})).apply(this,arguments)}function Cr(h,c,l){return xh.apply(this,arguments)}function xh(){return(xh=(0,I.Z)(function*(h,c,l){yield ar(c);const m=!1===h?"provider-already-linked":"no-such-provider";Z(Ph(c.providerData).has(l)===h,c.auth,m)})).apply(this,arguments)}function kh(h,c){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,I.Z)(function*(h,c,l=!1){const{auth:p}=h,m="reauthenticate";try{const v=yield ni(h,Rh(p,m,c,h),l);Z(v.idToken,p,"internal-error");const w=Yo(v.idToken);Z(w,p,"internal-error");const{sub:N}=w;return Z(h.uid===N,p,"user-mismatch"),Fr._forOperation(h,m,v)}catch(v){throw"auth/user-not-found"===v?.code&&_t(p,"user-mismatch"),v}})).apply(this,arguments)}function Em(h,c){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,I.Z)(function*(h,c,l=!1){const p="signIn",m=yield Rh(h,p,c),v=yield Fr._fromIdTokenResponse(h,p,m);return l||(yield h._updateCurrentUser(v.user)),v})).apply(this,arguments)}function tl(h,c){return nl.apply(this,arguments)}function nl(){return(nl=(0,I.Z)(function*(h,c){return Em(Ft(h),c)})).apply(this,arguments)}function wm(h,c){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,I.Z)(function*(h,c){const l=(0,j.m9)(h);return yield Cr(!1,l,c.providerId),Nh(l,c)})).apply(this,arguments)}function Tm(h,c){return Un.apply(this,arguments)}function Un(){return(Un=(0,I.Z)(function*(h,c){return kh((0,j.m9)(h),c)})).apply(this,arguments)}function Fh(){return(Fh=(0,I.Z)(function*(h,c){return Ae(h,"POST","/v1/accounts:signInWithCustomToken",Q(h,c))})).apply(this,arguments)}function cr(){return cr=(0,I.Z)(function*(h,c){const l=Ft(h),p=yield function yE(h,c){return Fh.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),m=yield Fr._fromIdTokenResponse(l,"signIn",p);return yield l._updateCurrentUser(m.user),m}),cr.apply(this,arguments)}class Tu{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?rl._fromServerResponse(c,l):"totpInfo"in l?xe._fromServerResponse(c,l):_t(c,"internal-error")}}class rl extends Tu{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new rl(l)}}class xe extends Tu{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new xe(l)}}function Bn(h,c,l){var p;Z((null===(p=l.url)||void 0===p?void 0:p.length)>0,h,"invalid-continue-uri"),Z(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,h,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(Z(l.iOS.bundleId.length>0,h,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(Z(l.android.packageName.length>0,h,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function rt(h){return yn.apply(this,arguments)}function yn(){return(yn=(0,I.Z)(function*(h){const c=Ft(h);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function Ds(){return(Ds=(0,I.Z)(function*(h,c,l){const p=Ft(h),m={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&Bn(p,m,l),yield Ne(p,m,"getOobCode",Ah)})).apply(this,arguments)}function il(){return il=(0,I.Z)(function*(h,c,l){yield gu((0,j.m9)(h),{oobCode:c,newPassword:l}).catch(function(){var p=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&rt(h),m});return function(m){return p.apply(this,arguments)}}())}),il.apply(this,arguments)}function ia(){return ia=(0,I.Z)(function*(h,c){yield function hm(h,c){return Jn.apply(this,arguments)}((0,j.m9)(h),{oobCode:c})}),ia.apply(this,arguments)}function Cm(h,c){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,I.Z)(function*(h,c){const l=(0,j.m9)(h),p=yield gu(l,{oobCode:c}),m=p.requestType;switch(Z(m,l,"internal-error"),m){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Z(p.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Z(p.mfaInfo,l,"internal-error");default:Z(p.email,l,"internal-error")}let v=null;return p.mfaInfo&&(v=Tu._fromServerResponse(Ft(l),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:v},operation:m}})).apply(this,arguments)}function de(){return(de=(0,I.Z)(function*(h,c){const{data:l}=yield Cm((0,j.m9)(h),c);return l.email})).apply(this,arguments)}function Pt(){return(Pt=(0,I.Z)(function*(h,c,l){const p=Ft(h),w=yield Ne(p,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ra).catch(q=>{throw"auth/password-does-not-meet-requirements"===q.code&&rt(h),q}),N=yield Fr._fromIdTokenResponse(p,"signIn",w);return yield p._updateCurrentUser(N.user),N})).apply(this,arguments)}function Sn(){return(Sn=(0,I.Z)(function*(h,c,l){const p=Ft(h),m={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function v(w,N){Z(N.handleCodeInApp,p,"argument-error"),N&&Bn(p,w,N)})(m,l),yield Ne(p,m,"getOobCode",mm)})).apply(this,arguments)}function ki(){return(ki=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h),m=bh.credentialWithLink(c,l||mn());return Z(m._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),tl(p,m)})).apply(this,arguments)}function Fe(){return(Fe=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:createAuthUri",Q(h,c))})).apply(this,arguments)}function sl(){return sl=(0,I.Z)(function*(h,c){const p={identifier:c,continueUri:bi()?mn():"http://localhost"},{signinMethods:m}=yield function oa(h,c){return Fe.apply(this,arguments)}((0,j.m9)(h),p);return m||[]}),sl.apply(this,arguments)}function Wt(){return Wt=(0,I.Z)(function*(h,c){const l=(0,j.m9)(h),m={requestType:"VERIFY_EMAIL",idToken:yield h.getIdToken()};c&&Bn(l.auth,m,c);const{email:v}=yield function gP(h,c){return le.apply(this,arguments)}(l.auth,m);v!==h.email&&(yield h.reload())}),Wt.apply(this,arguments)}function bs(){return bs=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h),v={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield h.getIdToken(),newEmail:c};l&&Bn(p.auth,v,l);const{email:w}=yield function fE(h,c){return Iu.apply(this,arguments)}(p.auth,v);w!==h.email&&(yield h.reload())}),bs.apply(this,arguments)}function so(){return(so=(0,I.Z)(function*(h,c){return B(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Vi(){return Vi=(0,I.Z)(function*(h,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const p=(0,j.m9)(h),v={idToken:yield p.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},w=yield ni(p,function Oi(h,c){return so.apply(this,arguments)}(p.auth,v));p.displayName=w.displayName||null,p.photoURL=w.photoUrl||null;const N=p.providerData.find(({providerId:q})=>"password"===q);N&&(N.displayName=p.displayName,N.photoURL=p.photoURL),yield p._updateTokensIfNecessary(w)}),Vi.apply(this,arguments)}function ua(h,c,l){return Ye.apply(this,arguments)}function Ye(){return Ye=(0,I.Z)(function*(h,c,l){const{auth:p}=h,v={idToken:yield h.getIdToken(),returnSecureToken:!0};c&&(v.email=c),l&&(v.password=l);const w=yield ni(h,function dm(h,c){return Th.apply(this,arguments)}(p,v));yield h._updateTokensIfNecessary(w,!0)}),Ye.apply(this,arguments)}class Ss{constructor(c,l,p={}){this.isNewUser=c,this.providerId=l,this.profile=p}}class Bh extends Ss{constructor(c,l,p,m){super(c,l,p),this.username=m}}class Li extends Ss{constructor(c,l){super(c,"facebook.com",l)}}class ol extends Bh{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class ca extends Ss{constructor(c,l){super(c,"google.com",l)}}class Su extends Bh{constructor(c,l,p){super(c,"twitter.com",l,p)}}function jn(h){const{user:c,_tokenResponse:l}=h;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function vP(h){var c,l;if(!h)return null;const{providerId:p}=h,m=h.rawUserInfo?JSON.parse(h.rawUserInfo):{},v=h.isNewUser||"identitytoolkit#SignupNewUserResponse"===h.kind;if(!p&&h?.idToken){const w=null===(l=null===(c=Yo(h.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(w)return new Ss(v,"anonymous"!==w&&"custom"!==w?w:null)}if(!p)return null;switch(p){case"facebook.com":return new Li(v,m);case"github.com":return new ol(v,m);case"google.com":return new ca(v,m);case"twitter.com":return new Su(v,m,h.screenName||null);case"custom":case"anonymous":return new Ss(v,null);default:return new Ss(v,p,m)}}(l)}class la{constructor(c,l,p){this.type=c,this.credential=l,this.user=p}static _fromIdtoken(c,l){return new la("enroll",c,l)}static _fromMfaPendingCredential(c){return new la("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,p;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return la._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return la._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Sm{constructor(c,l,p){this.session=c,this.hints=l,this.signInResolver=p}static _fromError(c,l){const p=Ft(c),m=l.customData._serverResponse,v=(m.mfaInfo||[]).map(N=>Tu._fromServerResponse(p,N));Z(m.mfaPendingCredential,p,"internal-error");const w=la._fromMfaPendingCredential(m.mfaPendingCredential);return new Sm(w,v,function(){var N=(0,I.Z)(function*(q){const ue=yield q._process(p,w);delete m.mfaInfo,delete m.mfaPendingCredential;const _e=Object.assign(Object.assign({},m),{idToken:ue.idToken,refreshToken:ue.refreshToken});switch(l.operationType){case"signIn":const we=yield Fr._fromIdTokenResponse(p,l.operationType,_e);return yield p._updateCurrentUser(we.user),we;case"reauthenticate":return Z(l.user,p,"internal-error"),Fr._forOperation(l.user,l.operationType,_e);default:_t(p,"internal-error")}});return function(q){return N.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,I.Z)(function*(){return l.signInResolver(c)})()}}class Rm{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(p=>Tu._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new Rm(c)}getSession(){var c=this;return(0,I.Z)(function*(){return la._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var p=this;return(0,I.Z)(function*(){const m=c,v=yield p.getSession(),w=yield ni(p.user,m._process(p.user.auth,v,l));return yield p.user._updateTokensIfNecessary(w),p.user.reload()})()}unenroll(c){var l=this;return(0,I.Z)(function*(){const p="string"==typeof c?c:c.uid,m=yield l.user.getIdToken();try{const v=yield ni(l.user,function bP(h,c){return B(h,"POST","/v2/accounts/mfaEnrollment:withdraw",Q(h,c))}(l.user.auth,{idToken:m,mfaEnrollmentId:p}));l.enrolledFactors=l.enrolledFactors.filter(({uid:w})=>w!==p),yield l.user._updateTokensIfNecessary(v),yield l.user.reload()}catch(v){throw v}})()}}const Pm=new WeakMap,$h="__sak";class Hh{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem($h,"1"),this.storage.removeItem($h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ui=(()=>{class h extends Hh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,p)=>this.onStorageEvent(l,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Nm(){const h=(0,j.z$)();return Pi(h)||Be(h)}()&&function Xe(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ee(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const p of Object.keys(this.listeners)){const m=this.storage.getItem(p),v=this.localCache[p];m!==v&&l(p,v,m)}}onStorageEvent(l,p=!1){if(!l.key)return void this.forAllChangedKeys((N,q,ue)=>{this.notifyListeners(N,ue)});const m=l.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const N=this.storage.getItem(m);if(l.newValue!==N)null!==l.newValue?this.storage.setItem(m,l.newValue):this.storage.removeItem(m);else if(this.localCache[m]===l.newValue&&!p)return}const v=()=>{const N=this.storage.getItem(m);!p&&this.localCache[m]===N||this.notifyListeners(m,N)},w=this.storage.getItem(m);!function Xt(){return(0,j.w1)()&&10===document.documentMode}()||w===l.newValue||l.newValue===l.oldValue?v():setTimeout(v,10)}notifyListeners(l,p){this.localCache[l]=p;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,p,m)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:p,newValue:m}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,p){var m=()=>super._set,v=this;return(0,I.Z)(function*(){yield m().call(v,l,p),v.localCache[l]=JSON.stringify(p)})()}_get(l){var p=()=>super._get,m=this;return(0,I.Z)(function*(){const v=yield p().call(m,l);return m.localCache[l]=JSON.stringify(v),v})()}_remove(l){var p=()=>super._remove,m=this;return(0,I.Z)(function*(){yield p().call(m,l),delete m.localCache[l]})()}}return h.type="LOCAL",h})(),uo=(()=>{class h extends Hh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,p){}_removeListener(l,p){}}return h.type="SESSION",h})();let $n=(()=>{class h{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const p=this.receivers.find(v=>v.isListeningto(l));if(p)return p;const m=new h(l);return this.receivers.push(m),m}isListeningto(l){return this.eventTarget===l}handleEvent(l){var p=this;return(0,I.Z)(function*(){const m=l,{eventId:v,eventType:w,data:N}=m.data,q=p.handlersMap[w];if(!q?.size)return;m.ports[0].postMessage({status:"ack",eventId:v,eventType:w});const ue=Array.from(q).map(function(){var we=(0,I.Z)(function*(tn){return tn(m.origin,N)});return function(tn){return we.apply(this,arguments)}}()),_e=yield function NP(h){return Promise.all(h.map(function(){var c=(0,I.Z)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(p){return{fulfilled:!1,reason:p}}});return function(l){return c.apply(this,arguments)}}()))}(ue);m.ports[0].postMessage({status:"done",eventId:v,eventType:w,response:_e})})()}_subscribe(l,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(p)}_unsubscribe(l,p){this.handlersMap[l]&&p&&this.handlersMap[l].delete(p),(!p||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return h.receivers=[],h})();function Rs(h="",c=10){let l="";for(let p=0;p<c;p++)l+=Math.floor(10*Math.random());return h+l}class ii{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,p=50){var m=this;return(0,I.Z)(function*(){const v=typeof MessageChannel<"u"?new MessageChannel:null;if(!v)throw new Error("connection_unavailable");let w,N;return new Promise((q,ue)=>{const _e=Rs("",20);v.port1.start();const we=setTimeout(()=>{ue(new Error("unsupported_event"))},p);N={messageChannel:v,onMessage(tn){const yi=tn;if(yi.data.eventId===_e)switch(yi.data.status){case"ack":clearTimeout(we),w=setTimeout(()=>{ue(new Error("timeout"))},3e3);break;case"done":clearTimeout(w),q(yi.data.response);break;default:clearTimeout(we),clearTimeout(w),ue(new Error("invalid_response"))}}},m.handlers.add(N),v.port1.addEventListener("message",N.onMessage),m.target.postMessage({eventType:c,eventId:_e,data:l},[v.port2])}).finally(()=>{N&&m.removeMessageHandler(N)})})()}}function an(){return window}function ul(){return typeof an().WorkerGlobalScope<"u"&&"function"==typeof an().importScripts}function Pu(){return(Pu=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const cl="firebaseLocalStorageDb",Nu="firebaseLocalStorage",qh="fbase_key";class Ps{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function Ns(h,c){return h.transaction([Nu],c?"readwrite":"readonly").objectStore(Nu)}function ll(){const h=indexedDB.open(cl,1);return new Promise((c,l)=>{h.addEventListener("error",()=>{l(h.error)}),h.addEventListener("upgradeneeded",()=>{const p=h.result;try{p.createObjectStore(Nu,{keyPath:qh})}catch(m){l(m)}}),h.addEventListener("success",(0,I.Z)(function*(){const p=h.result;p.objectStoreNames.contains(Nu)?c(p):(p.close(),yield function da(){const h=indexedDB.deleteDatabase(cl);return new Ps(h).toPromise()}(),c(yield ll()))}))})}function IE(h,c,l){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,I.Z)(function*(h,c,l){const p=Ns(h,!0).put({[qh]:c,value:l});return new Ps(p).toPromise()})).apply(this,arguments)}function zh(){return(zh=(0,I.Z)(function*(h,c){const l=Ns(h,!1).get(c),p=yield new Ps(l).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Lm(h,c){const l=Ns(h,!0).delete(c);return new Ps(l).toPromise()}const ha=(()=>{class h{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,I.Z)(function*(){return l.db||(l.db=yield ll()),l.db})()}_withRetries(l){var p=this;return(0,I.Z)(function*(){let m=0;for(;;)try{const v=yield p._openDb();return yield l(v)}catch(v){if(m++>3)throw v;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,I.Z)(function*(){return ul()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,I.Z)(function*(){l.receiver=$n._getInstance(function Gh(){return ul()?self:null}()),l.receiver._subscribe("keyChanged",function(){var p=(0,I.Z)(function*(m,v){return{keyProcessed:(yield l._poll()).includes(v.key)}});return function(m,v){return p.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var p=(0,I.Z)(function*(m,v){return["keyChanged"]});return function(m,v){return p.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,I.Z)(function*(){var p,m;if(l.activeServiceWorker=yield function xm(){return Pu.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new ii(l.activeServiceWorker);const v=yield l.sender._send("ping",{},800);v&&null!==(p=v[0])&&void 0!==p&&p.fulfilled&&null!==(m=v[0])&&void 0!==m&&m.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var p=this;return(0,I.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function km(){var h;return(null===(h=navigator?.serviceWorker)||void 0===h?void 0:h.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:l},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const l=yield ll();return yield IE(l,$h,"1"),yield Lm(l,$h),!0}catch{}return!1})()}_withPendingWrite(l){var p=this;return(0,I.Z)(function*(){p.pendingWrites++;try{yield l()}finally{p.pendingWrites--}})()}_set(l,p){var m=this;return(0,I.Z)(function*(){return m._withPendingWrite((0,I.Z)(function*(){return yield m._withRetries(v=>IE(v,l,p)),m.localCache[l]=p,m.notifyServiceWorker(l)}))})()}_get(l){var p=this;return(0,I.Z)(function*(){const m=yield p._withRetries(v=>function MP(h,c){return zh.apply(this,arguments)}(v,l));return p.localCache[l]=m,m})()}_remove(l){var p=this;return(0,I.Z)(function*(){return p._withPendingWrite((0,I.Z)(function*(){return yield p._withRetries(m=>Lm(m,l)),delete p.localCache[l],p.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,I.Z)(function*(){const p=yield l._withRetries(w=>{const N=Ns(w,!1).getAll();return new Ps(N).toPromise()});if(!p)return[];if(0!==l.pendingWrites)return[];const m=[],v=new Set;if(0!==p.length)for(const{fbase_key:w,value:N}of p)v.add(w),JSON.stringify(l.localCache[w])!==JSON.stringify(N)&&(l.notifyListeners(w,N),m.push(w));for(const w of Object.keys(l.localCache))l.localCache[w]&&!v.has(w)&&(l.notifyListeners(w,null),m.push(w));return m})()}notifyListeners(l,p){this.localCache[l]=p;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(p)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return h.type="LOCAL",h})(),Mu=1e12;class wE{constructor(c){this.auth=c,this.counter=Mu,this._widgets=new Map}render(c,l){const p=this.counter;return this._widgets.set(p,new TE(c,this.auth.name,l||{})),this.counter++,p}reset(c){var l;const p=c||Mu;null===(l=this._widgets.get(p))||void 0===l||l.delete(),this._widgets.delete(p)}getResponse(c){var l;return(null===(l=this._widgets.get(c||Mu))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,I.Z)(function*(){var p;return null===(p=l._widgets.get(c||Mu))||void 0===p||p.execute(),""})()}}class TE{constructor(c,l,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const m="string"==typeof c?document.getElementById(c):c;Z(m,"argument-error",{appName:l}),this.container=m,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function AE(h){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<h;p++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const dl=uE("rcb"),CE=new Ri(3e4,6e4);class DE{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=an().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return Z(function VP(h){return h.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(h)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&or(an().grecaptcha)?Promise.resolve(an().grecaptcha):new Promise((p,m)=>{const v=an().setTimeout(()=>{m(Rt(c,"network-request-failed"))},CE.get());an()[dl]=()=>{an().clearTimeout(v),delete an()[dl];const N=an().grecaptcha;if(!N||!or(N))return void m(Rt(c,"internal-error"));const q=N.render;N.render=(ue,_e)=>{const we=q(ue,_e);return this.counter++,we},this.hostLanguage=l,p(N)},am(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:dl,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(v),m(Rt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=an().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class bE{load(c){return(0,I.Z)(function*(){return new wE(c)})()}clearedOneInstance(){}}const jr="recaptcha",$m={theme:"light",type:"image"};class SE{constructor(c,l,p=Object.assign({},$m)){this.parameters=p,this.type=jr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ft(c),this.isInvisible="invisible"===this.parameters.size,Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const m="string"==typeof l?document.getElementById(l):l;Z(m,this.auth,"argument-error"),this.container=m,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bE:new DE,this.validateStartingState()}verify(){var c=this;return(0,I.Z)(function*(){c.assertNotDestroyed();const l=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(l)||new Promise(v=>{const w=N=>{N&&(c.tokenChangeListeners.delete(w),v(N))};c.tokenChangeListeners.add(w),c.isInvisible&&p.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){Z(!this.parameters.sitekey,this.auth,"argument-error"),Z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(p=>p(l)),"function"==typeof c)c(l);else if("string"==typeof c){const p=an()[c];"function"==typeof p&&p(l)}}}assertNotDestroyed(){Z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,I.Z)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const p=document.createElement("div");l.appendChild(p),l=p}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,I.Z)(function*(){Z(bi()&&!ul(),c.auth,"internal-error"),yield function RE(){let h=null;return new Promise(c=>{"complete"!==document.readyState?(h=()=>c(),window.addEventListener("load",h)):c()}).catch(c=>{throw h&&window.removeEventListener("load",h),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function cu(h){return Xi.apply(this,arguments)}(c.auth);Z(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return Z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class hl{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=ge._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function Zh(){return(Zh=(0,I.Z)(function*(h,c,l){const p=Ft(h),m=yield xu(p,c,(0,j.m9)(l));return new hl(m,v=>tl(p,v))})).apply(this,arguments)}function Qh(){return(Qh=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);yield Cr(!1,p,"phone");const m=yield xu(p.auth,c,(0,j.m9)(l));return new hl(m,v=>wm(p,v))})).apply(this,arguments)}function fl(){return(fl=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h),m=yield xu(p.auth,c,(0,j.m9)(l));return new hl(m,v=>Tm(p,v))})).apply(this,arguments)}function xu(h,c,l){return wt.apply(this,arguments)}function wt(){return wt=(0,I.Z)(function*(h,c,l){var p;const m=yield l.verify();try{let v;if(Z("string"==typeof m,h,"argument-error"),Z(l.type===jr,h,"argument-error"),v="string"==typeof c?{phoneNumber:c}:c,"session"in v){const w=v.session;if("phoneNumber"in v)return Z("enroll"===w.type,h,"internal-error"),(yield function AP(h,c){return B(h,"POST","/v2/accounts/mfaEnrollment:start",Q(h,c))}(h,{idToken:w.credential,phoneEnrollmentInfo:{phoneNumber:v.phoneNumber,recaptchaToken:m}})).phoneSessionInfo.sessionInfo;{Z("signin"===w.type,h,"internal-error");const N=(null===(p=v.multiFactorHint)||void 0===p?void 0:p.uid)||v.multiFactorUid;return Z(N,h,"missing-multi-factor-info"),(yield function Wh(h,c){return B(h,"POST","/v2/accounts/mfaSignIn:start",Q(h,c))}(h,{mfaPendingCredential:w.credential,mfaEnrollmentId:N,phoneSignInInfo:{recaptchaToken:m}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:w}=yield function pE(h,c){return Ch.apply(this,arguments)}(h,{phoneNumber:v.phoneNumber,recaptchaToken:m});return w}}finally{l._reset()}}),wt.apply(this,arguments)}function fa(){return(fa=(0,I.Z)(function*(h,c){yield Nh((0,j.m9)(h),c)})).apply(this,arguments)}let Rn=(()=>{class h{constructor(l){this.providerId=h.PROVIDER_ID,this.auth=Ft(l)}verifyPhoneNumber(l,p){return xu(this.auth,l,(0,j.m9)(p))}static credential(l,p){return ge._fromVerification(l,p)}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:p,temporaryProof:m}=l;return p&&m?ge._fromTokenResponse(p,m):null}}return h.PROVIDER_ID="phone",h.PHONE_SIGN_IN_METHOD="phone",h})();function co(h,c){return c?Ze(c):(Z(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}class pl extends ts{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Lr(c,this._buildIdpRequest())}_linkToIdToken(c,l){return Lr(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return Lr(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function pa(h){return Em(h.auth,new pl(h),h.bypassAuthState)}function $r(h){const{auth:c,user:l}=h;return Z(l,c,"internal-error"),kh(l,new pl(h),h.bypassAuthState)}function PE(h){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,I.Z)(function*(h){const{auth:c,user:l}=h;return Z(l,c,"internal-error"),Nh(l,new pl(h),h.bypassAuthState)})).apply(this,arguments)}class Gm{constructor(c,l,p,m,v=!1){this.auth=c,this.resolver=p,this.user=m,this.bypassAuthState=v,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,I.Z)(function*(p,m){c.pendingPromise={resolve:p,reject:m};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(v){c.reject(v)}});return function(p,m){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,I.Z)(function*(){const{urlResponse:p,sessionId:m,postBody:v,tenantId:w,error:N,type:q}=c;if(N)return void l.reject(N);const ue={auth:l.auth,requestUri:p,sessionId:m,tenantId:w||void 0,postBody:v||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(q)(ue))}catch(_e){l.reject(_e)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return pa;case"linkViaPopup":case"linkViaRedirect":return PE;case"reauthViaPopup":case"reauthViaRedirect":return $r;default:_t(this.auth,"internal-error")}}resolve(c){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ms=new Ri(2e3,1e4);function Xh(){return(Xh=(0,I.Z)(function*(h,c,l){const p=Ft(h);We(h,c,rs);const m=co(p,l);return new Me(p,"signInViaPopup",c,m).executeNotNull()})).apply(this,arguments)}function gl(){return(gl=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);We(p.auth,c,rs);const m=co(p.auth,l);return new Me(p.auth,"reauthViaPopup",c,m,p).executeNotNull()})).apply(this,arguments)}function ef(){return(ef=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);We(p.auth,c,rs);const m=co(p.auth,l);return new Me(p.auth,"linkViaPopup",c,m,p).executeNotNull()})).apply(this,arguments)}let Me=(()=>{class h extends Gm{constructor(l,p,m,v,w){super(l,p,v,w),this.provider=m,this.authWindow=null,this.pollId=null,h.currentPopupAction&&h.currentPopupAction.cancel(),h.currentPopupAction=this}executeNotNull(){var l=this;return(0,I.Z)(function*(){const p=yield l.execute();return Z(p,l.auth,"internal-error"),p})()}onExecution(){var l=this;return(0,I.Z)(function*(){Vt(1===l.filter.length,"Popup operations only handle one event");const p=Rs();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],p),l.authWindow.associatedEvent=p,l.resolver._originValidation(l.auth).catch(m=>{l.reject(m)}),l.resolver._isIframeWebStorageSupported(l.auth,m=>{m||l.reject(Rt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(Rt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h.currentPopupAction=null}pollUserCancellation(){const l=()=>{var p,m;this.pollId=null!==(m=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==m&&m.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Rt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,Ms.get())};l()}}return h.currentPopupAction=null,h})();const Zm="pendingRedirect",ml=new Map;class NE extends Gm{constructor(c,l,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,I.Z)(function*(){let p=ml.get(l.auth._key());if(!p){try{const v=(yield function ME(h,c){return tf.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;p=()=>Promise.resolve(v)}catch(m){p=()=>Promise.reject(m)}ml.set(l.auth._key(),p)}return l.bypassAuthState||ml.set(l.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,p=this;return(0,I.Z)(function*(){if("signInViaRedirect"===c.type)return l().call(p,c);if("unknown"!==c.type){if(c.eventId){const m=yield p.auth._redirectUserForId(c.eventId);if(m)return p.user=m,l().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function tf(){return(tf=(0,I.Z)(function*(h,c){const l=Qm(c),p=Km(h);if(!(yield p._isAvailable()))return!1;const m="true"===(yield p._get(l));return yield p._remove(l),m})).apply(this,arguments)}function _l(h,c){return xs.apply(this,arguments)}function xs(){return(xs=(0,I.Z)(function*(h,c){return Km(h)._set(Qm(c),"true")})).apply(this,arguments)}function nf(h,c){ml.set(h._key(),c)}function Km(h){return Ze(h._redirectPersistence)}function Qm(h){return bn(Zm,h.config.apiKey,h.name)}function kE(h,c,l){return function Y(h,c,l){return it.apply(this,arguments)}(h,c,l)}function it(){return(it=(0,I.Z)(function*(h,c,l){const p=Ft(h);We(h,c,rs),yield p._initializationPromise;const m=co(p,l);return yield _l(m,p),m._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function OE(h,c,l){return function VE(h,c,l){return vn.apply(this,arguments)}(h,c,l)}function vn(){return(vn=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);We(p.auth,c,rs),yield p.auth._initializationPromise;const m=co(p.auth,l);yield _l(m,p.auth);const v=yield sf(p);return m._openRedirect(p.auth,c,"reauthViaRedirect",v)})).apply(this,arguments)}function Ym(h,c,l){return function ku(h,c,l){return si.apply(this,arguments)}(h,c,l)}function si(){return(si=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);We(p.auth,c,rs),yield p.auth._initializationPromise;const m=co(p.auth,l);yield Cr(!1,p,c.providerId),yield _l(m,p.auth);const v=yield sf(p);return m._openRedirect(p.auth,c,"linkViaRedirect",v)})).apply(this,arguments)}function Ou(){return(Ou=(0,I.Z)(function*(h,c){return yield Ft(h)._initializationPromise,yl(h,c,!1)})).apply(this,arguments)}function yl(h,c){return Jm.apply(this,arguments)}function Jm(){return(Jm=(0,I.Z)(function*(h,c,l=!1){const p=Ft(h),m=co(p,c),w=yield new NE(p,m,l).execute();return w&&!l&&(delete w.user._redirectEventId,yield p._persistUserIfCurrent(w.user),yield p._setRedirectUser(null,c)),w})).apply(this,arguments)}function sf(h){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,I.Z)(function*(h){const c=Rs(`${h.uid}:::`);return h._redirectEventId=c,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),c})).apply(this,arguments)}class af{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(l=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function LE(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ji(h);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var p;if(c.error&&!ji(c)){const m=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";l.onError(Rt(this.auth,m))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const p=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(lo(c))}saveEventToCache(c){this.cachedEventUids.add(lo(c)),this.lastProcessedEventTime=Date.now()}}function lo(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(c=>c).join("-")}function ji({type:h,error:c}){return"unknown"===h&&"auth/no-auth-event"===c?.code}function uf(h){return cf.apply(this,arguments)}function cf(){return(cf=(0,I.Z)(function*(h,c={}){return B(h,"GET","/v1/projects",c)})).apply(this,arguments)}const FE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lf=/^https?/;function vl(){return(vl=(0,I.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:c}=yield uf(h);for(const l of c)try{if(hf(l))return}catch{}_t(h,"unauthorized-domain")})).apply(this,arguments)}function hf(h){const c=mn(),{protocol:l,hostname:p}=new URL(c);if(h.startsWith("chrome-extension://")){const w=new URL(h);return""===w.hostname&&""===p?"chrome-extension:"===l&&h.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&w.hostname===p}if(!lf.test(l))return!1;if(FE.test(h))return p===h;const m=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+m+"|"+m+")$","i").test(p)}const UE=new Ri(3e4,6e4);function ff(){const h=an().___jsl;if(h?.H)for(const c of Object.keys(h.H))if(h.H[c].r=h.H[c].r||[],h.H[c].L=h.H[c].L||[],h.H[c].r=[...h.H[c].L],h.CP)for(let l=0;l<h.CP.length;l++)h.CP[l]=null}let Vu=null;const e_=new Ri(5e3,15e3),t_="__/auth/iframe",gf="emulator/auth/iframe",BE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dr(h){const c=h.config;Z(c.authDomain,h,"auth-domain-config-required");const l=c.emulator?V(c,gf):`https://${h.config.authDomain}/${t_}`,p={apiKey:c.apiKey,appName:h.name,v:Ve.SDK_VERSION},m=jE.get(h.config.apiHost);m&&(p.eid=m);const v=h._getFrameworks();return v.length&&(p.fw=v.join(",")),`${l}?${(0,j.xO)(p).slice(1)}`}function xt(){return xt=(0,I.Z)(function*(h){const c=yield function Xm(h){return Vu=Vu||function pf(h){return new Promise((c,l)=>{var p,m,v;function w(){ff(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{ff(),l(Rt(h,"network-request-failed"))},timeout:UE.get()})}if(null!==(m=null===(p=an().gapi)||void 0===p?void 0:p.iframes)&&void 0!==m&&m.Iframe)c(gapi.iframes.getContext());else{if(null===(v=an().gapi)||void 0===v||!v.load){const N=uE("iframefcb");return an()[N]=()=>{gapi.load?w():l(Rt(h,"network-request-failed"))},am(`https://apis.google.com/js/api.js?onload=${N}`).catch(q=>l(q))}w()}}).catch(c=>{throw Vu=null,c})}(h),Vu}(h),l=an().gapi;return Z(l,h,"internal-error"),c.open({where:document.body,url:dr(h),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BE,dontclear:!0},p=>new Promise(function(){var m=(0,I.Z)(function*(v,w){yield p.restyle({setHideOnLeave:!1});const N=Rt(h,"network-request-failed"),q=an().setTimeout(()=>{w(N)},e_.get());function ue(){an().clearTimeout(q),v(p)}p.ping(ue).then(ue,()=>{w(N)})});return function(v,w){return m.apply(this,arguments)}}()))}),xt.apply(this,arguments)}const $E={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class mf{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const zE="__/auth/handler",El="emulator/auth/handler",wl=encodeURIComponent("fac");function ga(h,c,l,p,m,v){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,I.Z)(function*(h,c,l,p,m,v){Z(h.config.authDomain,h,"auth-domain-config-required"),Z(h.config.apiKey,h,"invalid-api-key");const w={apiKey:h.config.apiKey,appName:h.name,authType:l,redirectUrl:p,v:Ve.SDK_VERSION,eventId:m};if(c instanceof rs){c.setDefaultLanguage(h.languageCode),w.providerId=c.providerId||"",(0,j.xb)(c.getCustomParameters())||(w.customParameters=JSON.stringify(c.getCustomParameters()));for(const[_e,we]of Object.entries(v||{}))w[_e]=we}if(c instanceof Ar){const _e=c.getScopes().filter(we=>""!==we);_e.length>0&&(w.scopes=_e.join(","))}h.tenantId&&(w.tid=h.tenantId);const N=w;for(const _e of Object.keys(N))void 0===N[_e]&&delete N[_e];const q=yield h._getAppCheckToken(),ue=q?`#${wl}=${encodeURIComponent(q)}`:"";return`${function r_({config:h}){return h.emulator?V(h,El):`https://${h.authDomain}/${zE}`}(h)}?${(0,j.xO)(N).slice(1)}${ue}`})).apply(this,arguments)}const Tl="webStorageSupport",fo=class WE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uo,this._completeRedirectFn=yl,this._overrideRedirectResult=nf}_openPopup(c,l,p,m){var v=this;return(0,I.Z)(function*(){var w;Vt(null===(w=v.eventManagers[c._key()])||void 0===w?void 0:w.manager,"_initialize() not called before _openPopup()");const N=yield ga(c,l,p,mn(),m);return function Il(h,c,l,p=500,m=600){const v=Math.max((window.screen.availHeight-m)/2,0).toString(),w=Math.max((window.screen.availWidth-p)/2,0).toString();let N="";const q=Object.assign(Object.assign({},$E),{width:p.toString(),height:m.toString(),top:v,left:w}),ue=(0,j.z$)().toLowerCase();l&&(N=qc(ue)?"_blank":l),At(ue)&&(c=c||"http://localhost",q.scrollbars="yes");const _e=Object.entries(q).reduce((tn,[yi,Ol])=>`${tn}${yi}=${Ol},`,"");if(function $(h=(0,j.z$)()){var c;return Be(h)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(ue)&&"_self"!==N)return function ks(h,c){const l=document.createElement("a");l.href=h,l.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(p)}(c||"",N),new mf(null);const we=window.open(c||"",N,_e);Z(we,h,"popup-blocked");try{we.focus()}catch{}return new mf(we)}(c,N,Rs())})()}_openRedirect(c,l,p,m){var v=this;return(0,I.Z)(function*(){return yield v._originValidation(c),function Mm(h){an().location.href=h}(yield ga(c,l,p,mn(),m)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:m,promise:v}=this.eventManagers[l];return m?Promise.resolve(m):(Vt(v,"If manager is not set, promise should be"),v)}const p=this.initAndGetManager(c);return this.eventManagers[l]={promise:p},p.catch(()=>{delete this.eventManagers[l]}),p}initAndGetManager(c){var l=this;return(0,I.Z)(function*(){const p=yield function ho(h){return xt.apply(this,arguments)}(c),m=new af(c);return p.register("authEvent",v=>(Z(v?.authEvent,c,"invalid-auth-event"),{status:m.onEvent(v.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:m},l.iframes[c._key()]=p,m})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(Tl,{type:Tl},m=>{var v;const w=null===(v=m?.[0])||void 0===v?void 0:v[Tl];void 0!==w&&l(!!w),_t(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function df(h){return vl.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return Ee()||Pi()||Be()}};class Fu{constructor(c){this.factorId=c}_process(c,l,p){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,p);case"signin":return this._finalizeSignIn(c,l.credential);default:return Gt("unexpected MultiFactorSessionType")}}}class _f extends Fu{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new _f(c)}_finalizeEnroll(c,l,p){return function CP(h,c){return B(h,"POST","/v2/accounts/mfaEnrollment:finalize",Q(h,c))}(c,{idToken:l,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function kP(h,c){return B(h,"POST","/v2/accounts/mfaSignIn:finalize",Q(h,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let LP=(()=>{class h{constructor(){}static assertion(l){return _f._fromCredential(l)}}return h.FACTOR_ID="phone",h})();var ZE="@firebase/auth";class yf{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,I.Z)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Os(){return window}(0,j.Pz)("authIdTokenMaxAge"),function QE(h){(0,Ve._registerComponent)(new Jt.wA("auth",(c,{options:l})=>{const p=c.getProvider("app").getImmediate(),m=c.getProvider("heartbeat"),v=c.getProvider("app-check-internal"),{apiKey:w,authDomain:N}=p.options;Z(w&&!w.includes(":"),"invalid-api-key",{appName:p.name});const q={apiKey:w,authDomain:N,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:na(h)},ue=new aE(p,m,v,q);return function pP(h,c){const l=c?.persistence||[],p=(Array.isArray(l)?l:[l]).map(Ze);c?.errorMap&&h._updateErrorMap(c.errorMap),h._initializeWithPersistence(p,c?.popupRedirectResolver)}(ue,l),ue},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,p)=>{c.getProvider("auth-internal").initialize()})),(0,Ve._registerComponent)(new Jt.wA("auth-internal",c=>{const l=Ft(c.getProvider("auth").getImmediate());return new yf(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ve.registerVersion)(ZE,"1.5.1",function Uu(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(h)),(0,Ve.registerVersion)(ZE,"1.5.1","esm2017")}("Browser");function If(){return If=(0,I.Z)(function*(h,c,l){var p;const{BuildInfo:m}=Os();Vt(c.sessionId,"AuthEvent did not contain a session ID");const v=yield function u_(h){return bl.apply(this,arguments)}(c.sessionId),w={};return Be()?w.ibi=m.packageName:b()?w.apn=m.packageName:_t(h,"operation-not-supported-in-this-environment"),m.displayName&&(w.appDisplayName=m.displayName),w.sessionId=v,ga(h,l,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,w)}),If.apply(this,arguments)}function $u(){return($u=(0,I.Z)(function*(h){const{BuildInfo:c}=Os(),l={};Be()?l.iosBundleId=c.packageName:b()?l.androidPackageName=c.packageName:_t(h,"operation-not-supported-in-this-environment"),yield uf(h,l)})).apply(this,arguments)}function Hu(){return(Hu=(0,I.Z)(function*(h,c,l){const{cordova:p}=Os();let m=()=>{};try{yield new Promise((v,w)=>{let N=null;function q(){var we;v();const tn=null===(we=p.plugins.browsertab)||void 0===we?void 0:we.close;"function"==typeof tn&&tn(),"function"==typeof l?.close&&l.close()}function ue(){N||(N=window.setTimeout(()=>{w(Rt(h,"redirect-cancelled-by-user"))},2e3))}function _e(){"visible"===document?.visibilityState&&ue()}c.addPassiveListener(q),document.addEventListener("resume",ue,!1),b()&&document.addEventListener("visibilitychange",_e,!1),m=()=>{c.removePassiveListener(q),document.removeEventListener("resume",ue,!1),document.removeEventListener("visibilitychange",_e,!1),N&&window.clearTimeout(N)}})}finally{m()}})).apply(this,arguments)}function bl(){return(bl=(0,I.Z)(function*(h){const c=function c_(h){if(Vt(/[0-9a-zA-Z]+/.test(h),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(h);const c=new ArrayBuffer(h.length),l=new Uint8Array(c);for(let p=0;p<h.length;p++)l[p]=h.charCodeAt(p);return l}(h),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(m=>m.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class ew extends af{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,I.Z)(function*(){yield c.initPromise})()}}function d_(h){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,I.Z)(function*(h){const c=yield Ef()._get(Gn(h));return c&&(yield Ef()._remove(Gn(h))),c})).apply(this,arguments)}function Gu(){const h=[];for(let l=0;l<20;l++){const p=Math.floor(62*Math.random());h.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return h.join("")}function Ef(){return Ze(Ui)}function Gn(h){return bn("authEvent",h.config.apiKey,h.name)}function ma(h){if(!h?.includes("?"))return{};const[c,...l]=h.split("?");return(0,j.zd)(l.join("?"))}const Pl=class f_{constructor(){this._redirectPersistence=uo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=yl,this._overrideRedirectResult=nf}_initialize(c){var l=this;return(0,I.Z)(function*(){const p=c._key();let m=l.eventManagers.get(p);return m||(m=new ew(c),l.eventManagers.set(p,m),l.attachCallbackListeners(c,m)),m})()}_openPopup(c){_t(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,p,m){var v=this;return(0,I.Z)(function*(){!function XE(h){var c,l,p,m,v,w,N,q,ue,_e;const we=Os();Z("function"==typeof(null===(c=we?.universalLinks)||void 0===c?void 0:c.subscribe),h,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Z(typeof(null===(l=we?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Z("function"==typeof(null===(v=null===(m=null===(p=we?.cordova)||void 0===p?void 0:p.plugins)||void 0===m?void 0:m.browsertab)||void 0===v?void 0:v.openUrl),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Z("function"==typeof(null===(q=null===(N=null===(w=we?.cordova)||void 0===w?void 0:w.plugins)||void 0===N?void 0:N.browsertab)||void 0===q?void 0:q.isAvailable),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Z("function"==typeof(null===(_e=null===(ue=we?.cordova)||void 0===ue?void 0:ue.InAppBrowser)||void 0===_e?void 0:_e.open),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const w=yield v._initialize(c);yield w.initialized(),w.resetRedirect(),function xE(){ml.clear()}(),yield v._originValidation(c);const N=function Sl(h,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:Gu(),postBody:null,tenantId:h.tenantId,error:Rt(h,"no-auth-event")}}(c,p,m);yield function po(h,c){return Ef()._set(Gn(h),c)}(c,N);const q=yield function $i(h,c,l){return If.apply(this,arguments)}(c,N,l),ue=yield function a_(h){const{cordova:c}=Os();return new Promise(l=>{c.plugins.browsertab.isAvailable(p=>{let m=null;p?c.plugins.browsertab.openUrl(h):m=c.InAppBrowser.open(h,function tt(h=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(h)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(h)}()?"_blank":"_system","location=yes"),l(m)})})}(q);return function Dl(h,c,l){return Hu.apply(this,arguments)}(c,w,ue)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Cl(h){return $u.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:p,handleOpenURL:m,BuildInfo:v}=Os(),w=setTimeout((0,I.Z)(function*(){yield d_(c),l.onEvent(go())}),500),N=function(){var _e=(0,I.Z)(function*(we){clearTimeout(w);const tn=yield d_(c);let yi=null;tn&&we?.url&&(yi=function h_(h,c){var l,p;const m=function qn(h){const c=ma(h),l=c.link?decodeURIComponent(c.link):void 0,p=ma(l).link,m=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return ma(m).link||m||p||l||h}(c);if(m.includes("/__/auth/callback")){const v=ma(m),w=v.firebaseError?function tw(h){try{return JSON.parse(h)}catch{return null}}(decodeURIComponent(v.firebaseError)):null,N=null===(p=null===(l=w?.code)||void 0===l?void 0:l.split("auth/"))||void 0===p?void 0:p[1],q=N?Rt(N):null;return q?{type:h.type,eventId:h.eventId,tenantId:h.tenantId,error:q,urlResponse:null,sessionId:null,postBody:null}:{type:h.type,eventId:h.eventId,tenantId:h.tenantId,sessionId:h.sessionId,urlResponse:m,postBody:null}}return null}(tn,we.url)),l.onEvent(yi||go())});return function(tn){return _e.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,N);const q=m,ue=`${v.packageName.toLowerCase()}://`;Os().handleOpenURL=function(){var _e=(0,I.Z)(function*(we){if(we.toLowerCase().startsWith(ue)&&N({url:we}),"function"==typeof q)try{q(we)}catch(tn){console.error(tn)}});return function(we){return _e.apply(this,arguments)}}()}};function go(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Rt("no-auth-event")}}function Hi(){var h;return(null===(h=self?.location)||void 0===h?void 0:h.protocol)||null}function g_(h=(0,j.z$)()){return!("file:"!==Hi()&&"ionic:"!==Hi()&&"capacitor:"!==Hi()||!h.toLowerCase().match(/iphone|ipad|ipod|android/))}function rw(){try{const h=self.localStorage,c=Rs();if(h)return h.setItem(c,"1"),h.removeItem(c),!function HP(h=(0,j.z$)()){return function jP(){return(0,j.w1)()&&11===document?.documentMode}()||function $P(h=(0,j.z$)()){return/Edge\/\d+/.test(h)}(h)}()||(0,j.hl)()}catch{return m_()&&(0,j.hl)()}return!1}function m_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vs(){return(function UP(){return"http:"===Hi()||"https:"===Hi()}()||(0,j.ru)()||g_())&&!function BP(){return(0,j.b$)()||(0,j.UG)()}()&&rw()&&!m_()}function __(){return g_()&&typeof document<"u"}function un(){return(un=(0,I.Z)(function*(){return!!__()&&new Promise(h=>{const c=setTimeout(()=>{h(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),h(!0)})})})).apply(this,arguments)}const zn={LOCAL:"local",NONE:"none",SESSION:"session"},qu=Z,Hr="persistence";function Nl(h){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,I.Z)(function*(h){yield h._initializationPromise;const c=y_(),l=bn(Hr,h.config.apiKey,h.name);c&&c.setItem(l,h._getPersistence())})).apply(this,arguments)}function y_(){var h;try{return(null===(h=function sw(){return typeof window<"u"?window:null}())||void 0===h?void 0:h.sessionStorage)||null}catch{return null}}const GP=Z;class Ls{constructor(){this.browserResolver=Ze(fo),this.cordovaResolver=Ze(Pl),this.underlyingResolver=null,this._redirectPersistence=uo,this._completeRedirectFn=yl,this._overrideRedirectResult=nf}_initialize(c){var l=this;return(0,I.Z)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,p,m){var v=this;return(0,I.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openPopup(c,l,p,m)})()}_openRedirect(c,l,p,m){var v=this;return(0,I.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openRedirect(c,l,p,m)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return __()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return GP(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,I.Z)(function*(){if(c.underlyingResolver)return;const l=yield function iw(){return un.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function ow(h){return h.unwrap()}function Tf(h){return aw(h)}function aw(h){const{_tokenResponse:c}=h instanceof j.ZR?h.customData:h;if(!c)return null;if(!(h instanceof j.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Rn.credentialFromResult(h);const l=c.providerId;if(!l||l===et.PASSWORD)return null;let p;switch(l){case et.GOOGLE:p=mi;break;case et.FACEBOOK:p=ri;break;case et.GITHUB:p=lt;break;case et.TWITTER:p=xi;break;default:const{oauthIdToken:m,oauthAccessToken:v,oauthTokenSecret:w,pendingToken:N,nonce:q}=c;return v||w||m||N?N?l.startsWith("saml.")?As._create(l,N):Ni._fromParams({providerId:l,signInMethod:l,pendingToken:N,idToken:m,accessToken:v}):new is(l).credential({idToken:m,accessToken:v,rawNonce:q}):null}return h instanceof j.ZR?p.credentialFromError(h):p.credentialFromResult(h)}function hr(h,c){return c.catch(l=>{throw l instanceof j.ZR&&function Ea(h,c){var l;const p=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new uw(h,function TP(h,c){var l;const p=(0,j.m9)(h),m=c;return Z(c.customData.operationType,p,"argument-error"),Z(null===(l=m.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,p,"argument-error"),Sm._fromError(p,m)}(h,c));else if(p){const m=aw(c),v=c;m&&(v.credential=m,v.tenantId=p.tenantId||void 0,v.email=p.email||void 0,v.phoneNumber=p.phoneNumber||void 0)}}(h,l),l}).then(l=>{const m=l.user;return{operationType:l.operationType,credential:Tf(l),additionalUserInfo:jn(l),user:as.getOrCreate(m)}})}function Af(h,c){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,I.Z)(function*(h,c){const l=yield c;return{verificationId:l.verificationId,confirm:p=>hr(h,l.confirm(p))}})).apply(this,arguments)}class uw{constructor(c,l){this.resolver=l,this.auth=function Gr(h){return h.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return hr(ow(this.auth),this.resolver.resolveSignIn(c))}}class as{constructor(c){this._delegate=c,this.multiFactor=function SP(h){const c=(0,j.m9)(h);return Pm.has(c)||Pm.set(c,Rm._fromUser(c)),Pm.get(c)}(c)}static getOrCreate(c){return as.USER_MAP.has(c)||as.USER_MAP.set(c,new as(c)),as.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,I.Z)(function*(){return hr(l.auth,wm(l._delegate,c))})()}linkWithPhoneNumber(c,l){var p=this;return(0,I.Z)(function*(){return Af(p.auth,function Kh(h,c,l){return Qh.apply(this,arguments)}(p._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,I.Z)(function*(){return hr(l.auth,function Wm(h,c,l){return ef.apply(this,arguments)}(l._delegate,c,Ls))})()}linkWithRedirect(c){var l=this;return(0,I.Z)(function*(){return yield Nl(Ft(l.auth)),Ym(l._delegate,c,Ls)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,I.Z)(function*(){return hr(l.auth,Tm(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return Af(this.auth,function Bi(h,c,l){return fl.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return hr(this.auth,function zm(h,c,l){return gl.apply(this,arguments)}(this._delegate,c,Ls))}reauthenticateWithRedirect(c){var l=this;return(0,I.Z)(function*(){return yield Nl(Ft(l.auth)),OE(l._delegate,c,Ls)})()}sendEmailVerification(c){return function aa(h,c){return Wt.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,I.Z)(function*(){return yield function _E(h,c){return el.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function ss(h,c){return ua((0,j.m9)(h),c,null)}(this._delegate,c)}updatePassword(c){return function bu(h,c){return ua((0,j.m9)(h),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Yh(h,c){return fa.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Dm(h,c){return Vi.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function Du(h,c,l){return bs.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}as.USER_MAP=new WeakMap;const Wu=Z;let v_=(()=>{class h{constructor(l,p){if(this.app=l,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:m}=l.options;Wu(m,"invalid-api-key",{appName:l.name}),Wu(m,"invalid-api-key",{appName:l.name});const v=typeof window<"u"?Ls:void 0;this._delegate=p.initialize({options:{persistence:xl(m,l.name),popupRedirectResolver:v}}),this._delegate._updateErrorMap(On),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?as.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,p){!function ur(h,c,l){const p=Ft(h);Z(p._canInitEmulator,p,"emulator-config-failed"),Z(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const m=!!l?.disableWarnings,v=pu(c),{host:w,port:N}=function dE(h){const c=pu(h),l=/(\/\/)?([^?#/]+)/.exec(h.substr(c.length));if(!l)return{host:"",port:null};const p=l[2].split("@").pop()||"",m=/^(\[[^\]]+\])(:|$)/.exec(p);if(m){const v=m[1];return{host:v,port:wh(p.substr(v.length+1))}}{const[v,w]=p.split(":");return{host:v,port:wh(w)}}}(c);p.config.emulator={url:`${v}//${w}${null===N?"":`:${N}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:w,port:N,protocol:v.replace(":",""),options:Object.freeze({disableWarnings:m})}),m||function hE(){function h(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h())}()}(this._delegate,l,p)}applyActionCode(l){return function Am(h,c){return ia.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return Cm(this._delegate,l)}confirmPasswordReset(l,p){return function Ur(h,c,l){return il.apply(this,arguments)}(this._delegate,l,p)}createUserWithEmailAndPassword(l,p){var m=this;return(0,I.Z)(function*(){return hr(m._delegate,function He(h,c,l){return Pt.apply(this,arguments)}(m._delegate,l,p))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function Cu(h,c){return sl.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function sa(h,c){const l=ns.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,I.Z)(function*(){Wu(Vs(),l._delegate,"operation-not-supported-in-this-environment");const p=yield function rf(h,c){return Ou.apply(this,arguments)}(l._delegate,Ls);return p?hr(l._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function _a(h,c){Ft(h)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,p,m){const{next:v,error:w,complete:N}=Ml(l,p,m);return this._delegate.onAuthStateChanged(v,w,N)}onIdTokenChanged(l,p,m){const{next:v,error:w,complete:N}=Ml(l,p,m);return this._delegate.onIdTokenChanged(v,w,N)}sendSignInLinkToEmail(l,p){return function Au(h,c,l){return Sn.apply(this,arguments)}(this._delegate,l,p)}sendPasswordResetEmail(l,p){return function lr(h,c,l){return Ds.apply(this,arguments)}(this._delegate,l,p||void 0)}setPersistence(l){var p=this;return(0,I.Z)(function*(){let m;switch(function va(h,c){qu(Object.values(zn).includes(c),h,"invalid-persistence-type"),(0,j.b$)()?qu(c!==zn.SESSION,h,"unsupported-persistence-type"):(0,j.UG)()?qu(c===zn.NONE,h,"unsupported-persistence-type"):m_()?qu(c===zn.NONE||c===zn.LOCAL&&(0,j.hl)(),h,"unsupported-persistence-type"):qu(c===zn.NONE||rw(),h,"unsupported-persistence-type")}(p._delegate,l),l){case zn.SESSION:m=uo;break;case zn.LOCAL:m=(yield Ze(ha)._isAvailable())?ha:Ui;break;case zn.NONE:m=zt;break;default:return _t("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(m)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return hr(this._delegate,function Im(h){return Xc.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return hr(this._delegate,tl(this._delegate,l))}signInWithCustomToken(l){return hr(this._delegate,function vE(h,c){return cr.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,p){return hr(this._delegate,function _i(h,c,l){return tl((0,j.m9)(h),bh.credential(c,l)).catch(function(){var p=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&rt(h),m});return function(m){return p.apply(this,arguments)}}())}(this._delegate,l,p))}signInWithEmailLink(l,p){return hr(this._delegate,function on(h,c,l){return ki.apply(this,arguments)}(this._delegate,l,p))}signInWithPhoneNumber(l,p){return Af(this._delegate,function Hm(h,c,l){return Zh.apply(this,arguments)}(this._delegate,l,p))}signInWithPopup(l){var p=this;return(0,I.Z)(function*(){return Wu(Vs(),p._delegate,"operation-not-supported-in-this-environment"),hr(p._delegate,function qm(h,c,l){return Xh.apply(this,arguments)}(p._delegate,l,Ls))})()}signInWithRedirect(l){var p=this;return(0,I.Z)(function*(){return Wu(Vs(),p._delegate,"operation-not-supported-in-this-environment"),yield Nl(p._delegate),kE(p._delegate,l,Ls)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function en(h,c){return de.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return h.Persistence=zn,h})();function Ml(h,c,l){let p=h;"function"!=typeof h&&({next:p,error:c,complete:l}=h);const m=p;return{next:w=>m(w&&as.getOrCreate(w)),error:c,complete:l}}function xl(h,c){const l=function zu(h,c){const l=y_();if(!l)return[];const p=bn(Hr,h,c);switch(l.getItem(p)){case zn.NONE:return[zt];case zn.LOCAL:return[ha,uo];case zn.SESSION:return[uo];default:return[]}}(h,c);if(typeof self<"u"&&!l.includes(ha)&&l.push(ha),typeof window<"u")for(const p of[Ui,uo])l.includes(p)||l.push(p);return l.includes(zt)||l.push(zt),l}class Df{constructor(){this.providerId="phone",this._delegate=new Rn(ow(ke.Z.auth()))}static credential(c,l){return Rn.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}Df.PHONE_SIGN_IN_METHOD=Rn.PHONE_SIGN_IN_METHOD,Df.PROVIDER_ID=Rn.PROVIDER_ID;const Zu=Z;class cw{constructor(c,l,p=ke.Z.app()){var m;Zu(null===(m=p.options)||void 0===m?void 0:m.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new SE(p.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function lw(h){h.INTERNAL.registerComponent(new Jt.wA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new v_(l,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:bh,FacebookAuthProvider:ri,GithubAuthProvider:lt,GoogleAuthProvider:mi,OAuthProvider:is,SAMLAuthProvider:wu,PhoneAuthProvider:Df,PhoneMultiFactorGenerator:LP,RecaptchaVerifier:cw,TwitterAuthProvider:xi,Auth:v_,AuthCredential:ts,Error:j.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),h.registerVersion("@firebase/auth-compat","0.5.1")}(ke.Z)},537:(Ji,xn,$e)=>{$e.d(xn,{H0:()=>kn,wA:()=>j});var I=$e(861),ke=$e(58);class j{constructor(K,re,Te){this.name=K,this.instanceFactory=re,this.type=Te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const Ve="[DEFAULT]";class dt{constructor(K,re){this.name=K,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const re=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(re)){const Te=new ke.BH;if(this.instancesDeferred.set(re,Te),this.isInitialized(re)||this.shouldAutoInitialize())try{const Je=this.getOrInitializeService({instanceIdentifier:re});Je&&Te.resolve(Je)}catch{}}return this.instancesDeferred.get(re).promise}getImmediate(K){var re;const Te=this.normalizeInstanceIdentifier(K?.identifier),Je=null!==(re=K?.optional)&&void 0!==re&&re;if(!this.isInitialized(Te)&&!this.shouldAutoInitialize()){if(Je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Te})}catch(ht){if(Je)return null;throw ht}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function Jt(et){return"EAGER"===et.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:Ve})}catch{}for(const[re,Te]of this.instancesDeferred.entries()){const Je=this.normalizeInstanceIdentifier(re);try{const ht=this.getOrInitializeService({instanceIdentifier:Je});Te.resolve(ht)}catch{}}}}clearInstance(K=Ve){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,I.Z)(function*(){const re=Array.from(K.instances.values());yield Promise.all([...re.filter(Te=>"INTERNAL"in Te).map(Te=>Te.INTERNAL.delete()),...re.filter(Te=>"_delete"in Te).map(Te=>Te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=Ve){return this.instances.has(K)}getOptions(K=Ve){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:re={}}=K,Te=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(Te))throw Error(`${this.name}(${Te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Je=this.getOrInitializeService({instanceIdentifier:Te,options:re});for(const[ht,On]of this.instancesDeferred.entries())Te===this.normalizeInstanceIdentifier(ht)&&On.resolve(Je);return Je}onInit(K,re){var Te;const Je=this.normalizeInstanceIdentifier(re),ht=null!==(Te=this.onInitCallbacks.get(Je))&&void 0!==Te?Te:new Set;ht.add(K),this.onInitCallbacks.set(Je,ht);const On=this.instances.get(Je);return On&&K(On,Je),()=>{ht.delete(K)}}invokeOnInitCallbacks(K,re){const Te=this.onInitCallbacks.get(re);if(Te)for(const Je of Te)try{Je(K,re)}catch{}}getOrInitializeService({instanceIdentifier:K,options:re={}}){let Te=this.instances.get(K);if(!Te&&this.component&&(Te=this.component.instanceFactory(this.container,{instanceIdentifier:(et=K,et===Ve?void 0:et),options:re}),this.instances.set(K,Te),this.instancesOptions.set(K,re),this.invokeOnInitCallbacks(Te,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,Te)}catch{}var et;return Te||null}normalizeInstanceIdentifier(K=Ve){return this.component?this.component.multipleInstances?K:Ve:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class kn{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const re=this.getProvider(K.name);if(re.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);re.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const re=new dt(K,this);return this.providers.set(K,re),re}getProviders(){return Array.from(this.providers.values())}}},879:(Ji,xn,$e)=>{$e.d(xn,{Am:()=>et,Ub:()=>kn,Yd:()=>Jt,in:()=>ke});const I=[];var ke=function(K){return K[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",K}(ke||{});const j={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Ve=ke.INFO,dt={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Ht=(K,re,...Te)=>{if(re<K.logLevel)return;const Je=(new Date).toISOString(),ht=dt[re];if(!ht)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[ht](`[${Je}]  ${K.name}:`,...Te)};class Jt{constructor(re){this.name=re,this._logLevel=Ve,this._logHandler=Ht,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in ke))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?j[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...re),this._logHandler(this,ke.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...re),this._logHandler(this,ke.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...re),this._logHandler(this,ke.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...re),this._logHandler(this,ke.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...re),this._logHandler(this,ke.ERROR,...re)}}function kn(K){I.forEach(re=>{re.setLogLevel(K)})}function et(K,re){for(const Te of I){let Je=null;re&&re.level&&(Je=j[re.level]),Te.userLogHandler=null===K?null:(ht,On,...mt)=>{const Ue=mt.map(ze=>{if(null==ze)return null;if("string"==typeof ze)return ze;if("number"==typeof ze||"boolean"==typeof ze)return ze.toString();if(ze instanceof Error)return ze.message;try{return JSON.stringify(ze)}catch{return null}}).filter(ze=>ze).join(" ");On>=(Je??ht.logLevel)&&K({level:ke[On].toLowerCase(),message:Ue,args:mt,type:ht.name})}}}},861:(Ji,xn,$e)=>{function I(j,Ve,dt,Ht,Jt,kn,et){try{var K=j[kn](et),re=K.value}catch(Te){return void dt(Te)}K.done?Ve(re):Promise.resolve(re).then(Ht,Jt)}function ke(j){return function(){var Ve=this,dt=arguments;return new Promise(function(Ht,Jt){var kn=j.apply(Ve,dt);function et(re){I(kn,Ht,Jt,et,K,"next",re)}function K(re){I(kn,Ht,Jt,et,K,"throw",re)}et(void 0)})}}$e.d(xn,{Z:()=>ke})},582:(Ji,xn,$e)=>{function Ve(V,F){var H={};for(var G in V)Object.prototype.hasOwnProperty.call(V,G)&&F.indexOf(G)<0&&(H[G]=V[G]);if(null!=V&&"function"==typeof Object.getOwnPropertySymbols){var Q=0;for(G=Object.getOwnPropertySymbols(V);Q<G.length;Q++)F.indexOf(G[Q])<0&&Object.prototype.propertyIsEnumerable.call(V,G[Q])&&(H[G[Q]]=V[G[Q]])}return H}function Te(V,F,H,G){return new(H||(H=Promise))(function(B,pe){function st(ct){try{Ae(G.next(ct))}catch(qt){pe(qt)}}function De(ct){try{Ae(G.throw(ct))}catch(qt){pe(qt)}}function Ae(ct){ct.done?B(ct.value):function Q(B){return B instanceof H?B:new H(function(pe){pe(B)})}(ct.value).then(st,De)}Ae((G=G.apply(V,F||[])).next())})}function Ot(V){return this instanceof Ot?(this.v=V,this):new Ot(V)}function _t(V,F,H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,G=H.apply(V,F||[]),B=[];return Q={},pe("next"),pe("throw"),pe("return"),Q[Symbol.asyncIterator]=function(){return this},Q;function pe(Mt){G[Mt]&&(Q[Mt]=function(Qn){return new Promise(function(Cn,or){B.push([Mt,Qn,Cn,or])>1||st(Mt,Qn)})})}function st(Mt,Qn){try{!function De(Mt){Mt.value instanceof Ot?Promise.resolve(Mt.value.v).then(Ae,ct):qt(B[0][2],Mt)}(G[Mt](Qn))}catch(Cn){qt(B[0][3],Cn)}}function Ae(Mt){st("next",Mt)}function ct(Mt){st("throw",Mt)}function qt(Mt,Qn){Mt(Qn),B.shift(),B.length&&st(B[0][0],B[0][1])}}function vr(V){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H,F=V[Symbol.asyncIterator];return F?F.call(V):(V=function mt(V){var F="function"==typeof Symbol&&Symbol.iterator,H=F&&V[F],G=0;if(H)return H.call(V);if(V&&"number"==typeof V.length)return{next:function(){return V&&G>=V.length&&(V=void 0),{value:V&&V[G++],done:!V}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}(V),H={},G("next"),G("throw"),G("return"),H[Symbol.asyncIterator]=function(){return this},H);function G(B){H[B]=V[B]&&function(pe){return new Promise(function(st,De){!function Q(B,pe,st,De){Promise.resolve(De).then(function(Ae){B({value:Ae,done:st})},pe)}(st,De,(pe=V[B](pe)).done,pe.value)})}}}$e.d(xn,{FC:()=>_t,KL:()=>vr,_T:()=>Ve,mG:()=>Te,qq:()=>Ot}),"function"==typeof SuppressedError&&SuppressedError}},Ji=>{Ji(Ji.s=919)}]);